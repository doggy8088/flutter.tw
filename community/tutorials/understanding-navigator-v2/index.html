
<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="utf-8">
    <title>Flutter Navigator 2.0 指南與原理解析 | Flutter 中文文件 - Flutter 中文開發者網站 - Flutter</title>
    <link rel="icon" href="/assets/images/cn/flutter-icon.png">
    <link rel="apple-touch-icon" href="/assets/images/cn/flutter-320px.png">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="theme-color" content="#ffffff">
    <link rel="preconnect" href="https://fonts.googleapis.cn">
    <link rel="preconnect" href="https://fonts.gstatic.cn" crossorigin>
    <!--      <meta name="google-site-verification" content="" />-->
     <script>
        (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','G-HPSFTRXK91');
      </script>
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-122680122-1', 'auto');
        ga('send', 'pageview');
      </script>
      <script>
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?459029b086376519fc9bf43c184e2a4f";
          var s = document.getElementsByTagName("script")[0];
          s.parentNode.insertBefore(hm, s);
        })();
      </script>
    

    <meta name="description" content="">
    <meta name="keywords" content="">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@flutterchina">

    <meta property="og:title" content="Flutter Navigator 2.0 指南與原理解析">
    <meta property="og:url" content="https://flutter.tw/community/tutorials/understanding-navigator-v2">
    <meta property="og:description" content="">
    <meta property="og:image" content="https://flutter.tw/assets/images/cn/flutter-cn-logo.png">

    <link rel="preconnect" href="https://files.flutter-io.cn">
    <link href="https://files.flutter-io.cn/fonts/flutter/fonts.css" rel="stylesheet">
    <link href="https://files.flutter-io.cn/fonts/material-icons/material-icons-symbols-outlined.css" rel="stylesheet">
    <!-- <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans+Text:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans+Mono:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" rel="stylesheet" /> -->
    <script>
      window.__CALLBACKS = [];
    </script>

    <link rel="stylesheet" href="/assets/css/main.css?v=1714594673">
    </head>
  <body>

<!--    <section id="cookie-notice">
  <div class="container">
    <p>Google uses cookies to deliver its services, to personalize ads, and to 
      analyze traffic. You can adjust your privacy controls anytime in your 
      <a href="https://myaccount.google.com/data-and-personalization" target="_blank" rel="noopener">Google settings</a>. 
      <a href="https://policies.google.com/technologies/cookies" target="_blank" rel="noopener">Learn more</a>.
    </p>
    <button id="cookie-consent" class="btn btn-primary">Okay</button>
  </div>
</section>
-->

   
     <noscript>
       <iframe
         src="https://www.googletagmanager.com/ns.html?id=G-HPSFTRXK91"
         height="0" width="0" style="display:none;visibility:hidden">
       </iframe>
     </noscript>
   

    <div id="overlay-under-drawer"></div>

    

<header class="site-header">
  <nav class="navbar navbar-expand-md justify-content-start justify-content-md-between">
    <button
      class="navbar-toggler"
      type="button"
      data-toggle="collapse"
      data-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent"
      aria-expanded="false"
      aria-label="Toggle navigation">
      <i class="material-symbols">menu</i>
    </button>

    <a class="navbar-brand" href="https://flutter.tw/">
      <img
        src='/assets/images/cn/flutter-cn-logo.png'
        alt='Flutter CN logo'
        height="37"
        width="129"
        class="align-middle">
    </a>

    <div
      id="navbarSupportedContent"
      class="collapse navbar-collapse flex-grow-0">
      <div
        class="site-header__sheet-bg"
        data-toggle="collapse"
        data-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent"
        aria-expanded="false"
        aria-label="Toggle navigation">
      </div>
      <div class="site-header__sheet">
        <ul class="navbar-nav">
          <div class="site-sidebar site-sidebar--header d-md-none">
            <ul class="nav flex-column"><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#header-sidenav-1" role="button"
             aria-expanded="false" aria-controls="header-sidenav-1"
          >開始使用 Flutter</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-1">
            <li class="nav-item">
    <a class="nav-link" href="/get-started/install">安裝和環境設定</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/get-started/test-drive">開發體驗初探</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/get-started/codelab">編寫第一個 Flutter 應用</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/get-started/learn-more">瞭解更多</a>
  </li>

<div class="dropdown-divider"></div>
<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#header-sidenav-1-6"
      href="#header-sidenav-1-6" role="button"
      aria-expanded="false" aria-controls="header-sidenav-1-6"
    >擁有其他平台開發經驗？
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-1-6">
      <li class="nav-item">
    <a class="nav-link" href="/get-started/flutter-for/android-devs">給 Android 開發者的 Flutter 指南</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/get-started/flutter-for/swiftui-devs">給 iOS SwiftUI 開發者的 Flutter 指南</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/get-started/flutter-for/uikit-devs">給 iOS UIKit 開發者的 Flutter 指南</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/get-started/flutter-for/react-native-devs">給 React Native 開發者的 Flutter 指南</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/get-started/flutter-for/web-devs">給 Web 開發者的 Flutter 指南</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/get-started/flutter-for/xamarin-forms-devs">給 Xamarin.Forms 開發者的 Flutter 指南</a>
  </li>

<div class="dropdown-divider"></div><li class="nav-item">
    <a class="nav-link" href="/get-started/flutter-for/declarative">宣告式 UI 介紹</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/get-started/flutter-for/dart-swift-concurrency">Flutter 對比 Swift 的併發</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link" href="https://dart.tw.gh.miniasp.com/overview" target="_blank" rel="noopener">Dart 語言概覽</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#header-sidenav-2" role="button"
             aria-expanded="false" aria-controls="header-sidenav-2"
          >保持版本更新</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-2">
            <li class="nav-item">
    <a class="nav-link" href="/release/upgrade">版本升級</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/release/archive">SDK 版本清單</a>
  </li>

<div class="dropdown-divider"></div>
<li class="nav-item">
    <a class="nav-link" href="/release/whats-new">最近更新</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/release/release-notes">版本發行注記</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/release/breaking-changes">破壞性改動</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/release/compatibility-policy">相容性策略</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#header-sidenav-3" role="button"
             aria-expanded="false" aria-controls="header-sidenav-3"
          >教程和範例程式碼</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-3">
            <li class="nav-item">
    <a class="nav-link" href="/codelabs">Codelabs</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook">實用教程 (Cookbook)</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="https://flutter.github.io/samples/" target="_blank" rel="noopener">GitHub 上的範例應用</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#header-sidenav-4" role="button"
             aria-expanded="false" aria-controls="header-sidenav-4"
          >應用解決方案</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-4">
            <li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#header-sidenav-4-1"
      href="#header-sidenav-4-1" role="button"
      aria-expanded="false" aria-controls="header-sidenav-4-1"
    >遊戲
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-4-1">
      <li class="nav-item">
    <a class="nav-link" href="/resources/games-toolkit">介紹</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/games/achievements-leaderboard">新增成就和排行榜</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/plugins/google-mobile-ads">新增廣告</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/games/firestore-multiplayer">新增多人遊戲支援</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="https://codelabs.developers.google.com/codelabs/flutter-in-app-purchases#0" target="_blank" rel="noopener">新增應用內購買</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="https://firebase.google.cn/codelabs/firebase-auth-in-flutter-apps#0" target="_blank" rel="noopener">新增使用者身份驗證</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="https://firebase.google.cn/docs/crashlytics/get-started?platform=flutter" target="_blank" rel="noopener">使用 Crashlytics 除錯</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#header-sidenav-4-2"
      href="#header-sidenav-4-2" role="button"
      aria-expanded="false" aria-controls="header-sidenav-4-2"
    >新聞
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-4-2">
      <li class="nav-item">
    <a class="nav-link" href="/resources/news-toolkit">建立新聞應用程式</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#header-sidenav-4-3"
      href="#header-sidenav-4-3" role="button"
      aria-expanded="false" aria-controls="header-sidenav-4-3"
    >盈利
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-4-3">
      <li class="nav-item">
    <a class="nav-link" href="https://flutter.dev/monetization" target="_blank" rel="noopener">介紹</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="https://codelabs.developers.google.com/codelabs/flutter-in-app-purchases#0" target="_blank" rel="noopener">新增應用內購買</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#header-sidenav-4-4"
      href="#header-sidenav-4-4" role="button"
      aria-expanded="false" aria-controls="header-sidenav-4-4"
    >地圖
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-4-4">
      <li class="nav-item">
    <a class="nav-link" href="https://developers.google.com/maps/flutter-package" target="_blank" rel="noopener">為應用程式新增地圖</a>
  </li>

</ul>
  </li>
</ul>
        </li><li aria-hidden="true"><div class="sidebar-primary-divider"></div></li>
    <li class="nav-header">使用者介面</li>
    <li class="nav-item">
          <a class=" nav-link" href="/ui">介紹</a>
        </li>
      <li class="nav-item">
          <a class=" nav-link" href="/ui/widgets">Widget 目錄</a>
        </li>
      <li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#header-sidenav-9" role="button"
             aria-expanded="false" aria-controls="header-sidenav-9"
          >佈局建立</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-9">
            <li class="nav-item">
    <a class="nav-link" href="/ui/layout">介紹</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/layout/tutorial">佈局建立教程</a>
  </li>

<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#header-sidenav-9-3"
      href="/ui/layout/lists" role="button"
      aria-expanded="false" aria-controls="header-sidenav-9-3"
    >清單 & 網格
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-9-3">
      <li class="nav-item">
    <a class="nav-link" href="/cookbook/lists/basic-list">建立與使用清單</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/lists/horizontal-list">建立一個橫向清單</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/lists/grid-lists">建立一個網格檢視</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/lists/mixed-list">建立包含不同型別元素的清單</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/lists/spaced-items">建立元素之間包含間隔的清單</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/lists/long-lists">處理長清單</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#header-sidenav-9-4"
      href="/ui/layout/scrolling" role="button"
      aria-expanded="false" aria-controls="header-sidenav-9-4"
    >捲動
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-9-4">
      <li class="nav-item">
    <a class="nav-link" href="/ui/layout/scrolling">概覽</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/layout/scrolling/slivers">使用 Slivers 實現各種捲動需求</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/lists/floating-app-bar">在清單開頭新增一個浮動的頂欄</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/effects/parallax-scrolling">建立一個平行錯位捲動的效果</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#header-sidenav-9-5"
      href="/ui/layout/responsive" role="button"
      aria-expanded="false" aria-controls="header-sidenav-9-5"
    >回應式設計
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-9-5">
      <li class="nav-item">
    <a class="nav-link" href="/ui/layout/responsive/adaptive-responsive">建立回應式和自適應的應用</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/layout/responsive/building-adaptive-apps">建立自適應應用</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/design/orientation">根據旋轉角度更新應用的介面元素</a>
  </li>

</ul>
  </li>
</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#header-sidenav-10" role="button"
             aria-expanded="false" aria-controls="header-sidenav-10"
          >設計 & 主題</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-10">
            <li class="nav-item">
    <a class="nav-link" href="/cookbook/design/themes">共享主題樣式</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/design/material">Material 設計</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/release/breaking-changes/material-3-migration">遷移至 Material 3</a>
  </li>

<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#header-sidenav-10-4"
      href="/ui/design/text" role="button"
      aria-expanded="false" aria-controls="header-sidenav-10-4"
    >文字
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-10-4">
      <li class="nav-item">
    <a class="nav-link" href="/ui/design/text/typography">字型 & 版式</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/design/fonts">使用自定義字型</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/design/package-fonts">將字型從 package 中對外暴露</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="https://pub.dev/packages/google_fonts" target="_blank" rel="noopener">Google 字型 package</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#header-sidenav-10-5"
      href="/ui/design/graphics" role="button"
      aria-expanded="false" aria-controls="header-sidenav-10-5"
    >自定義圖形
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-10-5">
      <li class="nav-item">
    <a class="nav-link" href="/ui/design/graphics/fragment-shaders">使用自定義的著色器</a>
  </li>

</ul>
  </li>
</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#header-sidenav-11" role="button"
             aria-expanded="false" aria-controls="header-sidenav-11"
          >互動</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-11">
            <li class="nav-item">
    <a class="nav-link" href="/ui/interactivity">為你的應用新增互動</a>
  </li>

<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#header-sidenav-11-2"
      href="/ui/interactivity/gestures" role="button"
      aria-expanded="false" aria-controls="header-sidenav-11-2"
    >手勢
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-11-2">
      <li class="nav-item">
    <a class="nav-link" href="/ui/interactivity/gestures">介紹</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/gestures/handling-taps">處理點選</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/interactivity/gestures/drag-outside">跨應用拖放物件</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/effects/drag-a-widget">拖動介面元素</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/gestures/ripples">新增 Material 風格的水波紋</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/gestures/dismissible">實現滑動取消</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#header-sidenav-11-3"
      href="/ui/interactivity/input" role="button"
      aria-expanded="false" aria-controls="header-sidenav-11-3"
    >輸入 & 表單
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-11-3">
      <li class="nav-item">
    <a class="nav-link" href="/cookbook/forms/text-input">建立輸入框並且調整樣式</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/forms/retrieve-input">讀取輸入框的內容</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/forms/text-field-changes">處理輸入框的內容變動</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/forms/focus">管理輸入框之間的焦點</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/forms/validation">建立具有校驗功能的表單</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link" href="/cookbook/design/snackbars">展示 SnackBar</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/interactivity/actions-and-shortcuts">實現快捷方式和捷徑</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/interactivity/focus">管理鍵盤焦點</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#header-sidenav-12" role="button"
             aria-expanded="false" aria-controls="header-sidenav-12"
          >資源 & 媒體</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-12">
            <li class="nav-item">
    <a class="nav-link" href="/ui/assets/assets-and-images">新增資源和圖片</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/images/network-image">載入網路圖片</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/images/fading-in-images">從佔位圖轉場到圖片</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/plugins/play-video">播放及暫停影片</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#header-sidenav-13" role="button"
             aria-expanded="false" aria-controls="header-sidenav-13"
          >導向 & 路由</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-13">
            <li class="nav-item">
    <a class="nav-link" href="/ui/navigation">概覽</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/design/tabs">新增 Tab 到應用中</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/navigation/navigation-basics">導向至新頁面並回傳</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/navigation/passing-data">傳遞資料到新頁面</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/navigation/returning-data">從新頁面回傳資料</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/design/drawer">在頁面上新增抽屜</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/navigation/deep-linking">設定 Deeplink</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/navigation/set-up-app-links">設定 Android Deeplink</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/navigation/set-up-universal-links">設定 iOS Universal Link</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/navigation/url-strategies">設定 Web 的 URL 策略</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#header-sidenav-14" role="button"
             aria-expanded="false" aria-controls="header-sidenav-14"
          >動畫 & 轉場</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-14">
            <li class="nav-item">
    <a class="nav-link" href="/ui/animations">概覽</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/animations/tutorial">教程</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/animations/implicit-animations">隱式動畫</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/animation/animated-container">轉場 Container 的屬性</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/animation/opacity-animation">漸入漸出 widget</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/animations/hero-animations">Hero（跨頁面共享元素）動畫</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/animation/page-route-animation">頁面轉場動畫</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/animation/physics-simulation">模擬物理屬性動畫</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/animations/staggered-animations">交錯動畫</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/effects/staggered-menu-animation">建立選單的交錯動畫</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/animations/overview">API 概覽</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#header-sidenav-15" role="button"
             aria-expanded="false" aria-controls="header-sidenav-15"
          >無障礙 & 國際化</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-15">
            <li class="nav-item">
    <a class="nav-link" href="/ui/accessibility-and-internationalization/accessibility">無障礙</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/accessibility-and-internationalization/internationalization">國際化</a>
  </li>


</ul>
        </li><li aria-hidden="true"><div class="sidebar-primary-divider"></div></li>
    <li class="nav-header">介面以外的開發</li>
    <li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#header-sidenav-18" role="button"
             aria-expanded="false" aria-controls="header-sidenav-18"
          >資料呼叫和後端</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-18">
            <li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#header-sidenav-18-1"
      href="/data-and-backend/state-mgmt" role="button"
      aria-expanded="false" aria-controls="header-sidenav-18-1"
    >狀態管理
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-18-1">
      <li class="nav-item">
    <a class="nav-link" href="/data-and-backend/state-mgmt/intro">介紹</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/data-and-backend/state-mgmt/declarative">從宣告式的角度思考</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/data-and-backend/state-mgmt/ephemeral-vs-app">短暫狀態 & 持久狀態</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/data-and-backend/state-mgmt/simple">簡單的狀態管理</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/data-and-backend/state-mgmt/options">狀態管理參考</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#header-sidenav-18-2"
      href="/data-and-backend/networking" role="button"
      aria-expanded="false" aria-controls="header-sidenav-18-2"
    >網路 & http
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-18-2">
      <li class="nav-item">
    <a class="nav-link" href="/data-and-backend/networking">概覽</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/networking/fetch-data">從網路上獲取資料</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/networking/authenticated-requests">建立需要認證的請求</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/networking/send-data">傳送資料到伺服器</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/networking/update-data">更新網路上的資料</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/networking/delete-data">刪除網路上的資料</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/networking/web-sockets">WebSocket 通訊</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#header-sidenav-18-3"
      href="/data-and-backend/serialization" role="button"
      aria-expanded="false" aria-controls="header-sidenav-18-3"
    >序列化
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-18-3">
      <li class="nav-item">
    <a class="nav-link" href="/data-and-backend/serialization/json">JSON 序列化</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/networking/background-parsing">在後台處理 JSON 解析</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#header-sidenav-18-4"
      href="/data-and-backend/persistence" role="button"
      aria-expanded="false" aria-controls="header-sidenav-18-4"
    >持久化
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-18-4">
      <li class="nav-item">
    <a class="nav-link" href="/cookbook/persistence/key-value">將 key-value 資料儲存在硬碟上</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/persistence/reading-writing-files">讀寫檔案</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/persistence/sqlite">利用 SQLite 持久化資料</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link" href="/data-and-backend/firebase">Firebase</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/data-and-backend/google-apis">Google APIs</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#header-sidenav-19" role="button"
             aria-expanded="false" aria-controls="header-sidenav-19"
          >平台整合</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-19">
            <li class="nav-item">
    <a class="nav-link" href="/reference/supported-platforms">支援的平台</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/desktop">建立桌面端應用</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/platform-channels">撰寫平台程式碼 (外掛編寫實現)</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/platform-adaptations">自動化平台適配</a>
  </li>

<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#header-sidenav-19-5"
      href="/platform-integration/android" role="button"
      aria-expanded="false" aria-controls="header-sidenav-19-5"
    >Android 平台
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-19-5">
      <li class="nav-item">
    <a class="nav-link" href="/platform-integration/android/splash-screen">新增螢幕閃爍頁</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/android/c-interop">呼叫原生程式碼</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/android/platform-views">託管 Android 原生檢視</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/android/restore-state-android">在 Android 上恢復狀態</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/android/chromeos">建立適合 Chrome OS 的 Android 應用</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#header-sidenav-19-6"
      href="/platform-integration/ios" role="button"
      aria-expanded="false" aria-controls="header-sidenav-19-6"
    >iOS 平台
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-19-6">
      <li class="nav-item">
    <a class="nav-link" href="/platform-integration/ios/apple-frameworks">使用 Apple 的系統函式庫</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/ios/launch-screen">新增啟動頁</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/ios/ios-app-clip">新增 iOS App Clip 支援</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/ios/app-extensions">新增 iOS App 擴充套件</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/ios/c-interop">呼叫原生程式碼</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/ios/platform-views">託管 iOS 原生檢視</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/ios/ios-debugging">iOS 平台除錯</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/ios/restore-state-ios">在 iOS 上恢復狀態</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#header-sidenav-19-7"
      href="/platform-integration/linux" role="button"
      aria-expanded="false" aria-controls="header-sidenav-19-7"
    >Linux 作業系統平台
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-19-7">
      <li class="nav-item">
    <a class="nav-link" href="/platform-integration/linux/building">建立 Linux 桌面軟體</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#header-sidenav-19-8"
      href="/platform-integration/macos" role="button"
      aria-expanded="false" aria-controls="header-sidenav-19-8"
    >macOS 作業系統平台
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-19-8">
      <li class="nav-item">
    <a class="nav-link" href="/platform-integration/macos/building">建立 macOS 應用</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/macos/c-interop">C 語言程式碼整合及呼叫</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#header-sidenav-19-9"
      href="/platform-integration/web" role="button"
      aria-expanded="false" aria-controls="header-sidenav-19-9"
    >Web 平台
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-19-9">
      <li class="nav-item">
    <a class="nav-link" href="/platform-integration/web/building">建立一個 Web 應用</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/web/faq">Web 平台常見問題</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/web/renderers">Web 平台渲染器</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/web/initialization">自定義 Web 應用初始化</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/web/web-images">在網頁裡顯示圖片</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#header-sidenav-19-10"
      href="/platform-integration/windows" role="button"
      aria-expanded="false" aria-controls="header-sidenav-19-10"
    >Windows 作業系統平台
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-19-10">
      <li class="nav-item">
    <a class="nav-link" href="/platform-integration/windows/building">建立 Windows 桌面軟體</a>
  </li>

</ul>
  </li>
</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#header-sidenav-20" role="button"
             aria-expanded="false" aria-controls="header-sidenav-20"
          >Package 和外掛</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-20">
            <li class="nav-item">
    <a class="nav-link" href="/packages-and-plugins/using-packages">使用 package 和外掛</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/packages-and-plugins/developing-packages">開發 Package 和外掛</a>
  </li>

<div class="dropdown-divider"></div>
<li class="nav-item">
    <a class="nav-link" href="/packages-and-plugins/favorites">Flutter Favorites 專案</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="https://pub.dev/flutter" target="_blank" rel="noopener">Package 倉庫</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#header-sidenav-21" role="button"
             aria-expanded="false" aria-controls="header-sidenav-21"
          >測試和除錯</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-21">
            <li class="nav-header">測試</li><li class="nav-item">
    <a class="nav-link" href="/testing/overview">概覽</a>
  </li>

<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#header-sidenav-21-3"
      href="#header-sidenav-21-3" role="button"
      aria-expanded="false" aria-controls="header-sidenav-21-3"
    >單元測試
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-21-3">
      <li class="nav-item">
    <a class="nav-link" href="/cookbook/testing/unit/introduction">介紹</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/testing/unit/mocking">模擬依賴</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#header-sidenav-21-4"
      href="#header-sidenav-21-4" role="button"
      aria-expanded="false" aria-controls="header-sidenav-21-4"
    >Widget 測試
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-21-4">
      <li class="nav-item">
    <a class="nav-link" href="/cookbook/testing/widget/introduction">介紹</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/testing/widget/finders">尋找 widgets</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/testing/widget/scrolling">模擬捲動</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/testing/widget/tap-drag">模擬使用者操作</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#header-sidenav-21-5"
      href="#header-sidenav-21-5" role="button"
      aria-expanded="false" aria-controls="header-sidenav-21-5"
    >整合測試
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-21-5">
      <li class="nav-item">
    <a class="nav-link" href="/cookbook/testing/integration/introduction">介紹</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/testing/integration-tests">編寫並執行整合測試</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/testing/integration/profiling">衡量整合測試的效能指標</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link" href="/testing/testing-plugins">測試外掛</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/testing/plugins-in-tests">在測試中處理外掛程式碼</a>
  </li>

<li class="nav-header">除錯</li><li class="nav-item">
    <a class="nav-link" href="/testing/debugging">除錯工具</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/testing/code-debugging">透過程式碼除錯應用</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/testing/native-debugging">使用原生語言的除錯</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/testing/build-modes">Flutter 的建立模式</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/testing/common-errors">常見的 Flutter 錯誤</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/testing/errors">處理錯誤</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/maintenance/error-reporting">將錯誤上報到收集服務</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#header-sidenav-22" role="button"
             aria-expanded="false" aria-controls="header-sidenav-22"
          >效能最佳化</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-22">
            <li class="nav-item">
    <a class="nav-link" href="/perf">概覽</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/perf/impeller">使用 Impeller</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/perf/best-practices">效能最佳實踐</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/perf/app-size">應用大小</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/perf/deferred-components">延遲載入元件</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/perf/rendering-performance">渲染效能</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/perf/ui-performance">效能分析</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/perf/web-performance">Web 效能分析</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/perf/shader">著色器編譯時卡頓</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/perf/metrics">效能指標</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/perf/isolates">併發與隔離</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/perf/faq">效能常見問題和回答</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/perf/appendix">附錄</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#header-sidenav-23" role="button"
             aria-expanded="false" aria-controls="header-sidenav-23"
          >打包部署</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-23">
            <li class="nav-item">
    <a class="nav-link" href="/deployment/obfuscate">混淆 Dart 程式碼</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/deployment/flavors">設定 flavors</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/deployment/android">建立和發布為 Android 應用</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/deployment/ios">建立和發布為 iOS 應用</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/deployment/macos">建立和發布為 macOS 應用</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/deployment/linux">建立和發布為 Linux 應用</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/deployment/windows">建立和發布為 Windows 應用</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/deployment/web">建立和發布為 Web 應用</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/deployment/cd">持續部署</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#header-sidenav-24" role="button"
             aria-expanded="false" aria-controls="header-sidenav-24"
          >將 Flutter 新增到現有應用</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-24">
            <li class="nav-item">
    <a class="nav-link" href="/add-to-app">介紹</a>
  </li>

<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#header-sidenav-24-2"
      href="/add-to-app/android" role="button"
      aria-expanded="false" aria-controls="header-sidenav-24-2"
    >將 Flutter 新增到現有 Android 應用
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-24-2">
      <li class="nav-item">
    <a class="nav-link" href="/add-to-app/android/project-setup">工程設定</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/add-to-app/android/add-flutter-screen">新增單個 Flutter 頁面</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/add-to-app/android/add-flutter-fragment">新增一個 Flutter Fragment</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/add-to-app/android/add-flutter-view">新增 Flutter 檢視</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/add-to-app/android/plugin-setup">Plugin 初始化</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#header-sidenav-24-3"
      href="/add-to-app/ios" role="button"
      aria-expanded="false" aria-controls="header-sidenav-24-3"
    >將 Flutter 新增到現有 iOS 應用
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-24-3">
      <li class="nav-item">
    <a class="nav-link" href="/add-to-app/ios/project-setup">工程設定</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/add-to-app/ios/add-flutter-screen">新增單個 Flutter 頁面</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link" href="/add-to-app/debugging">除錯及熱過載</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/add-to-app/multiple-flutters">多個 Flutter 實例</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/add-to-app/performance">載入順序和效能</a>
  </li>


</ul>
        </li><li aria-hidden="true"><div class="sidebar-primary-divider"></div></li>
    <li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#header-sidenav-26" role="button"
             aria-expanded="false" aria-controls="header-sidenav-26"
          >工具 & 程式碼編輯器</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-26">
            <li class="nav-item">
    <a class="nav-link" href="/tools/android-studio">Android Studio & IntelliJ</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/vs-code">Visual Studio Code</a>
  </li>

<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#header-sidenav-26-3"
      href="/tools/devtools" role="button"
      aria-expanded="false" aria-controls="header-sidenav-26-3"
    >DevTools
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-26-3">
      <li class="nav-item">
    <a class="nav-link" href="/tools/devtools/overview">概覽</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/android-studio">在 Android Studio & IntelliJ 中安裝 DevTools</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/vscode">在 VS Code 中安裝 DevTools</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/cli">利用終端指令安裝 DevTools</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/inspector">Flutter inspector</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/performance">效能檢視</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/cpu-profiler">CPU 效能檢視</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/memory">記憶體檢視</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/console">除錯控制條檢視</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/network">網路檢視</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/debugger">除錯工具 Debugger</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/logging">日誌檢視</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/app-size">應用體積工具</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/extensions">DevTools 擴充套件工具</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/release-notes">發布日誌</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link" href="/tools/sdk">SDK 概覽</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/pubspec">Flutter pubspec 選項</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/flutter-fix">自動修復</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/formatting">程式碼格式化</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#header-sidenav-27" role="button"
             aria-expanded="false" aria-controls="header-sidenav-27"
          >Flutter 相關概念</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-27">
            <li class="nav-item">
    <a class="nav-link" href="/resources/architectural-overview">Flutter 架構概覽</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/resources/inside-flutter">Flutter 工作原理</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/layout/constraints">理解佈局約束</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/testing/build-modes">Flutter 建立模式</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/hot-reload">熱過載</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#header-sidenav-28" role="button"
             aria-expanded="false" aria-controls="header-sidenav-28"
          >開發者資源清單</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-28">
            <li class="nav-header">學習</li><li class="nav-item">
    <a class="nav-link" href="/resources/faq">常見問題解答</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/resources/books">相關書籍</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/resources/videos">相關影片</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/resources/courses">相關課程</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/resources/bootstrap-into-dart">學習 Dart</a>
  </li>

<li class="nav-header">貢獻</li><li class="nav-item">
    <a class="nav-link" href="/resources/bug-reports">提出 Bug</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="https://github.com/flutter/flutter/blob/master/CONTRIBUTING.md" target="_blank" rel="noopener">為 Flutter 做出貢獻</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="https://github.com/flutter/flutter/issues?q=is%3Aopen+is%3Aissue+label%3A%22design+doc%22" target="_blank" rel="noopener">設計文件</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link  collapsable" data-toggle="collapse" href="#header-sidenav-29" role="button"
             aria-expanded="true" aria-controls="header-sidenav-29"
          >更多資料</a>
      
          <ul class="nav flex-column flex-nowrap collapse show" id="header-sidenav-29">
            <li class="nav-item">
    <a class="nav-link" href="/dash">瞭解 Dash</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/reference/widgets">Flutter Widget 清單</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="https://api.flutter.dev" target="_blank" rel="noopener">Flutter API 文件</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/reference/flutter-cli">Flutter 指令行文件</a>
  </li>


</ul>
        </li></ul>

          </div>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" id="platform-navbar-dropdown"
               href="https://flutter.cn/multi-platform"
               role="button" data-toggle="dropdown"
               aria-haspopup="true" aria-expanded="false">
               多平臺
            </a>
            <div class="dropdown-menu" aria-labelledby="platform-navbar-dropdown">
              <a class="dropdown-item" href="https://flutter.cn/multi-platform/mobile">行動平台</a>
              <a class="dropdown-item" href="https://flutter.cn/multi-platform/web">Web 平台</a>
              <a class="dropdown-item" href="https://flutter.cn/multi-platform/desktop">桌面平台</a>
              <a class="dropdown-item" href="https://flutter.cn/multi-platform/embedded">嵌入式平台</a>
            </div>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" id="dev-navbar-dropdown"
               href="https://flutter.cn/"
               role="button" data-toggle="dropdown"
               aria-haspopup="true" aria-expanded="false">
               開發
            </a>
            <div class="dropdown-menu" aria-labelledby="dev-navbar-dropdown">
              <a class="dropdown-item" href="https://flutter.cn/learn">學習資源</a>
              <a class="dropdown-item" href="https://pub.dev/flutter/favorites" target="_blank">Flutter Favorites 系列外掛</a>
              <a class="dropdown-item" href="https://pub.dev/" target="_blank">使用 Packages</a>
              <a class="dropdown-item" href="https://flutter.cn/monetization">盈利</a>
              <a class="dropdown-item" href="https://flutter.cn/games">遊戲</a>
              <a class="dropdown-item" href="https://flutter.cn/news">新聞</a>
            </div>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" id="ecosystem-navbar-dropdown"
               href="https://flutter.cn/ecosystem"
               role="button" data-toggle="dropdown"
               aria-haspopup="true" aria-expanded="false">
               生態
            </a>
            <div class="dropdown-menu" aria-labelledby="ecosystem-navbar-dropdown">
              <a class="dropdown-item" href="https://flutter.cn/community">社群</a>
              <!-- <a class="dropdown-item" href="https://flutter.cn/events">Events</a> -->
              <a class="dropdown-item" href="https://flutter.cn/culture">文化</a>
            </div>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="https://flutter.cn/showcase">成功故事</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="https://flutter.cn/about">關於中文文件</a>
          </li>
          <li class="nav-item dropdown docs-item">
            <a class="nav-link dropdown-toggle"
               id="docs-navbar-dropdown"
               href="/"
               role="button" data-toggle="dropdown"
               aria-haspopup="true" aria-expanded="false">
               文件
            </a>
            <div class="dropdown-menu" aria-labelledby="docs-navbar-dropdown">
              <a class="dropdown-item "
                 href="/posts">最新更新</a>
              <a class="dropdown-item "
                 href="/get-started/editor">IDE 整合</a>
              <a class="dropdown-item "
                 href="/tools/hot-reload">熱過載</a>
              <a class="dropdown-item "
                 href="/perf/ui-performance">效能分析</a>
              <a class="dropdown-item "
                 href="/get-started/install">安裝 Flutter</a>
              <a class="dropdown-item "
                 href="/tools/devtools/overview">開發者工具</a>
              <a class="dropdown-item "
                 href="/cookbook">實用教程</a>
              <a class="dropdown-item "
                 href="/codelabs">Codelabs</a>
              <a class="dropdown-item "
                 href="/community/tutorials">社群教程</a>
            </div>
          </li>
        </ul>
        <form action="/search/" class="site-header__search form-inline">
          <input
            class="site-header__searchfield form-control"
            type="search" name="q" id="q" autocomplete="off"
            placeholder="Search" aria-label="Search">
        </form>
      </div>
    </div>
    <div class="site-header__social navbar-nav flex-row">
      <a
        class="nav-item nav-link nav-icon"
        href="https://twitter.com/FlutterDev"
        aria-label="Open Flutter's Twitter in a new tab"
        target="_blank" rel="noreferrer">
        <svg><use href="/assets/images/social/twitter.svg#twitter"></use></svg>
      </a>
      <a
        class="nav-item nav-link nav-icon"
        href="https://www.youtube.com/flutterdev"
        aria-label="Open Flutter's YouTube in a new tab"
        target="_blank" rel="noreferrer">
        <svg><use href="/assets/images/social/youtube.svg#youtube"></use></svg>
      </a>
      <a
        class="nav-item nav-link nav-icon"
        href="https://medium.com/flutter"
        aria-label="Open Flutter's Medium blog in a new tab"
        target="_blank" rel="noreferrer">
        <svg><use href="/assets/images/social/medium.svg#medium"></use></svg>
      </a>
      <a
        class="nav-item nav-link nav-icon"
        href="https://github.com/flutter"
        aria-label="Open Flutter's GitHub in a new tab"
        target="_blank" rel="noreferrer">
        <svg><use href="/assets/images/social/github.svg#github"></use></svg>
      </a>
    </div>
    <a
        class="site-header__cta btn btn-primary"
        href="/get-started/install/">開始使用
      </a>
    </nav>
</header>


    <div class="site-banner site-banner--default" role="alert">
  Flutter 3.19 已發布！
  <!-- <p>Flutter and Dart」s latest releases are helping to
  define the future of app development.
  <a href="https://medium.com/flutter/starting-2024-strong-with-flutter-and-dart-cae9845264fe">Read the blog</a> to learn more.
  </p>
  <p>Help improve Flutter! Take our <a href="https://google.qualtrics.com/jfe/form/SV_6gplhwAySeRz7Gm?Source=Website">survey</a>.</p> -->
</div>


    <div class="container-fluid position-relative">
  <div class="row flex-xl-nowrap">
    <div class="fixed-col site-sidebar site-sidebar--fixed col-12 col-md-3 col-xl-2 d-none d-md-block" data-fixed-column>
      
      <ul class="nav flex-column"><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#fixed-sidenav-1" role="button"
             aria-expanded="false" aria-controls="fixed-sidenav-1"
          >開始使用 Flutter</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-1">
            <li class="nav-item">
    <a class="nav-link" href="/get-started/install">安裝和環境設定</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/get-started/test-drive">開發體驗初探</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/get-started/codelab">編寫第一個 Flutter 應用</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/get-started/learn-more">瞭解更多</a>
  </li>

<div class="dropdown-divider"></div>
<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#fixed-sidenav-1-6"
      href="#fixed-sidenav-1-6" role="button"
      aria-expanded="false" aria-controls="fixed-sidenav-1-6"
    >擁有其他平台開發經驗？
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-1-6">
      <li class="nav-item">
    <a class="nav-link" href="/get-started/flutter-for/android-devs">給 Android 開發者的 Flutter 指南</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/get-started/flutter-for/swiftui-devs">給 iOS SwiftUI 開發者的 Flutter 指南</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/get-started/flutter-for/uikit-devs">給 iOS UIKit 開發者的 Flutter 指南</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/get-started/flutter-for/react-native-devs">給 React Native 開發者的 Flutter 指南</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/get-started/flutter-for/web-devs">給 Web 開發者的 Flutter 指南</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/get-started/flutter-for/xamarin-forms-devs">給 Xamarin.Forms 開發者的 Flutter 指南</a>
  </li>

<div class="dropdown-divider"></div><li class="nav-item">
    <a class="nav-link" href="/get-started/flutter-for/declarative">宣告式 UI 介紹</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/get-started/flutter-for/dart-swift-concurrency">Flutter 對比 Swift 的併發</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link" href="https://dart.tw.gh.miniasp.com/overview" target="_blank" rel="noopener">Dart 語言概覽</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#fixed-sidenav-2" role="button"
             aria-expanded="false" aria-controls="fixed-sidenav-2"
          >保持版本更新</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-2">
            <li class="nav-item">
    <a class="nav-link" href="/release/upgrade">版本升級</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/release/archive">SDK 版本清單</a>
  </li>

<div class="dropdown-divider"></div>
<li class="nav-item">
    <a class="nav-link" href="/release/whats-new">最近更新</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/release/release-notes">版本發行注記</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/release/breaking-changes">破壞性改動</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/release/compatibility-policy">相容性策略</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#fixed-sidenav-3" role="button"
             aria-expanded="false" aria-controls="fixed-sidenav-3"
          >教程和範例程式碼</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-3">
            <li class="nav-item">
    <a class="nav-link" href="/codelabs">Codelabs</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook">實用教程 (Cookbook)</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="https://flutter.github.io/samples/" target="_blank" rel="noopener">GitHub 上的範例應用</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#fixed-sidenav-4" role="button"
             aria-expanded="false" aria-controls="fixed-sidenav-4"
          >應用解決方案</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-4">
            <li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#fixed-sidenav-4-1"
      href="#fixed-sidenav-4-1" role="button"
      aria-expanded="false" aria-controls="fixed-sidenav-4-1"
    >遊戲
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-4-1">
      <li class="nav-item">
    <a class="nav-link" href="/resources/games-toolkit">介紹</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/games/achievements-leaderboard">新增成就和排行榜</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/plugins/google-mobile-ads">新增廣告</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/games/firestore-multiplayer">新增多人遊戲支援</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="https://codelabs.developers.google.com/codelabs/flutter-in-app-purchases#0" target="_blank" rel="noopener">新增應用內購買</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="https://firebase.google.cn/codelabs/firebase-auth-in-flutter-apps#0" target="_blank" rel="noopener">新增使用者身份驗證</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="https://firebase.google.cn/docs/crashlytics/get-started?platform=flutter" target="_blank" rel="noopener">使用 Crashlytics 除錯</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#fixed-sidenav-4-2"
      href="#fixed-sidenav-4-2" role="button"
      aria-expanded="false" aria-controls="fixed-sidenav-4-2"
    >新聞
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-4-2">
      <li class="nav-item">
    <a class="nav-link" href="/resources/news-toolkit">建立新聞應用程式</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#fixed-sidenav-4-3"
      href="#fixed-sidenav-4-3" role="button"
      aria-expanded="false" aria-controls="fixed-sidenav-4-3"
    >盈利
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-4-3">
      <li class="nav-item">
    <a class="nav-link" href="https://flutter.dev/monetization" target="_blank" rel="noopener">介紹</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="https://codelabs.developers.google.com/codelabs/flutter-in-app-purchases#0" target="_blank" rel="noopener">新增應用內購買</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#fixed-sidenav-4-4"
      href="#fixed-sidenav-4-4" role="button"
      aria-expanded="false" aria-controls="fixed-sidenav-4-4"
    >地圖
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-4-4">
      <li class="nav-item">
    <a class="nav-link" href="https://developers.google.com/maps/flutter-package" target="_blank" rel="noopener">為應用程式新增地圖</a>
  </li>

</ul>
  </li>
</ul>
        </li><li aria-hidden="true"><div class="sidebar-primary-divider"></div></li>
    <li class="nav-header">使用者介面</li>
    <li class="nav-item">
          <a class=" nav-link" href="/ui">介紹</a>
        </li>
      <li class="nav-item">
          <a class=" nav-link" href="/ui/widgets">Widget 目錄</a>
        </li>
      <li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#fixed-sidenav-9" role="button"
             aria-expanded="false" aria-controls="fixed-sidenav-9"
          >佈局建立</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-9">
            <li class="nav-item">
    <a class="nav-link" href="/ui/layout">介紹</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/layout/tutorial">佈局建立教程</a>
  </li>

<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#fixed-sidenav-9-3"
      href="/ui/layout/lists" role="button"
      aria-expanded="false" aria-controls="fixed-sidenav-9-3"
    >清單 & 網格
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-9-3">
      <li class="nav-item">
    <a class="nav-link" href="/cookbook/lists/basic-list">建立與使用清單</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/lists/horizontal-list">建立一個橫向清單</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/lists/grid-lists">建立一個網格檢視</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/lists/mixed-list">建立包含不同型別元素的清單</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/lists/spaced-items">建立元素之間包含間隔的清單</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/lists/long-lists">處理長清單</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#fixed-sidenav-9-4"
      href="/ui/layout/scrolling" role="button"
      aria-expanded="false" aria-controls="fixed-sidenav-9-4"
    >捲動
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-9-4">
      <li class="nav-item">
    <a class="nav-link" href="/ui/layout/scrolling">概覽</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/layout/scrolling/slivers">使用 Slivers 實現各種捲動需求</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/lists/floating-app-bar">在清單開頭新增一個浮動的頂欄</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/effects/parallax-scrolling">建立一個平行錯位捲動的效果</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#fixed-sidenav-9-5"
      href="/ui/layout/responsive" role="button"
      aria-expanded="false" aria-controls="fixed-sidenav-9-5"
    >回應式設計
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-9-5">
      <li class="nav-item">
    <a class="nav-link" href="/ui/layout/responsive/adaptive-responsive">建立回應式和自適應的應用</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/layout/responsive/building-adaptive-apps">建立自適應應用</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/design/orientation">根據旋轉角度更新應用的介面元素</a>
  </li>

</ul>
  </li>
</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#fixed-sidenav-10" role="button"
             aria-expanded="false" aria-controls="fixed-sidenav-10"
          >設計 & 主題</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-10">
            <li class="nav-item">
    <a class="nav-link" href="/cookbook/design/themes">共享主題樣式</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/design/material">Material 設計</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/release/breaking-changes/material-3-migration">遷移至 Material 3</a>
  </li>

<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#fixed-sidenav-10-4"
      href="/ui/design/text" role="button"
      aria-expanded="false" aria-controls="fixed-sidenav-10-4"
    >文字
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-10-4">
      <li class="nav-item">
    <a class="nav-link" href="/ui/design/text/typography">字型 & 版式</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/design/fonts">使用自定義字型</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/design/package-fonts">將字型從 package 中對外暴露</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="https://pub.dev/packages/google_fonts" target="_blank" rel="noopener">Google 字型 package</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#fixed-sidenav-10-5"
      href="/ui/design/graphics" role="button"
      aria-expanded="false" aria-controls="fixed-sidenav-10-5"
    >自定義圖形
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-10-5">
      <li class="nav-item">
    <a class="nav-link" href="/ui/design/graphics/fragment-shaders">使用自定義的著色器</a>
  </li>

</ul>
  </li>
</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#fixed-sidenav-11" role="button"
             aria-expanded="false" aria-controls="fixed-sidenav-11"
          >互動</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-11">
            <li class="nav-item">
    <a class="nav-link" href="/ui/interactivity">為你的應用新增互動</a>
  </li>

<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#fixed-sidenav-11-2"
      href="/ui/interactivity/gestures" role="button"
      aria-expanded="false" aria-controls="fixed-sidenav-11-2"
    >手勢
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-11-2">
      <li class="nav-item">
    <a class="nav-link" href="/ui/interactivity/gestures">介紹</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/gestures/handling-taps">處理點選</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/interactivity/gestures/drag-outside">跨應用拖放物件</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/effects/drag-a-widget">拖動介面元素</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/gestures/ripples">新增 Material 風格的水波紋</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/gestures/dismissible">實現滑動取消</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#fixed-sidenav-11-3"
      href="/ui/interactivity/input" role="button"
      aria-expanded="false" aria-controls="fixed-sidenav-11-3"
    >輸入 & 表單
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-11-3">
      <li class="nav-item">
    <a class="nav-link" href="/cookbook/forms/text-input">建立輸入框並且調整樣式</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/forms/retrieve-input">讀取輸入框的內容</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/forms/text-field-changes">處理輸入框的內容變動</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/forms/focus">管理輸入框之間的焦點</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/forms/validation">建立具有校驗功能的表單</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link" href="/cookbook/design/snackbars">展示 SnackBar</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/interactivity/actions-and-shortcuts">實現快捷方式和捷徑</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/interactivity/focus">管理鍵盤焦點</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#fixed-sidenav-12" role="button"
             aria-expanded="false" aria-controls="fixed-sidenav-12"
          >資源 & 媒體</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-12">
            <li class="nav-item">
    <a class="nav-link" href="/ui/assets/assets-and-images">新增資源和圖片</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/images/network-image">載入網路圖片</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/images/fading-in-images">從佔位圖轉場到圖片</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/plugins/play-video">播放及暫停影片</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#fixed-sidenav-13" role="button"
             aria-expanded="false" aria-controls="fixed-sidenav-13"
          >導向 & 路由</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-13">
            <li class="nav-item">
    <a class="nav-link" href="/ui/navigation">概覽</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/design/tabs">新增 Tab 到應用中</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/navigation/navigation-basics">導向至新頁面並回傳</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/navigation/passing-data">傳遞資料到新頁面</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/navigation/returning-data">從新頁面回傳資料</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/design/drawer">在頁面上新增抽屜</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/navigation/deep-linking">設定 Deeplink</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/navigation/set-up-app-links">設定 Android Deeplink</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/navigation/set-up-universal-links">設定 iOS Universal Link</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/navigation/url-strategies">設定 Web 的 URL 策略</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#fixed-sidenav-14" role="button"
             aria-expanded="false" aria-controls="fixed-sidenav-14"
          >動畫 & 轉場</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-14">
            <li class="nav-item">
    <a class="nav-link" href="/ui/animations">概覽</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/animations/tutorial">教程</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/animations/implicit-animations">隱式動畫</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/animation/animated-container">轉場 Container 的屬性</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/animation/opacity-animation">漸入漸出 widget</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/animations/hero-animations">Hero（跨頁面共享元素）動畫</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/animation/page-route-animation">頁面轉場動畫</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/animation/physics-simulation">模擬物理屬性動畫</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/animations/staggered-animations">交錯動畫</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/effects/staggered-menu-animation">建立選單的交錯動畫</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/animations/overview">API 概覽</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#fixed-sidenav-15" role="button"
             aria-expanded="false" aria-controls="fixed-sidenav-15"
          >無障礙 & 國際化</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-15">
            <li class="nav-item">
    <a class="nav-link" href="/ui/accessibility-and-internationalization/accessibility">無障礙</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/accessibility-and-internationalization/internationalization">國際化</a>
  </li>


</ul>
        </li><li aria-hidden="true"><div class="sidebar-primary-divider"></div></li>
    <li class="nav-header">介面以外的開發</li>
    <li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#fixed-sidenav-18" role="button"
             aria-expanded="false" aria-controls="fixed-sidenav-18"
          >資料呼叫和後端</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-18">
            <li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#fixed-sidenav-18-1"
      href="/data-and-backend/state-mgmt" role="button"
      aria-expanded="false" aria-controls="fixed-sidenav-18-1"
    >狀態管理
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-18-1">
      <li class="nav-item">
    <a class="nav-link" href="/data-and-backend/state-mgmt/intro">介紹</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/data-and-backend/state-mgmt/declarative">從宣告式的角度思考</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/data-and-backend/state-mgmt/ephemeral-vs-app">短暫狀態 & 持久狀態</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/data-and-backend/state-mgmt/simple">簡單的狀態管理</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/data-and-backend/state-mgmt/options">狀態管理參考</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#fixed-sidenav-18-2"
      href="/data-and-backend/networking" role="button"
      aria-expanded="false" aria-controls="fixed-sidenav-18-2"
    >網路 & http
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-18-2">
      <li class="nav-item">
    <a class="nav-link" href="/data-and-backend/networking">概覽</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/networking/fetch-data">從網路上獲取資料</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/networking/authenticated-requests">建立需要認證的請求</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/networking/send-data">傳送資料到伺服器</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/networking/update-data">更新網路上的資料</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/networking/delete-data">刪除網路上的資料</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/networking/web-sockets">WebSocket 通訊</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#fixed-sidenav-18-3"
      href="/data-and-backend/serialization" role="button"
      aria-expanded="false" aria-controls="fixed-sidenav-18-3"
    >序列化
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-18-3">
      <li class="nav-item">
    <a class="nav-link" href="/data-and-backend/serialization/json">JSON 序列化</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/networking/background-parsing">在後台處理 JSON 解析</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#fixed-sidenav-18-4"
      href="/data-and-backend/persistence" role="button"
      aria-expanded="false" aria-controls="fixed-sidenav-18-4"
    >持久化
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-18-4">
      <li class="nav-item">
    <a class="nav-link" href="/cookbook/persistence/key-value">將 key-value 資料儲存在硬碟上</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/persistence/reading-writing-files">讀寫檔案</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/persistence/sqlite">利用 SQLite 持久化資料</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link" href="/data-and-backend/firebase">Firebase</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/data-and-backend/google-apis">Google APIs</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#fixed-sidenav-19" role="button"
             aria-expanded="false" aria-controls="fixed-sidenav-19"
          >平台整合</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-19">
            <li class="nav-item">
    <a class="nav-link" href="/reference/supported-platforms">支援的平台</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/desktop">建立桌面端應用</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/platform-channels">撰寫平台程式碼 (外掛編寫實現)</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/platform-adaptations">自動化平台適配</a>
  </li>

<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#fixed-sidenav-19-5"
      href="/platform-integration/android" role="button"
      aria-expanded="false" aria-controls="fixed-sidenav-19-5"
    >Android 平台
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-19-5">
      <li class="nav-item">
    <a class="nav-link" href="/platform-integration/android/splash-screen">新增螢幕閃爍頁</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/android/c-interop">呼叫原生程式碼</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/android/platform-views">託管 Android 原生檢視</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/android/restore-state-android">在 Android 上恢復狀態</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/android/chromeos">建立適合 Chrome OS 的 Android 應用</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#fixed-sidenav-19-6"
      href="/platform-integration/ios" role="button"
      aria-expanded="false" aria-controls="fixed-sidenav-19-6"
    >iOS 平台
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-19-6">
      <li class="nav-item">
    <a class="nav-link" href="/platform-integration/ios/apple-frameworks">使用 Apple 的系統函式庫</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/ios/launch-screen">新增啟動頁</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/ios/ios-app-clip">新增 iOS App Clip 支援</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/ios/app-extensions">新增 iOS App 擴充套件</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/ios/c-interop">呼叫原生程式碼</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/ios/platform-views">託管 iOS 原生檢視</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/ios/ios-debugging">iOS 平台除錯</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/ios/restore-state-ios">在 iOS 上恢復狀態</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#fixed-sidenav-19-7"
      href="/platform-integration/linux" role="button"
      aria-expanded="false" aria-controls="fixed-sidenav-19-7"
    >Linux 作業系統平台
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-19-7">
      <li class="nav-item">
    <a class="nav-link" href="/platform-integration/linux/building">建立 Linux 桌面軟體</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#fixed-sidenav-19-8"
      href="/platform-integration/macos" role="button"
      aria-expanded="false" aria-controls="fixed-sidenav-19-8"
    >macOS 作業系統平台
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-19-8">
      <li class="nav-item">
    <a class="nav-link" href="/platform-integration/macos/building">建立 macOS 應用</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/macos/c-interop">C 語言程式碼整合及呼叫</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#fixed-sidenav-19-9"
      href="/platform-integration/web" role="button"
      aria-expanded="false" aria-controls="fixed-sidenav-19-9"
    >Web 平台
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-19-9">
      <li class="nav-item">
    <a class="nav-link" href="/platform-integration/web/building">建立一個 Web 應用</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/web/faq">Web 平台常見問題</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/web/renderers">Web 平台渲染器</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/web/initialization">自定義 Web 應用初始化</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/web/web-images">在網頁裡顯示圖片</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#fixed-sidenav-19-10"
      href="/platform-integration/windows" role="button"
      aria-expanded="false" aria-controls="fixed-sidenav-19-10"
    >Windows 作業系統平台
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-19-10">
      <li class="nav-item">
    <a class="nav-link" href="/platform-integration/windows/building">建立 Windows 桌面軟體</a>
  </li>

</ul>
  </li>
</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#fixed-sidenav-20" role="button"
             aria-expanded="false" aria-controls="fixed-sidenav-20"
          >Package 和外掛</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-20">
            <li class="nav-item">
    <a class="nav-link" href="/packages-and-plugins/using-packages">使用 package 和外掛</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/packages-and-plugins/developing-packages">開發 Package 和外掛</a>
  </li>

<div class="dropdown-divider"></div>
<li class="nav-item">
    <a class="nav-link" href="/packages-and-plugins/favorites">Flutter Favorites 專案</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="https://pub.dev/flutter" target="_blank" rel="noopener">Package 倉庫</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#fixed-sidenav-21" role="button"
             aria-expanded="false" aria-controls="fixed-sidenav-21"
          >測試和除錯</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-21">
            <li class="nav-header">測試</li><li class="nav-item">
    <a class="nav-link" href="/testing/overview">概覽</a>
  </li>

<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#fixed-sidenav-21-3"
      href="#fixed-sidenav-21-3" role="button"
      aria-expanded="false" aria-controls="fixed-sidenav-21-3"
    >單元測試
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-21-3">
      <li class="nav-item">
    <a class="nav-link" href="/cookbook/testing/unit/introduction">介紹</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/testing/unit/mocking">模擬依賴</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#fixed-sidenav-21-4"
      href="#fixed-sidenav-21-4" role="button"
      aria-expanded="false" aria-controls="fixed-sidenav-21-4"
    >Widget 測試
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-21-4">
      <li class="nav-item">
    <a class="nav-link" href="/cookbook/testing/widget/introduction">介紹</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/testing/widget/finders">尋找 widgets</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/testing/widget/scrolling">模擬捲動</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/testing/widget/tap-drag">模擬使用者操作</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#fixed-sidenav-21-5"
      href="#fixed-sidenav-21-5" role="button"
      aria-expanded="false" aria-controls="fixed-sidenav-21-5"
    >整合測試
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-21-5">
      <li class="nav-item">
    <a class="nav-link" href="/cookbook/testing/integration/introduction">介紹</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/testing/integration-tests">編寫並執行整合測試</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/testing/integration/profiling">衡量整合測試的效能指標</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link" href="/testing/testing-plugins">測試外掛</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/testing/plugins-in-tests">在測試中處理外掛程式碼</a>
  </li>

<li class="nav-header">除錯</li><li class="nav-item">
    <a class="nav-link" href="/testing/debugging">除錯工具</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/testing/code-debugging">透過程式碼除錯應用</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/testing/native-debugging">使用原生語言的除錯</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/testing/build-modes">Flutter 的建立模式</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/testing/common-errors">常見的 Flutter 錯誤</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/testing/errors">處理錯誤</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/maintenance/error-reporting">將錯誤上報到收集服務</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#fixed-sidenav-22" role="button"
             aria-expanded="false" aria-controls="fixed-sidenav-22"
          >效能最佳化</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-22">
            <li class="nav-item">
    <a class="nav-link" href="/perf">概覽</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/perf/impeller">使用 Impeller</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/perf/best-practices">效能最佳實踐</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/perf/app-size">應用大小</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/perf/deferred-components">延遲載入元件</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/perf/rendering-performance">渲染效能</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/perf/ui-performance">效能分析</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/perf/web-performance">Web 效能分析</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/perf/shader">著色器編譯時卡頓</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/perf/metrics">效能指標</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/perf/isolates">併發與隔離</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/perf/faq">效能常見問題和回答</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/perf/appendix">附錄</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#fixed-sidenav-23" role="button"
             aria-expanded="false" aria-controls="fixed-sidenav-23"
          >打包部署</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-23">
            <li class="nav-item">
    <a class="nav-link" href="/deployment/obfuscate">混淆 Dart 程式碼</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/deployment/flavors">設定 flavors</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/deployment/android">建立和發布為 Android 應用</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/deployment/ios">建立和發布為 iOS 應用</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/deployment/macos">建立和發布為 macOS 應用</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/deployment/linux">建立和發布為 Linux 應用</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/deployment/windows">建立和發布為 Windows 應用</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/deployment/web">建立和發布為 Web 應用</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/deployment/cd">持續部署</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#fixed-sidenav-24" role="button"
             aria-expanded="false" aria-controls="fixed-sidenav-24"
          >將 Flutter 新增到現有應用</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-24">
            <li class="nav-item">
    <a class="nav-link" href="/add-to-app">介紹</a>
  </li>

<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#fixed-sidenav-24-2"
      href="/add-to-app/android" role="button"
      aria-expanded="false" aria-controls="fixed-sidenav-24-2"
    >將 Flutter 新增到現有 Android 應用
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-24-2">
      <li class="nav-item">
    <a class="nav-link" href="/add-to-app/android/project-setup">工程設定</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/add-to-app/android/add-flutter-screen">新增單個 Flutter 頁面</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/add-to-app/android/add-flutter-fragment">新增一個 Flutter Fragment</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/add-to-app/android/add-flutter-view">新增 Flutter 檢視</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/add-to-app/android/plugin-setup">Plugin 初始化</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#fixed-sidenav-24-3"
      href="/add-to-app/ios" role="button"
      aria-expanded="false" aria-controls="fixed-sidenav-24-3"
    >將 Flutter 新增到現有 iOS 應用
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-24-3">
      <li class="nav-item">
    <a class="nav-link" href="/add-to-app/ios/project-setup">工程設定</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/add-to-app/ios/add-flutter-screen">新增單個 Flutter 頁面</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link" href="/add-to-app/debugging">除錯及熱過載</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/add-to-app/multiple-flutters">多個 Flutter 實例</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/add-to-app/performance">載入順序和效能</a>
  </li>


</ul>
        </li><li aria-hidden="true"><div class="sidebar-primary-divider"></div></li>
    <li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#fixed-sidenav-26" role="button"
             aria-expanded="false" aria-controls="fixed-sidenav-26"
          >工具 & 程式碼編輯器</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-26">
            <li class="nav-item">
    <a class="nav-link" href="/tools/android-studio">Android Studio & IntelliJ</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/vs-code">Visual Studio Code</a>
  </li>

<li class="nav-item">
    <a class="nav-link collapsable collapsed"
      data-toggle="collapse" data-target="#fixed-sidenav-26-3"
      href="/tools/devtools" role="button"
      aria-expanded="false" aria-controls="fixed-sidenav-26-3"
    >DevTools
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-26-3">
      <li class="nav-item">
    <a class="nav-link" href="/tools/devtools/overview">概覽</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/android-studio">在 Android Studio & IntelliJ 中安裝 DevTools</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/vscode">在 VS Code 中安裝 DevTools</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/cli">利用終端指令安裝 DevTools</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/inspector">Flutter inspector</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/performance">效能檢視</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/cpu-profiler">CPU 效能檢視</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/memory">記憶體檢視</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/console">除錯控制條檢視</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/network">網路檢視</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/debugger">除錯工具 Debugger</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/logging">日誌檢視</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/app-size">應用體積工具</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/extensions">DevTools 擴充套件工具</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/release-notes">發布日誌</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link" href="/tools/sdk">SDK 概覽</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/pubspec">Flutter pubspec 選項</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/flutter-fix">自動修復</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/formatting">程式碼格式化</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#fixed-sidenav-27" role="button"
             aria-expanded="false" aria-controls="fixed-sidenav-27"
          >Flutter 相關概念</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-27">
            <li class="nav-item">
    <a class="nav-link" href="/resources/architectural-overview">Flutter 架構概覽</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/resources/inside-flutter">Flutter 工作原理</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/layout/constraints">理解佈局約束</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/testing/build-modes">Flutter 建立模式</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/hot-reload">熱過載</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#fixed-sidenav-28" role="button"
             aria-expanded="false" aria-controls="fixed-sidenav-28"
          >開發者資源清單</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-28">
            <li class="nav-header">學習</li><li class="nav-item">
    <a class="nav-link" href="/resources/faq">常見問題解答</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/resources/books">相關書籍</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/resources/videos">相關影片</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/resources/courses">相關課程</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/resources/bootstrap-into-dart">學習 Dart</a>
  </li>

<li class="nav-header">貢獻</li><li class="nav-item">
    <a class="nav-link" href="/resources/bug-reports">提出 Bug</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="https://github.com/flutter/flutter/blob/master/CONTRIBUTING.md" target="_blank" rel="noopener">為 Flutter 做出貢獻</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="https://github.com/flutter/flutter/issues?q=is%3Aopen+is%3Aissue+label%3A%22design+doc%22" target="_blank" rel="noopener">設計文件</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link  collapsable" data-toggle="collapse" href="#fixed-sidenav-29" role="button"
             aria-expanded="true" aria-controls="fixed-sidenav-29"
          >更多資料</a>
      
          <ul class="nav flex-column flex-nowrap collapse show" id="fixed-sidenav-29">
            <li class="nav-item">
    <a class="nav-link" href="/dash">瞭解 Dash</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/reference/widgets">Flutter Widget 清單</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="https://api.flutter.dev" target="_blank" rel="noopener">Flutter API 文件</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/reference/flutter-cli">Flutter 指令行文件</a>
  </li>


</ul>
        </li></ul>

    </div>

    
  
  
  
  
  <div
    id="site-toc--side"
    class="site-toc site-toc--side fixed-col col-xl-2 order-3 "
    data-fixed-column
  >
    <header class="site-toc__title">
      目錄
      </header>
    <ul class="section-nav nav">
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#為什麼需要新的-api">為什麼需要新的 API</a></li>
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#navigator-20">Navigator 2.0</a>
<ul class="nav">
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#page">Page</a>
<ul class="nav">
<li class="toc-entry nav-item toc-h4"><a class="nav-link" href="#pages-引數">pages 引數</a></li>
</ul>
</li>
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#router"><t>Router</t><t>Router 代理</t></a></li>
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#router-事件">Router 事件</a></li>
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#實現-routerdelegate">實現 RouterDelegate</a></li>
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#實現-routeinformationparser">實現 RouteInformationParser</a></li>
</ul>
</li>
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#最佳實踐">最佳實踐</a></li>
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#寫在最後">寫在最後</a></li>
</ul>
  </div>
<main class="site-content col-12 col-md-9 offset-md-3 col-xl-8 offset-xl-2 col-xxl-8 offset-xxl-2">
      <div class="container">

        

        

        <header class="site-content__title">
          <div id="page-github-links" class="btn-group" aria-label="Page GitHub links" role="group">
  <a href='https://github.com/cfug/flutter.cn/tree/main/src/community/tutorials/understanding-navigator-v2.md' class="btn no-automatic-external" title="檢視文件原始碼" target="_blank" rel="noopener">
    <i class="material-symbols">description</i>
  </a>
  <a href="https://github.com/cfug/flutter.cn/issues/new?template=1_page_issue.yml&title=[頁面問題] 'Flutter Navigator 2.0 指南與原理解析'&page-url=https://flutter.tw/community/tutorials/understanding-navigator-v2/&page-source=https://github.com/cfug/flutter.cn/tree/main/src/community/tutorials/understanding-navigator-v2.md" class="btn no-automatic-external" title="為本頁面內容提出建議"
    target="_blank" rel="noopener">
    <i class="material-symbols">bug_report</i>
  </a>
</div>

          <h1>Flutter Navigator 2.0 指南與原理解析</h1>
          </header>
        
        
  <div
    id="site-toc--inline"
    class="site-toc site-toc--inline "
  >
    <header class="site-toc__title">
      目錄
    </header>
    <ul class="section-nav">
<li class="toc-entry toc-h2"><a href="#為什麼需要新的-api">為什麼需要新的 API</a></li>
<li class="toc-entry toc-h2"><a href="#navigator-20">Navigator 2.0</a>
<ul>
<li class="toc-entry toc-h3"><a href="#page">Page</a>
<ul>
<li class="toc-entry toc-h4"><a href="#pages-引數">pages 引數</a></li>
</ul>
</li>
<li class="toc-entry toc-h3"><a href="#router"><t>Router</t><t>Router 代理</t></a></li>
<li class="toc-entry toc-h3"><a href="#router-事件">Router 事件</a></li>
<li class="toc-entry toc-h3"><a href="#實現-routerdelegate">實現 RouterDelegate</a></li>
<li class="toc-entry toc-h3"><a href="#實現-routeinformationparser">實現 RouteInformationParser</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#最佳實踐">最佳實踐</a></li>
<li class="toc-entry toc-h2"><a href="#寫在最後">寫在最後</a></li>
</ul>
  </div>
<p>文/ 楊加康</p>

<p>Flutter 1.22 發布後，大家可以發現，官方對路由相關 API 的改動很大，設計文件中表示，由於傳統的指令式 API，如 <code class="language-plaintext highlighter-rouge">Navigator.pop()</code>、<code class="language-plaintext highlighter-rouge">Navigator.push()</code> 等介面，並<strong>沒有給開發者一種靈活的方式去直接管理路由棧</strong>，甚至覺得已經過時了，一點也不 Flutter。</p>

<aside class="alert alert-info" role="alert">
  <p><i class="material-symbols" aria-hidden="true">info</i> <strong>提示：</strong></p>

  <p>As mentioned by a participant in one of Flutter’s user studies, 
the API also feels outdated and not very Flutter-y.</p>

</aside>

<p>而 Navigator 2.0 引入了一套全新的宣告式 API，全新的實現方式與呼叫方法與以往都截然不同，在官方推薦的 <a href="https://medium.com/flutter/learning-flutters-new-navigation-and-routing-system-7c9068155ade">Learning Flutter」s new navigation and routing system</a>
（譯文：<a href="https://mp.weixin.qq.com/s/zGpzJahDSTZDhWqYmkzi5g">Flutter Navigator 2.0 全面解析</a>）文章中，許多讀者也表示並不能立即適應 Navigator 2.0 的一些反差。</p>

<p>本文就來帶領讀者們進一步深入 Navigator 2.0 的基本原理，幫助大家從中探索出最佳的使用方式。</p>

<h2 id="為什麼需要新的-api">
<a class="anchor" href="#%E7%82%BA%E4%BB%80%E9%BA%BC%E9%9C%80%E8%A6%81%E6%96%B0%E7%9A%84-api" aria-hidden="true"><span class="octicon octicon-link"></span></a>為什麼需要新的 API</h2>

<p>在探究具體細節之前，我們有必要瞭解一下 
Flutter 團隊為什麼要不惜這些代價對 Navigator API 做這次的重構，主要有如下幾點原因。</p>

<ul>
  <li>
    <p><strong>原始 API 中的 <code class="language-plaintext highlighter-rouge">initialRoute</code> 引數，即系統預設的初始頁面，在應用執行後就不能再更改了</strong>。這種情況下，如果使用者接收到一個系統通知，點選後想要從當前的路由棧狀態 [Main -&gt; Profile -&gt; Settings] 
重啟切換到新的 [Main -&gt; List -&gt; Detail[id=24] 路由棧，舊的 Navigator API 並沒有一種優雅的實現方式實現這種效果。</p>
  </li>
  <li>
    <p><strong>原始的指令式 Navigator API 只提供給了開發者一些非常針對性的介面，如 <code class="language-plaintext highlighter-rouge">push()</code>、<code class="language-plaintext highlighter-rouge">pop()</code> 等，而沒有給出一種更靈活的方式讓我們直接操作路由棧</strong>。這種做法其實與 Flutter 理念相違背，試想如果我們想要改變某個 widget 的所有子元件只需要重建所有子元件並且建立一系列新的 widget 即可，而將此概念應用在路由中，當應用中存在一系列路由頁面並想要更改時，我們只能呼叫 <code class="language-plaintext highlighter-rouge">push()</code>、<code class="language-plaintext highlighter-rouge">pop()</code> 這類介面來回操作，
<strong>這樣的 Flutter 食之無味</strong>。</p>
  </li>
  <li>
    <p><strong>巢狀路由下，手機裝置自帶的回退按鈕只能由根 Navigator 回應</strong>。在目前的應用中，我們很多場景都需要在某個子 tab 內單獨管理一個子路由棧。假設有這個場景，使用者在子路由棧中做一系列路由操作之後，點選系統回退按鈕，消失的將是整個上層的根路由，我們當然可以使用某種措施來避免這種狀況，但歸咎起來，這也不應該是應用開發者應該考慮的問題。</p>
  </li>
</ul>

<p>於是，Navigator 2.0 就肩負著這千里之任來了。</p>

<h2 id="navigator-20">
<a class="anchor" href="#navigator-20" aria-hidden="true"><span class="octicon octicon-link"></span></a>Navigator 2.0</h2>

<p>Navigator 2.0 新增的宣告式 API 主要包含
<a href="https://api.flutter.dev/flutter/widgets/Page-class.html">Page</a> API、<a href="https://api.flutter.dev/flutter/widgets/Router-class.html">Router</a> API 兩個部分，它們各自強大的功能為 Navigator 2.0 提供了強有力的基石，本節我就帶讀者們看看它們各自的實現細節。</p>

<h3 id="page">
<a class="anchor" href="#page" aria-hidden="true"><span class="octicon octicon-link"></span></a>Page</h3>

<p>Page 是 Navigator 2.0 中最常見的類之一，從名字就能知道它的含義就是『<strong>頁面</strong>』，正如 widget 就是 <strong>元件</strong> 一樣，但 Page 與 Widget 的關係也更加微妙。</p>

<p>與 Flutter 中 Widget、Element、
RenderObject 三棵樹的概念保持一致。
Widget 只儲存元件設定訊息，框架層內建了一個 <code class="language-plaintext highlighter-rouge">createElement()</code> 可以建立與之對應的 Element 實例。
Page 同樣只儲存頁面路由相關訊息，框架層也存在一個 <code class="language-plaintext highlighter-rouge">createRoute()</code> 方法可以建立與之對應的 Route 實例。</p>

<p><img src="https://devrel.andfun.cn/devrel/posts/2020/11/bc57589cd7882.png" alt=""></p>

<p>English placeholder for the translation toggle tools issue.</p>

<p>Widget 和 Page 中也都有一個 <code class="language-plaintext highlighter-rouge">canUpdate()</code> 方法，幫助 Flutter 判斷其是否已更新或改變：</p>

<!--skip-->
<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Page</span>
<span class="kt">bool</span> <span class="nf">canUpdate</span><span class="p">(</span><span class="n">Page</span><span class="p">&lt;</span><span class="kd">dynamic</span><span class="p">&gt;</span> <span class="n">other</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="n">other</span><span class="o">.</span><span class="na">runtimeType</span> <span class="o">==</span> <span class="n">runtimeType</span> <span class="o">&amp;&amp;</span>
         <span class="n">other</span><span class="o">.</span><span class="na">key</span> <span class="o">==</span> <span class="n">key</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Widget</span>
<span class="kd">static</span> <span class="kt">bool</span> <span class="nf">canUpdate</span><span class="p">(</span><span class="n">Widget</span> <span class="n">oldWidget</span><span class="p">,</span> <span class="n">Widget</span> <span class="n">newWidget</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="n">oldWidget</span><span class="o">.</span><span class="na">runtimeType</span> <span class="o">==</span> <span class="n">newWidget</span><span class="o">.</span><span class="na">runtimeType</span>
      <span class="o">&amp;&amp;</span> <span class="n">oldWidget</span><span class="o">.</span><span class="na">key</span> <span class="o">==</span> <span class="n">newWidget</span><span class="o">.</span><span class="na">key</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>甚至連比較的條件都是 <strong>執行時型別與 key</strong>。</p>

<p>而在程式碼層面，Page 類就繼承自我們在舊的 Navigator API 用過的 <code class="language-plaintext highlighter-rouge">RouteSettings</code>：</p>

<!--skip-->
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>abstract class Page&lt;T&gt; extends RouteSettings
</code></pre></div></div>

<p>其中就儲存了包含路由名稱（name，如 “/settings”）和路由引數 (arguments) 等訊息。</p>

<h4 id="pages-引數">
<a class="anchor" href="#pages-%E5%BC%95%E6%95%B8" aria-hidden="true"><span class="octicon octicon-link"></span></a>pages 引數</h4>

<p>在新的 Navigator 元件中，新增了一個 <code class="language-plaintext highlighter-rouge">pages</code> 引數，它接受的就是一個 Page 物件清單，如下這段程式碼：</p>

<!--skip-->
<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">_MyAppState</span> <span class="kd">extends</span> <span class="n">State</span><span class="p">&lt;</span><span class="n">MyApp</span><span class="p">&gt;</span> <span class="p">{</span>
  <span class="kd">final</span> <span class="n">pages</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">MyPage</span><span class="p">(</span>
      <span class="nl">key:</span> <span class="n">Key</span><span class="p">(</span><span class="s">'/'</span><span class="p">),</span>
      <span class="nl">name:</span> <span class="s">'/'</span><span class="p">,</span>
      <span class="nl">builder:</span> <span class="p">(</span><span class="n">context</span><span class="p">)</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">HomeScreen</span><span class="p">(),</span>
    <span class="p">),</span>
    <span class="n">MyPage</span><span class="p">(</span>
      <span class="nl">key:</span> <span class="n">Key</span><span class="p">(</span><span class="s">'/category/5'</span><span class="p">),</span>
      <span class="nl">name:</span> <span class="s">'/category/5'</span><span class="p">,</span>
      <span class="nl">builder:</span> <span class="p">(</span><span class="n">context</span><span class="p">)</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">CategoryScreen</span><span class="p">(</span><span class="nl">id:</span> <span class="mi">5</span><span class="p">),</span>
    <span class="p">),</span>
    <span class="n">MyPage</span><span class="p">(</span>
      <span class="nl">key:</span> <span class="n">Key</span><span class="p">(</span><span class="s">'/item/15'</span><span class="p">),</span>
      <span class="nl">name:</span> <span class="s">'/item/15'</span><span class="p">,</span>
      <span class="nl">builder:</span> <span class="p">(</span><span class="n">context</span><span class="p">)</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">ItemScreen</span><span class="p">(</span><span class="nl">id:</span> <span class="mi">15</span><span class="p">),</span>
    <span class="p">),</span>
  <span class="p">];</span>

  <span class="nd">@override</span>
  <span class="n">Widget</span> <span class="n">build</span><span class="p">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="c1">//...</span>
      <span class="n">Navigator</span><span class="p">(</span>
          <span class="nl">key:</span> <span class="n">_navigatorKey</span><span class="p">,</span>
          <span class="nl">pages:</span> <span class="kt">List</span><span class="o">.</span><span class="na">of</span><span class="p">(</span><span class="n">pages</span><span class="p">),</span>
        <span class="p">),</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>此時，執行應用，<strong>Flutter 就會根據這裡 pages 清單中的所有 Page 物件在底層的路由棧生成對應的 Route 實例</strong>，即與 pages 對應的三個路由頁面。</p>

<p>應用開啟某個頁面，就表示在 pages 中新增一個 Page 物件，系統接收到上層的 pages 改變的通知後就會 <strong>比較新的 pages 與舊的 pages</strong>，根據比較結果，Flutter 就會在底層路由棧中新生成一個 Route 實例，這樣一個新的頁面就算開啟成功了。</p>

<!--skip-->
<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">addPage</span><span class="p">(</span><span class="n">MyPage</span> <span class="n">page</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">setState</span><span class="p">(()</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">pages</span><span class="o">.</span><span class="na">add</span><span class="p">(</span><span class="n">page</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Navigator 元件同樣也新增了一個 <code class="language-plaintext highlighter-rouge">onPopPage</code> 引數，接受一個回呼函式來回應頁面的 pop 事件，如下面程式碼中的 <code class="language-plaintext highlighter-rouge">_onPopPage</code> 函式：</p>

<!--skip-->
<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">_MyAppState</span> <span class="kd">extends</span> <span class="n">State</span><span class="p">&lt;</span><span class="n">MyApp</span><span class="p">&gt;</span> <span class="p">{</span>
  <span class="kt">bool</span> <span class="n">_onPopPage</span><span class="p">(</span><span class="n">Route</span><span class="p">&lt;</span><span class="kd">dynamic</span><span class="p">&gt;</span> <span class="n">route</span><span class="p">,</span> <span class="kd">dynamic</span> <span class="n">result</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">setState</span><span class="p">(()</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">pages</span><span class="o">.</span><span class="na">remove</span><span class="p">(</span><span class="n">route</span><span class="o">.</span><span class="na">settings</span><span class="p">));</span>
    <span class="k">return</span> <span class="n">route</span><span class="o">.</span><span class="na">didPop</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nd">@override</span>
  <span class="n">Widget</span> <span class="n">build</span><span class="p">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">print</span><span class="p">(</span><span class="s">'build: </span><span class="si">$pages</span><span class="s">'</span><span class="p">);</span>
    <span class="k">return</span> <span class="c1">// ...</span>
      <span class="n">Navigator</span><span class="p">(</span>
        <span class="nl">key:</span> <span class="n">_navigatorKey</span><span class="p">,</span>
        <span class="nl">onPopPage:</span> <span class="n">_onPopPage</span><span class="p">,</span>
        <span class="nl">pages:</span> <span class="kt">List</span><span class="o">.</span><span class="na">of</span><span class="p">(</span><span class="n">pages</span><span class="p">),</span>
      <span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>當我們呼叫 <code class="language-plaintext highlighter-rouge">Navigator.pop()</code> 關閉某個頁面時，即能觸發這個函式呼叫，而函式接受到的 route 物件引數就表示需要在 pages 中被移除的頁面，在這裡，我們順勢更新 pages 清單做移除操作即可。</p>

<p>在 <code class="language-plaintext highlighter-rouge">_onPopPage</code> 中，如果我們同意關閉該頁面，則呼叫 <code class="language-plaintext highlighter-rouge">route.didPop(result)</code>，該函式預設回傳 true。</p>

<p>當然，我們也完全可以選擇在接收到通知時不更新 pages 清單，這完全由我們控制，如下這段程式碼：</p>

<!--skip-->
<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">bool</span> <span class="nf">_onPopPage</span><span class="p">(</span><span class="n">Route</span><span class="p">&lt;</span><span class="kd">dynamic</span><span class="p">&gt;</span> <span class="n">route</span><span class="p">,</span> <span class="kd">dynamic</span> <span class="n">result</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// setState(() =&gt; pages.remove(route.settings));</span>
  <span class="k">return</span> <span class="n">route</span><span class="o">.</span><span class="na">didPop</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>那麼，此時會導致什麼現象？
<code class="language-plaintext highlighter-rouge">route.didPop(result)</code> 函式被直接觸發，表示在底層路由棧中彈出該頁面，這時，Flutter 就會比較
<strong>底層已經關閉了一個頁面的路由棧</strong> 和 <strong>當前 Navigator 中存有的 pages</strong>，發現不一致，就會按照現有的 pages 將多餘的一個 Page 當做新頁面，再生成一個 Route 物件，這樣，底層路由棧中的內容就能隨時保持與上層 pages 資料一致了。</p>

<p>也就是說，<strong>某個頁面是否能夠關閉完全由開發者掌控</strong>，而不是單純地交給系統的 <code class="language-plaintext highlighter-rouge">Navigator.pop()</code>。這裡，如果我們不想關閉某個頁面，也可以在 <code class="language-plaintext highlighter-rouge">onPopPage</code> 的回呼函式中直接回傳 false：</p>

<!--skip-->
<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">bool</span> <span class="nf">_onPopPage</span><span class="p">(</span><span class="n">Route</span><span class="p">&lt;</span><span class="kd">dynamic</span><span class="p">&gt;</span> <span class="n">route</span><span class="p">,</span> <span class="kd">dynamic</span> <span class="n">result</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(...)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="n">setState</span><span class="p">(()</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">pages</span><span class="o">.</span><span class="na">remove</span><span class="p">(</span><span class="n">route</span><span class="o">.</span><span class="na">settings</span><span class="p">));</span>
  <span class="k">return</span> <span class="n">route</span><span class="o">.</span><span class="na">didPop</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>需要注意的是，onPopPage 只回應路由棧頂層頁面的推出，中間頁面的移除不會呼叫這個回呼函式。</p>

<p><strong>這也合情合理</strong>，如果我們想要移除非頂層頁面，那麼下次彈出頁面時候，底層路由棧會直接與新的 pages 清單比較來做出相應改變。</p>

<p>要執行上述完整案例，檢視 <a href="https://github.com/MeandNi/flutter_navigator_v2/blob/master/lib/pages_example.dart">完整程式碼</a>。</p>

<p>Flutter 框架中預先內建了 <code class="language-plaintext highlighter-rouge">MaterialPage</code> 和 
<code class="language-plaintext highlighter-rouge">CupertinoPage</code> 兩種 Page，分別表示 Material 
和 Cupertino 風格下的頁面，與之前我們常用的 <code class="language-plaintext highlighter-rouge">MaterialPageRoute</code> 
和 <code class="language-plaintext highlighter-rouge">CupertinoPageRoute</code> 相呼應，它們都接受一個 child 元件表示該頁面所要呈現的內容。例如下面這個例子，我們可以直接在 pages 中使用 <code class="language-plaintext highlighter-rouge">MaterialPage</code> 建立頁面：</p>

<!--skip-->
<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">List</span><span class="p">&lt;</span><span class="n">Page</span><span class="p">&gt;</span> <span class="n">pages</span> <span class="o">=</span> <span class="p">&lt;</span><span class="n">Page</span><span class="p">&gt;[</span>
  <span class="n">MaterialPage</span><span class="p">(</span>
    <span class="nl">key:</span> <span class="n">ValueKey</span><span class="p">(</span><span class="s">'VeggiesListPage'</span><span class="p">),</span>
    <span class="nl">child:</span> <span class="n">VeggiesListScreen</span><span class="p">(</span>
      <span class="nl">veggies:</span> <span class="n">veggies</span><span class="p">,</span>
      <span class="nl">onTapped:</span> <span class="n">_handleVeggieTapped</span><span class="p">,</span>
    <span class="p">),</span>
  <span class="p">),</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">show404</span><span class="p">)</span>
    <span class="n">MaterialPage</span><span class="p">(</span><span class="nl">key:</span> <span class="n">ValueKey</span><span class="p">(</span><span class="s">'UnknownPage'</span><span class="p">),</span> <span class="nl">child:</span> <span class="n">UnknownScreen</span><span class="p">())</span>
  <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">_selectedVeggie</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span>
    <span class="n">VeggieDetailsPage</span><span class="p">(</span><span class="nl">veggie:</span> <span class="n">_selectedVeggie</span><span class="p">)</span>
<span class="p">];</span>
</code></pre></div></div>

<p>我們也可以直接繼承 Page 定義自己的頁面型別，如下：</p>

<!--skip-->
<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">MyPage</span> <span class="kd">extends</span> <span class="n">Page</span> <span class="p">{</span>
  <span class="kd">final</span> <span class="n">Veggie</span> <span class="n">veggie</span><span class="p">;</span>

  <span class="n">MyPage</span><span class="p">({</span>
    <span class="k">this</span><span class="o">.</span><span class="na">veggie</span><span class="p">,</span>
  <span class="p">})</span> <span class="o">:</span> <span class="k">super</span><span class="p">(</span><span class="nl">key:</span> <span class="n">ValueKey</span><span class="p">(</span><span class="n">veggie</span><span class="p">));</span>

  <span class="n">Route</span> <span class="n">createRoute</span><span class="p">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">MaterialPageRoute</span><span class="p">(</span>
      <span class="nl">settings:</span> <span class="k">this</span><span class="p">,</span>
      <span class="nl">builder:</span> <span class="p">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">VeggieDetailsScreen</span><span class="p">(</span><span class="nl">veggie:</span> <span class="n">veggie</span><span class="p">);</span>
      <span class="p">},</span>
    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>這裡，我們重寫了 <code class="language-plaintext highlighter-rouge">createRoute()</code> 回傳一個 <code class="language-plaintext highlighter-rouge">MaterialPageRoute</code> 物件即可。</p>

<h3 id="router">
<a class="anchor" href="#router" aria-hidden="true"><span class="octicon octicon-link"></span></a>Router</h3>

<p>Router 是 Navigator 2.0 中新增的另一個非常重要的元件，繼承自 StatefulWidget，可以管理自己的狀態。</p>

<p>它所管理的狀態就是應用的 <strong>路由狀態</strong>，結合上節中提到的 Page 的概念，我們就可以將其中的 pages 看做這裡的路由狀態，當我們改變 pages 的內容或狀態時，
Router 就會將該狀態分發給子元件，狀態改變導致子元件重建應用最新的狀態。</p>

<p>所以當 Navigator 作為 Router 的子元件時，就會天然具有感知路由狀態改變的能力了，如下圖所示：</p>

<p><img src="https://devrel.andfun.cn/devrel/posts/2020/11/957f7d75ef977.png" alt=""></p>

<p>當用戶點選某個按鈕就會觸發類似下面這個函式的呼叫，該函式又會導致狀態改變而重建子元件。</p>

<!--skip-->
<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">_pushPage</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">MyRouteDelegate</span><span class="o">.</span><span class="na">of</span><span class="p">(</span><span class="n">context</span><span class="p">)</span><span class="o">.</span><span class="na">push</span><span class="p">(</span><span class="s">'Route</span><span class="si">$_counter</span><span class="s">'</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Navigator 2.0 所強調的宣告式 API 的核心就在於此，我們操作路由的方式並非再是 push 或者 pop，而是改變應用的狀態了！我們需要從觀念上理解宣告式 API 與以往的不同之處。</p>

<h3 id="router-代理">
<a class="anchor" href="#router-%E4%BB%A3%E7%90%86" aria-hidden="true"><span class="octicon octicon-link"></span></a>Router 代理</h3>

<p>Router 要完成上面所說的功能主要需要透過設定 RouterDelegate（路由代理）實現。</p>

<p>Navigator 2.0 之後，Flutter 也提供了 
MaterialApp 的新建構式函式 router 
來幫助我們直接在應用頂層構造出全域的 Router 元件，使用方式如下：</p>

<!--skip-->
<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">MaterialApp</span><span class="o">.</span><span class="na">router</span><span class="p">(</span>
  <span class="nl">title:</span> <span class="s">'Flutter Demo'</span><span class="p">,</span>
  <span class="nl">theme:</span> <span class="n">ThemeData</span><span class="p">(</span>
    <span class="nl">primarySwatch:</span> <span class="n">Colors</span><span class="o">.</span><span class="na">blue</span><span class="p">,</span>
    <span class="nl">visualDensity:</span> <span class="n">VisualDensity</span><span class="o">.</span><span class="na">adaptivePlatformDensity</span><span class="p">,</span>
  <span class="p">),</span>
  <span class="nl">routeInformationParser:</span> <span class="n">MyRouteParser</span><span class="p">(),</span>
  <span class="nl">routerDelegate:</span> <span class="n">delegate</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div></div>

<p>該建構式函式接受一個 <code class="language-plaintext highlighter-rouge">routerDelegate</code> 引數，這裡，就可以傳入我們自己建立的 
<code class="language-plaintext highlighter-rouge">MyRouteDelegate</code> 物件，具體程式碼如下：</p>

<!--skip-->
<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">MyRouteDelegate</span> <span class="kd">extends</span> <span class="n">RouterDelegate</span><span class="p">&lt;</span><span class="kt">String</span><span class="p">&gt;</span>
    <span class="k">with</span> <span class="n">PopNavigatorRouterDelegateMixin</span><span class="p">&lt;</span><span class="kt">String</span><span class="p">&gt;,</span> <span class="n">ChangeNotifier</span> <span class="p">{</span>
  <span class="kd">final</span> <span class="n">_stack</span> <span class="o">=</span> <span class="p">&lt;</span><span class="kt">String</span><span class="p">&gt;[];</span>

  <span class="kd">static</span> <span class="n">MyRouteDelegate</span> <span class="n">of</span><span class="p">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">final</span> <span class="n">delegate</span> <span class="o">=</span> <span class="n">Router</span><span class="o">.</span><span class="na">of</span><span class="p">(</span><span class="n">context</span><span class="p">)</span><span class="o">.</span><span class="na">routerDelegate</span><span class="p">;</span>
    <span class="k">assert</span><span class="p">(</span><span class="n">delegate</span> <span class="k">is</span> <span class="n">MyRouteDelegate</span><span class="p">,</span> <span class="s">'Delegate type must match'</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">delegate</span> <span class="k">as</span> <span class="n">MyRouteDelegate</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="n">MyRouteDelegate</span><span class="p">({</span>
    <span class="nd">@required</span> <span class="k">this</span><span class="o">.</span><span class="na">onGenerateRoute</span><span class="p">,</span>
  <span class="p">});</span>

  <span class="c1">// ...</span>
  <span class="nd">@override</span>
  <span class="n">Widget</span> <span class="n">build</span><span class="p">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">print</span><span class="p">(</span><span class="s">'</span><span class="si">${describeIdentity(this)}</span><span class="s">.stack: </span><span class="si">$_stack</span><span class="s">'</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">Navigator</span><span class="p">(</span>
      <span class="nl">key:</span> <span class="n">navigatorKey</span><span class="p">,</span>
      <span class="nl">onPopPage:</span> <span class="n">_onPopPage</span><span class="p">,</span>
      <span class="nl">pages:</span> <span class="p">[</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">final</span> <span class="n">name</span> <span class="k">in</span> <span class="n">_stack</span><span class="p">)</span>
            <span class="n">MyPage</span><span class="p">(</span>
              <span class="nl">key:</span> <span class="n">ValueKey</span><span class="p">(</span><span class="n">name</span><span class="p">),</span>
              <span class="nl">name:</span> <span class="n">name</span><span class="p">,</span>
              <span class="nl">routeFactory:</span> <span class="n">onGenerateRoute</span><span class="p">,</span>
            <span class="p">),</span>
      <span class="p">],</span>
    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>上面的 MyRouteDelegate 繼承自 RouterDelegate，內部可以實現它的 <code class="language-plaintext highlighter-rouge">setInitialRoutePath</code>、<code class="language-plaintext highlighter-rouge">setNewRoutePath</code>、
<code class="language-plaintext highlighter-rouge">build</code> 三個方法與 <code class="language-plaintext highlighter-rouge">currentConfiguration</code> 的 getter 方法，並且也混入了 <code class="language-plaintext highlighter-rouge">PopNavigatorRouterDelegateMixin</code> 類，它的主要作用是回應 Android 裝置的回退按鈕，而 <code class="language-plaintext highlighter-rouge">ChangeNotifier</code> 作用便是做事件通知，下文的『<a href="#%E5%AF%A6%E7%8F%BE-routerdelegate">實現 RouterDelegate</a>』中就會分析這些方法各自的作用。</p>

<p>這裡，我們先看 <code class="language-plaintext highlighter-rouge">MyRouteDelegate.build</code> 方法，與上一小節一樣，我們可以透過傳入 <code class="language-plaintext highlighter-rouge">pages</code> 和 <code class="language-plaintext highlighter-rouge">onPopPage</code> 引數建立一個 Navigator 元件回傳，這樣，當 MyRouteDelegate 元件傳入到 <code class="language-plaintext highlighter-rouge">MaterialApp.router()</code> 建構式函式後，這裡的 Navigator 就順利成為了 Router 的子元件了。</p>

<p>大部分情況下，一個自定義的路由代理就可以這樣實現完成了。</p>

<h3 id="router-事件">
<a class="anchor" href="#router-%E4%BA%8B%E4%BB%B6" aria-hidden="true"><span class="octicon octicon-link"></span></a>Router 事件</h3>

<p>在應用開發中，Router 最根本的作用還是監聽各種來自系統的路由相關事件，包括：</p>

<ul>
  <li>首次啟動應用程式時，系統請求的初始路由。</li>
  <li>監聽來自系統的新 intent，即開啟一個新路由頁面。</li>
  <li>監聽裝置回退，關閉路由棧中頂部路由。</li>
</ul>

<p>而要想完整的回應這些事件，還得為 Router 設定 <strong>RouteNameProvider Delegate</strong> 
和 <strong>BackButtonDispatcher Delegate</strong>。</p>

<p>最初，應用啟動或者開啟新頁面的事件從系統發出時，
<strong>會轉發給應用層一個表示該事件的字串</strong>，
RouteNameParser Delegate 會將該字串傳遞給 RouteNameParser，進而會解析成一個型別 <code class="language-plaintext highlighter-rouge">T</code> 的物件，型別 <code class="language-plaintext highlighter-rouge">T</code> 預設為 <code class="language-plaintext highlighter-rouge">RouteSetting</code>，其中就會包含傳遞的路由名稱和引數等訊息了。</p>

<p>類似地，使用者點選裝置回退按鈕後，會將該事件傳遞給 BackButtonDispatcher Delegate。</p>

<p>最終，RouteNameParser 解析的物件資料和 
BackButtonDispatcher Delegate 回退事件都會轉發給上文中的 RouteDelegate，RouteDelegate 接收到這些事件通知後，就會執行回應，改變狀態，從而導致含有 pages 的 Navigator 元件重建，在應用層中呈現最新的路由狀態。</p>

<p>整個過程可以用下圖表示：</p>

<p><img src="https://devrel.andfun.cn/devrel/posts/2020/11/516f15849e0aa.png" alt=""></p>

<aside class="alert alert-info" role="alert">
  <p><i class="material-symbols" aria-hidden="true">info</i> <strong>提示：</strong></p>

  <p>需要知道的是，RouteNameProvider Delegate 和 
BackButtonDispatcher Delegate 都有 Flutter 內建的預設實現，因此，大部分情況下，我們並不需要考慮其中的細節，此時型別 <code class="language-plaintext highlighter-rouge">T</code> 預設為 RouteSetting
（與舊的 Navogator API 一致，包含路由訊息）。</p>

</aside>

<p>從以上部分可以看出，一系列的操作只是將最終事件傳遞給 RouterDelegate 而已，之後狀態更新等操作都可以由我們自定義的 RouterDelegate 決定。</p>

<h3 id="實現-routerdelegate">
<a class="anchor" href="#%E5%AF%A6%E7%8F%BE-routerdelegate" aria-hidden="true"><span class="octicon octicon-link"></span></a>實現 RouterDelegate</h3>

<p>正如我們上文說的，Flutter 為 RouteNameProvider Delegate 
和 BackButtonDispatcher Delegate 都提供了預設實現，而 RouterDelegate 則必須要我們手動實現，並傳遞給 <code class="language-plaintext highlighter-rouge">MaterialApp.router()</code> 建構式函式才行。</p>

<p>我們可以在這裡完成各種業務相關的操作，
RouteDelegate 本身實現自 Listenable，即可監聽物件，也可以叫做被觀察者，每當狀態改變時，觀察者們就能通知它回應該事件，從而促使 Navigator 元件重建，更新路由狀態。</p>

<p>RouterDelegate 中的路由事件的通知主要由下面幾個函式接收：</p>

<ul>
  <li>backButtonDispatcher 發出回退按鈕事件時，會呼叫 RouterDelegate 的 <code class="language-plaintext highlighter-rouge">popRoute()</code> 方法，由混入的 PopNavigatorRouterDelegateMixin 實現。</li>
  <li>發出應用初始路由的通知時，會呼叫 RouterDelegate 的 <code class="language-plaintext highlighter-rouge">setInitialRoutePath()</code> 方法，該方法接受路由名稱作為引數，預設此方法會直接呼叫 RouterDelegate 的 <code class="language-plaintext highlighter-rouge">setNewRoutePath()</code> 函式。</li>
  <li>系統透過 routeNameProvider 發出開啟新路由頁面的通知時，直接呼叫 <code class="language-plaintext highlighter-rouge">setNewRoutePath()</code> 方法，引數就是由 routeNameParser 解析的結果。</li>
</ul>

<p>因此，我們最終就可以實現如下這樣的 RouterDelegate：</p>

<!--skip-->
<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">MyRouteDelegate</span> <span class="kd">extends</span> <span class="n">RouterDelegate</span><span class="p">&lt;</span><span class="kt">String</span><span class="p">&gt;</span>
    <span class="k">with</span> <span class="n">PopNavigatorRouterDelegateMixin</span><span class="p">&lt;</span><span class="kt">String</span><span class="p">&gt;,</span> <span class="n">ChangeNotifier</span> <span class="p">{</span>
  <span class="kd">final</span> <span class="n">_stack</span> <span class="o">=</span> <span class="p">&lt;</span><span class="kt">String</span><span class="p">&gt;[];</span>

  <span class="kd">static</span> <span class="n">MyRouteDelegate</span> <span class="n">of</span><span class="p">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">final</span> <span class="n">delegate</span> <span class="o">=</span> <span class="n">Router</span><span class="o">.</span><span class="na">of</span><span class="p">(</span><span class="n">context</span><span class="p">)</span><span class="o">.</span><span class="na">routerDelegate</span><span class="p">;</span>
    <span class="k">assert</span><span class="p">(</span><span class="n">delegate</span> <span class="k">is</span> <span class="n">MyRouteDelegate</span><span class="p">,</span> <span class="s">'Delegate type must match'</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">delegate</span> <span class="k">as</span> <span class="n">MyRouteDelegate</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="n">MyRouteDelegate</span><span class="p">({</span>
    <span class="nd">@required</span> <span class="k">this</span><span class="o">.</span><span class="na">onGenerateRoute</span><span class="p">,</span>
  <span class="p">});</span>

  <span class="kd">final</span> <span class="n">RouteFactory</span> <span class="n">onGenerateRoute</span><span class="p">;</span>

  <span class="nd">@override</span>
  <span class="n">GlobalKey</span><span class="p">&lt;</span><span class="n">NavigatorState</span><span class="p">&gt;</span> <span class="n">navigatorKey</span> <span class="o">=</span> <span class="n">GlobalKey</span><span class="p">&lt;</span><span class="n">NavigatorState</span><span class="p">&gt;();</span>

  <span class="nd">@override</span>
  <span class="kt">String</span> <span class="kd">get</span> <span class="n">currentConfiguration</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">_stack</span><span class="o">.</span><span class="na">isNotEmpty</span> <span class="o">?</span> <span class="n">_stack</span><span class="o">.</span><span class="na">last</span> <span class="o">:</span> <span class="kc">null</span><span class="p">;</span>

  <span class="kt">List</span><span class="p">&lt;</span><span class="kt">String</span><span class="p">&gt;</span> <span class="kd">get</span> <span class="n">stack</span> <span class="o">=</span><span class="p">&gt;</span> <span class="kt">List</span><span class="o">.</span><span class="na">unmodifiable</span><span class="p">(</span><span class="n">_stack</span><span class="p">);</span>

  <span class="kt">void</span> <span class="n">push</span><span class="p">(</span><span class="kt">String</span> <span class="n">newRoute</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">_stack</span><span class="o">.</span><span class="na">add</span><span class="p">(</span><span class="n">newRoute</span><span class="p">);</span>
    <span class="n">notifyListeners</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="kt">void</span> <span class="n">pop</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">_stack</span><span class="o">.</span><span class="na">isNotEmpty</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">_stack</span><span class="o">.</span><span class="na">remove</span><span class="p">(</span><span class="n">_stack</span><span class="o">.</span><span class="na">last</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">notifyListeners</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="nd">@override</span>
  <span class="n">Future</span><span class="p">&lt;</span><span class="kt">void</span><span class="p">&gt;</span> <span class="n">setInitialRoutePath</span><span class="p">(</span><span class="kt">String</span> <span class="n">configuration</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">setNewRoutePath</span><span class="p">(</span><span class="n">configuration</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nd">@override</span>
  <span class="n">Future</span><span class="p">&lt;</span><span class="kt">void</span><span class="p">&gt;</span> <span class="n">setNewRoutePath</span><span class="p">(</span><span class="kt">String</span> <span class="n">configuration</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">print</span><span class="p">(</span><span class="s">'setNewRoutePath </span><span class="si">$configuration</span><span class="s">'</span><span class="p">);</span>
    <span class="n">_stack</span>
      <span class="p">.</span><span class="o">.</span><span class="na">clear</span><span class="p">()</span>
      <span class="p">.</span><span class="o">.</span><span class="na">add</span><span class="p">(</span><span class="n">configuration</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">SynchronousFuture</span><span class="p">&lt;</span><span class="kt">void</span><span class="p">&gt;(</span><span class="kc">null</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="kt">bool</span> <span class="n">_onPopPage</span><span class="p">(</span><span class="n">Route</span><span class="p">&lt;</span><span class="kd">dynamic</span><span class="p">&gt;</span> <span class="n">route</span><span class="p">,</span> <span class="kd">dynamic</span> <span class="n">result</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">_stack</span><span class="o">.</span><span class="na">isNotEmpty</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">_stack</span><span class="o">.</span><span class="na">last</span> <span class="o">==</span> <span class="n">route</span><span class="o">.</span><span class="na">settings</span><span class="o">.</span><span class="na">name</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">_stack</span><span class="o">.</span><span class="na">remove</span><span class="p">(</span><span class="n">route</span><span class="o">.</span><span class="na">settings</span><span class="o">.</span><span class="na">name</span><span class="p">);</span>
        <span class="n">notifyListeners</span><span class="p">();</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">route</span><span class="o">.</span><span class="na">didPop</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nd">@override</span>
  <span class="n">Widget</span> <span class="n">build</span><span class="p">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">print</span><span class="p">(</span><span class="s">'</span><span class="si">${describeIdentity(this)}</span><span class="s">.stack: </span><span class="si">$_stack</span><span class="s">'</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">Navigator</span><span class="p">(</span>
      <span class="nl">key:</span> <span class="n">navigatorKey</span><span class="p">,</span>
      <span class="nl">onPopPage:</span> <span class="n">_onPopPage</span><span class="p">,</span>
      <span class="nl">pages:</span> <span class="p">[</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">final</span> <span class="n">name</span> <span class="k">in</span> <span class="n">_stack</span><span class="p">)</span>
            <span class="n">MyPage</span><span class="p">(</span>
              <span class="nl">key:</span> <span class="n">ValueKey</span><span class="p">(</span><span class="n">name</span><span class="p">),</span>
              <span class="nl">name:</span> <span class="n">name</span><span class="p">,</span>
            <span class="p">),</span>
      <span class="p">],</span>
    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>這裡的 <code class="language-plaintext highlighter-rouge">_stack</code> 表示一個資料集，每個資料會在 build 函式中建立出一個 MyPage，預設為空。應用啟動時，會先呼叫這裡的 
<code class="language-plaintext highlighter-rouge">setInitialRoutePath(String configuration)</code> 方法，引數為 <code class="language-plaintext highlighter-rouge">/</code>，此時路由棧就會存在一個首頁了。</p>

<p>完整程式碼，請 <a href="https://github.com/MeandNi/flutter_navigator_v2/blob/master/lib/router_example.dart">參考這裡</a>。</p>

<p>在子元件中，我們也可以使用 MyRouteDelegate，透過如下方式開啟或者關閉一個頁面：</p>

<!--skip-->
<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">MyRouteDelegate</span><span class="o">.</span><span class="na">of</span><span class="p">(</span><span class="n">context</span><span class="p">)</span><span class="o">.</span><span class="na">push</span><span class="p">(</span><span class="s">'Route</span><span class="si">$_counter</span><span class="s">'</span><span class="p">);</span>

<span class="n">MyRouteDelegate</span><span class="o">.</span><span class="na">of</span><span class="p">(</span><span class="n">context</span><span class="p">)</span><span class="o">.</span><span class="na">pop</span><span class="p">();</span>
</code></pre></div></div>

<p>與 InheritWidget 的性質相同，這裡會觸發 MyRouteDelegate 中，我們自定義的 <code class="language-plaintext highlighter-rouge">push()</code> 和 <code class="language-plaintext highlighter-rouge">pop()</code> 方法操作宣告的路由棧，最終通知 Navigator 更新路由狀態。</p>

<h3 id="實現-routeinformationparser">
<a class="anchor" href="#%E5%AF%A6%E7%8F%BE-routeinformationparser" aria-hidden="true"><span class="octicon octicon-link"></span></a>實現 RouteInformationParser</h3>

<p><code class="language-plaintext highlighter-rouge">MaterialApp.router</code> 除了需要接受路由代理 <code class="language-plaintext highlighter-rouge">routerDelegate</code> 這個必要引數外，還需要同時指定 <code class="language-plaintext highlighter-rouge">routeInformationParser</code> 引數，如下：</p>

<!--skip-->
<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">MaterialApp</span><span class="o">.</span><span class="na">router</span><span class="p">(</span>
  <span class="nl">title:</span> <span class="s">'Flutter Demo'</span><span class="p">,</span>
  <span class="nl">routeInformationParser:</span> <span class="n">MyRouteParser</span><span class="p">(),</span> 	<span class="c1">// 傳入 MyRouteParser</span>
  <span class="nl">routerDelegate:</span> <span class="n">delegate</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div></div>

<p>該引數接受一個 RouteInformationParser 物件，定義該類別通常有一個最簡單直接的實現，如下：</p>

<!--skip-->
<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">MyRouteParser</span> <span class="kd">extends</span> <span class="n">RouteInformationParser</span><span class="p">&lt;</span><span class="kt">String</span><span class="p">&gt;</span> <span class="p">{</span>
  <span class="nd">@override</span>
  <span class="n">Future</span><span class="p">&lt;</span><span class="kt">String</span><span class="p">&gt;</span> <span class="n">parseRouteInformation</span><span class="p">(</span><span class="n">RouteInformation</span> <span class="n">routeInformation</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">SynchronousFuture</span><span class="p">(</span><span class="n">routeInformation</span><span class="o">.</span><span class="na">location</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nd">@override</span>
  <span class="n">RouteInformation</span> <span class="n">restoreRouteInformation</span><span class="p">(</span><span class="kt">String</span> <span class="n">configuration</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">RouteInformation</span><span class="p">(</span><span class="nl">location:</span> <span class="n">configuration</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>MyRouteParser 繼承自 RouteInformationParser，並重寫了父類別 <code class="language-plaintext highlighter-rouge">parseRouteInformation()</code> 
和 <code class="language-plaintext highlighter-rouge">restoreRouteInformation()</code> 兩個方法。</p>

<p>如上文所述，<code class="language-plaintext highlighter-rouge">parseRouteInformation()</code> 方法的作用就是接受系統傳遞給我們的路由訊息 routeInformation，然後，回傳轉發給我們之前定義的路由代理 RouterDelegate，解析後的型別為 RouteInformationParser 的泛型型別，即這裡的 String。也就是說，下面這個 RouterDelegate 中 <code class="language-plaintext highlighter-rouge">setNewRoutePath()</code> 方法的引數 <code class="language-plaintext highlighter-rouge">configuration</code> 就是從那裡轉發而來的：</p>

<!--skip-->
<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@override</span>
<span class="n">Future</span><span class="p">&lt;</span><span class="kt">void</span><span class="p">&gt;</span> <span class="n">setNewRoutePath</span><span class="p">(</span><span class="kt">String</span> <span class="n">configuration</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">print</span><span class="p">(</span><span class="s">'setNewRoutePath </span><span class="si">$configuration</span><span class="s">'</span><span class="p">);</span>
  <span class="n">_stack</span>
    <span class="p">.</span><span class="o">.</span><span class="na">clear</span><span class="p">()</span>
    <span class="p">.</span><span class="o">.</span><span class="na">add</span><span class="p">(</span><span class="n">configuration</span><span class="p">);</span>
  <span class="k">return</span> <span class="n">SynchronousFuture</span><span class="p">&lt;</span><span class="kt">void</span><span class="p">&gt;(</span><span class="kc">null</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">restoreRouteInformation()</code> 方法回傳一個 
RouteInformation 物件，表示從傳入的 <code class="language-plaintext highlighter-rouge">configuration</code> 恢復路由訊息。與 <code class="language-plaintext highlighter-rouge">parseRouteInformation()</code> 相呼應。</p>

<p>例如，在瀏覽器中，Flutter 應用所在的標籤被關閉，此時如果我們想要恢復整個頁面的路由棧則需要重寫此方法，</p>

<p>上面 MyRouteParser 的實現，是最簡單的實現方式，功能就是在 <code class="language-plaintext highlighter-rouge">parseRouteInformation()</code> 中接受底層的 <code class="language-plaintext highlighter-rouge">routeInformation</code>，在 <code class="language-plaintext highlighter-rouge">restoreRouteInformation()</code> 中恢復上層的 <code class="language-plaintext highlighter-rouge">configuration</code>。</p>

<p>我們也可以繼續為這兩個方法賦能，實現更符合業務需求的邏輯，如下這程式碼：</p>

<!--skip-->
<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="s">'package:flutter/material.dart'</span><span class="o">;</span>
<span class="kn">import</span> <span class="s">'package:flutter_navigator_v2/navigator_v2/model.dart'</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">VeggieRouteInformationParser</span> <span class="kd">extends</span> <span class="n">RouteInformationParser</span><span class="p">&lt;</span><span class="n">VeggieRoutePath</span><span class="p">&gt;</span> <span class="p">{</span>
  <span class="nd">@override</span>
  <span class="n">Future</span><span class="p">&lt;</span><span class="n">VeggieRoutePath</span><span class="p">&gt;</span> <span class="n">parseRouteInformation</span><span class="p">(</span>
      <span class="n">RouteInformation</span> <span class="n">routeInformation</span><span class="p">)</span> <span class="kd">async</span> <span class="p">{</span>
    <span class="n">print</span><span class="p">(</span><span class="s">"parseRouteInformation"</span><span class="p">);</span>
    <span class="kd">final</span> <span class="n">uri</span> <span class="o">=</span> <span class="kt">Uri</span><span class="o">.</span><span class="na">parse</span><span class="p">(</span><span class="n">routeInformation</span><span class="o">.</span><span class="na">location</span><span class="p">);</span>
    <span class="c1">// Handle '/'</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">uri</span><span class="o">.</span><span class="na">pathSegments</span><span class="o">.</span><span class="na">length</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="n">VeggieRoutePath</span><span class="o">.</span><span class="na">home</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="c1">// Handle '/veggie/:id'</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">uri</span><span class="o">.</span><span class="na">pathSegments</span><span class="o">.</span><span class="na">length</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">uri</span><span class="o">.</span><span class="na">pathSegments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="s">'veggie'</span><span class="p">)</span> <span class="k">return</span> <span class="n">VeggieRoutePath</span><span class="o">.</span><span class="na">unknown</span><span class="p">();</span>
      <span class="kd">var</span> <span class="n">remaining</span> <span class="o">=</span> <span class="n">uri</span><span class="o">.</span><span class="na">pathSegments</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
      <span class="kd">var</span> <span class="n">id</span> <span class="o">=</span> <span class="kt">int</span><span class="o">.</span><span class="na">tryParse</span><span class="p">(</span><span class="n">remaining</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">id</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="k">return</span> <span class="n">VeggieRoutePath</span><span class="o">.</span><span class="na">unknown</span><span class="p">();</span>
      <span class="k">return</span> <span class="n">VeggieRoutePath</span><span class="o">.</span><span class="na">details</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">// Handle unknown routes</span>
    <span class="k">return</span> <span class="n">VeggieRoutePath</span><span class="o">.</span><span class="na">unknown</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="nd">@override</span>
  <span class="n">RouteInformation</span> <span class="n">restoreRouteInformation</span><span class="p">(</span><span class="n">VeggieRoutePath</span> <span class="n">path</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">print</span><span class="p">(</span><span class="s">"restoreRouteInformation"</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="na">isUnknown</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="n">RouteInformation</span><span class="p">(</span><span class="nl">location:</span> <span class="s">'/404'</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="na">isHomePage</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="n">RouteInformation</span><span class="p">(</span><span class="nl">location:</span> <span class="s">'/'</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="na">isDetailsPage</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="n">RouteInformation</span><span class="p">(</span><span class="nl">location:</span> <span class="s">'/veggie/</span><span class="si">${path.id}</span><span class="s">'</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>這裡的 VeggieRouteInformationParser 
繼承的 RouteInformationParser 泛型型別被指定為了我們自定義的 VeggieRoutePath，在 Navigator 2.0 中我們稱這個解析後的形式為 <strong>路由 Model</strong>。</p>

<p>此時 VeggieRouteInformationParser 作用就凸顯出來了，它在 <code class="language-plaintext highlighter-rouge">parseRouteInformation()</code> 方法中接受到系統傳遞過來的 RouteInformation 訊息後就可以將其轉換成我們上層熟悉的 VeggieRoutePath Model 物件。
VeggieRoutePath 類內容如下：</p>

<!--skip-->
<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">VeggieRoutePath</span> <span class="p">{</span>
  <span class="kd">final</span> <span class="kt">int</span> <span class="n">id</span><span class="p">;</span>
  <span class="kd">final</span> <span class="kt">bool</span> <span class="n">isUnknown</span><span class="p">;</span>

  <span class="n">VeggieRoutePath</span><span class="o">.</span><span class="na">home</span><span class="p">()</span>
      <span class="o">:</span> <span class="n">id</span> <span class="o">=</span> <span class="kc">null</span><span class="p">,</span>
        <span class="n">isUnknown</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

  <span class="n">VeggieRoutePath</span><span class="o">.</span><span class="na">details</span><span class="p">(</span><span class="k">this</span><span class="o">.</span><span class="na">id</span><span class="p">)</span> <span class="o">:</span> <span class="n">isUnknown</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

  <span class="n">VeggieRoutePath</span><span class="o">.</span><span class="na">unknown</span><span class="p">()</span>
      <span class="o">:</span> <span class="n">id</span> <span class="o">=</span> <span class="kc">null</span><span class="p">,</span>
        <span class="n">isUnknown</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

  <span class="kt">bool</span> <span class="kd">get</span> <span class="n">isHomePage</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">id</span> <span class="o">==</span> <span class="kc">null</span><span class="p">;</span>

  <span class="kt">bool</span> <span class="kd">get</span> <span class="n">isDetailsPage</span> <span class="o">=</span><span class="p">&gt;</span> <span class="n">id</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>此時，在 <code class="language-plaintext highlighter-rouge">RouterDelegate&lt;VeggieRoutePath&gt;</code> 中，我們就可以根據該物件做路由狀態的更新了。</p>

<h2 id="最佳實踐">
<a class="anchor" href="#%E6%9C%80%E4%BD%B3%E5%AF%A6%E8%B8%90" aria-hidden="true"><span class="octicon octicon-link"></span></a>最佳實踐</h2>

<p>Navigator 2.0 與以往不同的方面主要體現在，將路由狀態轉換成了應用本身的狀態，給了開發者更大的自由與想象空間，此後，我們可以將路由邏輯及其狀態的管理與我們的業務邏輯緊密相連，形成自己的一套方案，相信這又會是以後 Flutter 體系中一塊大主題。</p>

<p>上述提及的所有程式碼包含三個案例，分別是：</p>

<ul>
  <li>
<a href="https://github.com/MeandNi/flutter_navigator_v2/blob/master/lib/pages_example.dart">pages_example.dart</a>，Navigator + Page 實現路由狀態管理。</li>
  <li>
<a href="https://github.com/MeandNi/flutter_navigator_v2/blob/master/lib/router_example.dart">router_example.dart</a>，Router + Navigator + Page 實現路由狀態的統一管理</li>
  <li>
<a href="https://github.com/MeandNi/flutter_navigator_v2/blob/master/lib/">水果清單最佳實踐</a>，相對完整的一個案例，包含自定義 RouteInformationParser Model 和路由狀態管理操作。</li>
</ul>

<p><a href="https://github.com/MeandNi/flutter_navigator_v2">範例完整原始碼地址</a>。</p>

<h2 id="寫在最後">
<a class="anchor" href="#%E5%AF%AB%E5%9C%A8%E6%9C%80%E5%BE%8C" aria-hidden="true"><span class="octicon octicon-link"></span></a>寫在最後</h2>

<p>感謝 <a href="https://github.com/Vadaski">@Vadaski</a>、<a href="https://github.com/AlexV525">@Alex Li</a> 對本文的 Review。</p>

<p>如果你對本文還有任何疑問或者文章的建議，歡迎向我的 Github 中的範例倉庫送出 issue 
或者透過郵箱與我聯絡，我會及時回覆。</p>

<p><strong>本文作者：</strong> 楊加康</p>

<p>《Flutter 開發之旅從南到北》作者，現就職於小米瀏覽器團隊。</p>

<p>聯繫方式：yangjiakay@gmail.com</p>


        
      </div>
    </main>
  </div>
</div>


    
      <footer class="site-footer">
    <div class="container-fluid">
      <div class="row">
        <div class="col-md-12 site-footer__wrapper">
          <div class="site-footer__logo">
            <img src="/assets/images/shared/brand/flutter/logo/flutter-mono-81x100.png" alt="Flutter Logo" width="81" height="100">
          </div>
          <div class="site-footer__content">
            <ul class="site-footer__link-list">
                <li><a href="https://groups.google.com/forum/#!forum/flutter-dev">cfug-dev@</a></li>
                <li><a href="/tos" class="text-nowrap">使用條款</a></li>
                <li><a href="/brand" class="text-nowrap">品牌指南</a></li>
                <li><a href="/security" class="text-nowrap">安全性</a></li>
                <li><a href="https://policies.google.com/privacy?hl=zh-TW" class="text-nowrap">隱私權說明</a></li>
                <li><a href="https://flutter.dev/" class="text-nowrap">官方網站</a></li>
                <li><a href="/disclaimer" class="text-nowrap">免責宣告</a></li>
                <li><a href="https://flutter.tw" class="text-nowrap">Flutter 簡體中文文檔</a></li>
            </ul>
            <p class="licenses">
              參考中文內容需註明本站及連結作為出處，英文內容和範例程式碼均遵從源站授權協議。
            </p>
          </div>
        </div>
      </div>
    </div>
  </footer>
    

    <script src="https://cdn.staticfile.net/jquery/3.7.0/jquery.min.js" integrity="sha512-3gJwYpMe3QewGELv8k/BX9vcqhryRdzRMxVfq6ngyWXwo03GFEzjsUm8Q7RZcHPHksttq7/GFoxjCVUjkjvPdw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdn.staticfile.net/popper.js/1.16.1/umd/popper.min.js" integrity="sha512-ubuT8Z88WxezgSqf3RLuNi5lmjstiJcyezx34yIU2gAHonIi27Na7atqzUZCOoY4CExaoFumzOsFQ2Ch+I/HCw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdn.staticfile.net/bootstrap/4.6.2/js/bootstrap.min.js" integrity="sha512-7rusk8kGPFynZWu26OKbTeI+QPoYchtxsmPeBqkHIEXJxeun4yJ4ISYe7C6sz9wdxeE1Gk3VxsIWgCZTc+vX3g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdn.staticfile.net/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<!-- <script src="https://cdn.staticfile.net/js-cookie/3.0.5/js.cookie.min.js" integrity="sha512-nlp9/l96/EpjYBx7EP7pGASVXNe80hGhYAUrjeXnu/fyF5Py0/RXav4BBNs7n5Hx1WFhOEOWSAVjGeC3oKxDVQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>-->

    <script src="/assets/js/vendor/code-prettify/prettify.js?v=1714594673"></script>
    <script src="/assets/js/vendor/code-prettify/lang-css.js?v=1714594673"></script>
    <script src="/assets/js/vendor/code-prettify/lang-dart.js?v=1714594673"></script>
    <script src="/assets/js/vendor/code-prettify/lang-yaml.js?v=1714594673"></script>
    <script src="/assets/js/tabs.js?v=1714594673"></script>
    <script src="/assets/js/archive.js?v=1714594673"></script>
    <script src="/assets/js/main.js?v=1714594673"></script>

    

  </body>
</html>
