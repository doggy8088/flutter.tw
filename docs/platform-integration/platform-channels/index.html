<!DOCTYPE html><html lang="zh"><head>
    <meta charset="utf-8">
    <title>撰寫雙端平台程式碼（外掛編寫實現） | Flutter 中文文件 - Flutter 中文開發者網站 - Flutter</title>
    <link rel="icon" href="/assets/images/cn/flutter-icon.png">
    <link rel="apple-touch-icon" href="/assets/images/cn/flutter-320px.png">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="theme-color" content="#ffffff">
    <link rel="preconnect" href="https://fonts.googleapis.cn">
    <link rel="preconnect" href="https://fonts.gstatic.cn" crossorigin="">
    <!--      <meta name="google-site-verification" content="" />-->
     <script>
        (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','G-HPSFTRXK91');
      </script>
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-122680122-1', 'auto');
        ga('send', 'pageview');
      </script>
      <script>
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?459029b086376519fc9bf43c184e2a4f";
          var s = document.getElementsByTagName("script")[0];
          s.parentNode.insertBefore(hm, s);
        })();
      </script>
    

    <meta name="description" content="學習如何撰寫原生實現的程式碼。">
    <meta name="keywords" content="平台整合, Android,iOS,平台程式碼">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@flutterchina">

    <meta property="og:title" content="撰寫雙端平台程式碼（外掛編寫實現）">
    <meta property="og:url" content="https://flutter.tw/docs/platform-integration/platform-channels">
    <meta property="og:description" content="學習如何撰寫原生實現的程式碼。">
    <meta property="og:image" content="https://flutter.tw/assets/images/cn/flutter-cn-logo.png">

    <link rel="preconnect" href="https://files.flutter-io.cn">
    <link href="https://files.flutter-io.cn/fonts/flutter/fonts.css" rel="stylesheet">
    <link href="https://files.flutter-io.cn/fonts/material-icons/material-icons-symbols-outlined.css" rel="stylesheet">
    <!-- <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans+Text:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans+Mono:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" rel="stylesheet" /> -->
    <script>
      window.__CALLBACKS = [];
    </script>

    <link rel="stylesheet" href="/assets/css/main.css?v=1714594673">
    <link href="/assets/translator/css/translator.css" rel="stylesheet"></head>
  <body>

<!--    <section id="cookie-notice">
  <div class="container">
    <p>Google uses cookies to deliver its services, to personalize ads, and to 
      analyze traffic. You can adjust your privacy controls anytime in your 
      <a href="https://myaccount.google.com/data-and-personalization" target="_blank" rel="noopener">Google settings</a>. 
      <a href="https://policies.google.com/technologies/cookies" target="_blank" rel="noopener">Learn more</a>.
    </p>
    <button id="cookie-consent" class="btn btn-primary">Okay</button>
  </div>
</section>
-->

   
     <noscript>
       <iframe
         src="https://www.googletagmanager.com/ns.html?id=G-HPSFTRXK91"
         height="0" width="0" style="display:none;visibility:hidden">
       </iframe>
     </noscript>
   

    <div id="overlay-under-drawer"></div>

    

<header class="site-header">
  <nav class="navbar navbar-expand-md justify-content-start justify-content-md-between">
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <i class="material-symbols">menu</i>
    </button>

    <a class="navbar-brand" href="https://flutter.tw/">
      <img src="/assets/images/cn/flutter-cn-logo.png" alt="Flutter CN logo" height="37" width="129" class="align-middle">
    </a>

    <div id="navbarSupportedContent" class="collapse navbar-collapse flex-grow-0">
      <div class="site-header__sheet-bg" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      </div>
      <div class="site-header__sheet">
        <ul class="navbar-nav">
          <div class="site-sidebar site-sidebar--header d-md-none">
            <ul class="nav flex-column"><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#header-sidenav-1" role="button" aria-expanded="false" aria-controls="header-sidenav-1">開始使用 Flutter</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-1">
            <li class="nav-item">
    <a class="nav-link" href="/get-started/install">安裝和環境設定</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/get-started/test-drive">開發體驗初探</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/get-started/codelab">編寫第一個 Flutter 應用</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/get-started/learn-more">瞭解更多</a>
  </li>

<div class="dropdown-divider"></div>
<li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#header-sidenav-1-6" href="#header-sidenav-1-6" role="button" aria-expanded="false" aria-controls="header-sidenav-1-6">擁有其他平台開發經驗？
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-1-6">
      <li class="nav-item">
    <a class="nav-link" href="/get-started/flutter-for/android-devs">給 Android 開發者的 Flutter 指南</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/get-started/flutter-for/swiftui-devs">給 iOS SwiftUI 開發者的 Flutter 指南</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/get-started/flutter-for/uikit-devs">給 iOS UIKit 開發者的 Flutter 指南</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/get-started/flutter-for/react-native-devs">給 React Native 開發者的 Flutter 指南</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/get-started/flutter-for/web-devs">給 Web 開發者的 Flutter 指南</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/get-started/flutter-for/xamarin-forms-devs">給 Xamarin.Forms 開發者的 Flutter 指南</a>
  </li>

<div class="dropdown-divider"></div><li class="nav-item">
    <a class="nav-link" href="/get-started/flutter-for/declarative">宣告式 UI 介紹</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/get-started/flutter-for/dart-swift-concurrency">Flutter 對比 Swift 的併發</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link" href="https://dart.tw.gh.miniasp.com/overview" target="_blank" rel="noopener">Dart 語言概覽</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#header-sidenav-2" role="button" aria-expanded="false" aria-controls="header-sidenav-2">保持版本更新</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-2">
            <li class="nav-item">
    <a class="nav-link" href="/release/upgrade">版本升級</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/release/archive">SDK 版本清單</a>
  </li>

<div class="dropdown-divider"></div>
<li class="nav-item">
    <a class="nav-link" href="/release/whats-new">最近更新</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/release/release-notes">版本發行注記</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/release/breaking-changes">破壞性改動</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/release/compatibility-policy">相容性策略</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#header-sidenav-3" role="button" aria-expanded="false" aria-controls="header-sidenav-3">教程和範例程式碼</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-3">
            <li class="nav-item">
    <a class="nav-link" href="/codelabs">Codelabs</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook">實用教程 (Cookbook)</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="https://flutter.github.io/samples/" target="_blank" rel="noopener">GitHub 上的範例應用</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#header-sidenav-4" role="button" aria-expanded="false" aria-controls="header-sidenav-4">應用解決方案</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-4">
            <li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#header-sidenav-4-1" href="#header-sidenav-4-1" role="button" aria-expanded="false" aria-controls="header-sidenav-4-1">遊戲
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-4-1">
      <li class="nav-item">
    <a class="nav-link" href="/resources/games-toolkit">介紹</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/games/achievements-leaderboard">新增成就和排行榜</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/plugins/google-mobile-ads">新增廣告</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/games/firestore-multiplayer">新增多人遊戲支援</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="https://codelabs.developers.google.com/codelabs/flutter-in-app-purchases#0" target="_blank" rel="noopener">新增應用內購買</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="https://firebase.google.cn/codelabs/firebase-auth-in-flutter-apps#0" target="_blank" rel="noopener">新增使用者身份驗證</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="https://firebase.google.cn/docs/crashlytics/get-started?platform=flutter" target="_blank" rel="noopener">使用 Crashlytics 除錯</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#header-sidenav-4-2" href="#header-sidenav-4-2" role="button" aria-expanded="false" aria-controls="header-sidenav-4-2">新聞
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-4-2">
      <li class="nav-item">
    <a class="nav-link" href="/resources/news-toolkit">建立新聞應用程式</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#header-sidenav-4-3" href="#header-sidenav-4-3" role="button" aria-expanded="false" aria-controls="header-sidenav-4-3">盈利
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-4-3">
      <li class="nav-item">
    <a class="nav-link" href="https://flutter.dev/monetization" target="_blank" rel="noopener">介紹</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="https://codelabs.developers.google.com/codelabs/flutter-in-app-purchases#0" target="_blank" rel="noopener">新增應用內購買</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#header-sidenav-4-4" href="#header-sidenav-4-4" role="button" aria-expanded="false" aria-controls="header-sidenav-4-4">地圖
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-4-4">
      <li class="nav-item">
    <a class="nav-link" href="https://developers.google.com/maps/flutter-package" target="_blank" rel="noopener">為應用程式新增地圖</a>
  </li>

</ul>
  </li>
</ul>
        </li><li aria-hidden="true"><div class="sidebar-primary-divider"></div></li>
    <li class="nav-header">使用者介面</li>
    <li class="nav-item">
          <a class=" nav-link" href="/ui">介紹</a>
        </li>
      <li class="nav-item">
          <a class=" nav-link" href="/ui/widgets">Widget 目錄</a>
        </li>
      <li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#header-sidenav-9" role="button" aria-expanded="false" aria-controls="header-sidenav-9">佈局建立</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-9">
            <li class="nav-item">
    <a class="nav-link" href="/ui/layout">介紹</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/layout/tutorial">佈局建立教程</a>
  </li>

<li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#header-sidenav-9-3" href="/ui/layout/lists" role="button" aria-expanded="false" aria-controls="header-sidenav-9-3">清單 &amp; 網格
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-9-3">
      <li class="nav-item">
    <a class="nav-link" href="/cookbook/lists/basic-list">建立與使用清單</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/lists/horizontal-list">建立一個橫向清單</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/lists/grid-lists">建立一個網格檢視</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/lists/mixed-list">建立包含不同型別元素的清單</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/lists/spaced-items">建立元素之間包含間隔的清單</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/lists/long-lists">處理長清單</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#header-sidenav-9-4" href="/ui/layout/scrolling" role="button" aria-expanded="false" aria-controls="header-sidenav-9-4">捲動
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-9-4">
      <li class="nav-item">
    <a class="nav-link" href="/ui/layout/scrolling">概覽</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/layout/scrolling/slivers">使用 Slivers 實現各種捲動需求</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/lists/floating-app-bar">在清單開頭新增一個浮動的頂欄</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/effects/parallax-scrolling">建立一個平行錯位捲動的效果</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#header-sidenav-9-5" href="/ui/layout/responsive" role="button" aria-expanded="false" aria-controls="header-sidenav-9-5">回應式設計
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-9-5">
      <li class="nav-item">
    <a class="nav-link" href="/ui/layout/responsive/adaptive-responsive">建立回應式和自適應的應用</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/layout/responsive/building-adaptive-apps">建立自適應應用</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/design/orientation">根據旋轉角度更新應用的介面元素</a>
  </li>

</ul>
  </li>
</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#header-sidenav-10" role="button" aria-expanded="false" aria-controls="header-sidenav-10">設計 &amp; 主題</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-10">
            <li class="nav-item">
    <a class="nav-link" href="/cookbook/design/themes">共享主題樣式</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/design/material">Material 設計</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/release/breaking-changes/material-3-migration">遷移至 Material 3</a>
  </li>

<li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#header-sidenav-10-4" href="/ui/design/text" role="button" aria-expanded="false" aria-controls="header-sidenav-10-4">文字
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-10-4">
      <li class="nav-item">
    <a class="nav-link" href="/ui/design/text/typography">字型 &amp; 版式</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/design/fonts">使用自定義字型</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/design/package-fonts">將字型從 package 中對外暴露</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="https://pub.dev/packages/google_fonts" target="_blank" rel="noopener">Google 字型 package</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#header-sidenav-10-5" href="/ui/design/graphics" role="button" aria-expanded="false" aria-controls="header-sidenav-10-5">自定義圖形
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-10-5">
      <li class="nav-item">
    <a class="nav-link" href="/ui/design/graphics/fragment-shaders">使用自定義的著色器</a>
  </li>

</ul>
  </li>
</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#header-sidenav-11" role="button" aria-expanded="false" aria-controls="header-sidenav-11">互動</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-11">
            <li class="nav-item">
    <a class="nav-link" href="/ui/interactivity">為你的應用新增互動</a>
  </li>

<li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#header-sidenav-11-2" href="/ui/interactivity/gestures" role="button" aria-expanded="false" aria-controls="header-sidenav-11-2">手勢
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-11-2">
      <li class="nav-item">
    <a class="nav-link" href="/ui/interactivity/gestures">介紹</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/gestures/handling-taps">處理點選</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/interactivity/gestures/drag-outside">跨應用拖放物件</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/effects/drag-a-widget">拖動介面元素</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/gestures/ripples">新增 Material 風格的水波紋</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/gestures/dismissible">實現滑動取消</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#header-sidenav-11-3" href="/ui/interactivity/input" role="button" aria-expanded="false" aria-controls="header-sidenav-11-3">輸入 &amp; 表單
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-11-3">
      <li class="nav-item">
    <a class="nav-link" href="/cookbook/forms/text-input">建立輸入框並且調整樣式</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/forms/retrieve-input">讀取輸入框的內容</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/forms/text-field-changes">處理輸入框的內容變動</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/forms/focus">管理輸入框之間的焦點</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/forms/validation">建立具有校驗功能的表單</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link" href="/cookbook/design/snackbars">展示 SnackBar</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/interactivity/actions-and-shortcuts">實現快捷方式和捷徑</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/interactivity/focus">管理鍵盤焦點</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#header-sidenav-12" role="button" aria-expanded="false" aria-controls="header-sidenav-12">資源 &amp; 媒體</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-12">
            <li class="nav-item">
    <a class="nav-link" href="/ui/assets/assets-and-images">新增資源和圖片</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/images/network-image">載入網路圖片</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/images/fading-in-images">從佔位圖轉場到圖片</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/plugins/play-video">播放及暫停影片</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#header-sidenav-13" role="button" aria-expanded="false" aria-controls="header-sidenav-13">導向 &amp; 路由</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-13">
            <li class="nav-item">
    <a class="nav-link" href="/ui/navigation">概覽</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/design/tabs">新增 Tab 到應用中</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/navigation/navigation-basics">導向至新頁面並回傳</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/navigation/passing-data">傳遞資料到新頁面</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/navigation/returning-data">從新頁面回傳資料</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/design/drawer">在頁面上新增抽屜</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/navigation/deep-linking">設定 Deeplink</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/navigation/set-up-app-links">設定 Android Deeplink</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/navigation/set-up-universal-links">設定 iOS Universal Link</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/navigation/url-strategies">設定 Web 的 URL 策略</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#header-sidenav-14" role="button" aria-expanded="false" aria-controls="header-sidenav-14">動畫 &amp; 轉場</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-14">
            <li class="nav-item">
    <a class="nav-link" href="/ui/animations">概覽</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/animations/tutorial">教程</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/animations/implicit-animations">隱式動畫</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/animation/animated-container">轉場 Container 的屬性</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/animation/opacity-animation">漸入漸出 widget</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/animations/hero-animations">Hero（跨頁面共享元素）動畫</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/animation/page-route-animation">頁面轉場動畫</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/animation/physics-simulation">模擬物理屬性動畫</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/animations/staggered-animations">交錯動畫</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/effects/staggered-menu-animation">建立選單的交錯動畫</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/animations/overview">API 概覽</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#header-sidenav-15" role="button" aria-expanded="false" aria-controls="header-sidenav-15">無障礙 &amp; 國際化</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-15">
            <li class="nav-item">
    <a class="nav-link" href="/ui/accessibility-and-internationalization/accessibility">無障礙</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/accessibility-and-internationalization/internationalization">國際化</a>
  </li>


</ul>
        </li><li aria-hidden="true"><div class="sidebar-primary-divider"></div></li>
    <li class="nav-header">介面以外的開發</li>
    <li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#header-sidenav-18" role="button" aria-expanded="false" aria-controls="header-sidenav-18">資料呼叫和後端</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-18">
            <li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#header-sidenav-18-1" href="/data-and-backend/state-mgmt" role="button" aria-expanded="false" aria-controls="header-sidenav-18-1">狀態管理
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-18-1">
      <li class="nav-item">
    <a class="nav-link" href="/data-and-backend/state-mgmt/intro">介紹</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/data-and-backend/state-mgmt/declarative">從宣告式的角度思考</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/data-and-backend/state-mgmt/ephemeral-vs-app">短暫狀態 &amp; 持久狀態</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/data-and-backend/state-mgmt/simple">簡單的狀態管理</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/data-and-backend/state-mgmt/options">狀態管理參考</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#header-sidenav-18-2" href="/data-and-backend/networking" role="button" aria-expanded="false" aria-controls="header-sidenav-18-2">網路 &amp; http
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-18-2">
      <li class="nav-item">
    <a class="nav-link" href="/data-and-backend/networking">概覽</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/networking/fetch-data">從網路上獲取資料</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/networking/authenticated-requests">建立需要認證的請求</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/networking/send-data">傳送資料到伺服器</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/networking/update-data">更新網路上的資料</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/networking/delete-data">刪除網路上的資料</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/networking/web-sockets">WebSocket 通訊</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#header-sidenav-18-3" href="/data-and-backend/serialization" role="button" aria-expanded="false" aria-controls="header-sidenav-18-3">序列化
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-18-3">
      <li class="nav-item">
    <a class="nav-link" href="/data-and-backend/serialization/json">JSON 序列化</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/networking/background-parsing">在後台處理 JSON 解析</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#header-sidenav-18-4" href="/data-and-backend/persistence" role="button" aria-expanded="false" aria-controls="header-sidenav-18-4">持久化
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-18-4">
      <li class="nav-item">
    <a class="nav-link" href="/cookbook/persistence/key-value">將 key-value 資料儲存在硬碟上</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/persistence/reading-writing-files">讀寫檔案</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/persistence/sqlite">利用 SQLite 持久化資料</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link" href="/data-and-backend/firebase">Firebase</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/data-and-backend/google-apis">Google APIs</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link active collapsable" data-toggle="collapse" href="#header-sidenav-19" role="button" aria-expanded="true" aria-controls="header-sidenav-19">平台整合</a>
      
          <ul class="nav flex-column flex-nowrap collapse show" id="header-sidenav-19">
            <li class="nav-item">
    <a class="nav-link" href="/reference/supported-platforms">支援的平台</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/desktop">建立桌面端應用</a>
  </li>

<li class="nav-item">
    <a class="nav-link active" href="/platform-integration/platform-channels">撰寫平台程式碼 (外掛編寫實現)</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/platform-adaptations">自動化平台適配</a>
  </li>

<li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#header-sidenav-19-5" href="/platform-integration/android" role="button" aria-expanded="false" aria-controls="header-sidenav-19-5">Android 平台
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-19-5">
      <li class="nav-item">
    <a class="nav-link" href="/platform-integration/android/splash-screen">新增螢幕閃爍頁</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/android/c-interop">呼叫原生程式碼</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/android/platform-views">託管 Android 原生檢視</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/android/restore-state-android">在 Android 上恢復狀態</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/android/chromeos">建立適合 Chrome OS 的 Android 應用</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#header-sidenav-19-6" href="/platform-integration/ios" role="button" aria-expanded="false" aria-controls="header-sidenav-19-6">iOS 平台
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-19-6">
      <li class="nav-item">
    <a class="nav-link" href="/platform-integration/ios/apple-frameworks">使用 Apple 的系統函式庫</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/ios/launch-screen">新增啟動頁</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/ios/ios-app-clip">新增 iOS App Clip 支援</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/ios/app-extensions">新增 iOS App 擴充套件</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/ios/c-interop">呼叫原生程式碼</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/ios/platform-views">託管 iOS 原生檢視</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/ios/ios-debugging">iOS 平台除錯</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/ios/restore-state-ios">在 iOS 上恢復狀態</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#header-sidenav-19-7" href="/platform-integration/linux" role="button" aria-expanded="false" aria-controls="header-sidenav-19-7">Linux 作業系統平台
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-19-7">
      <li class="nav-item">
    <a class="nav-link" href="/platform-integration/linux/building">建立 Linux 桌面軟體</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#header-sidenav-19-8" href="/platform-integration/macos" role="button" aria-expanded="false" aria-controls="header-sidenav-19-8">macOS 作業系統平台
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-19-8">
      <li class="nav-item">
    <a class="nav-link" href="/platform-integration/macos/building">建立 macOS 應用</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/macos/c-interop">C 語言程式碼整合及呼叫</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#header-sidenav-19-9" href="/platform-integration/web" role="button" aria-expanded="false" aria-controls="header-sidenav-19-9">Web 平台
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-19-9">
      <li class="nav-item">
    <a class="nav-link" href="/platform-integration/web/building">建立一個 Web 應用</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/web/faq">Web 平台常見問題</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/web/renderers">Web 平台渲染器</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/web/initialization">自定義 Web 應用初始化</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/web/web-images">在網頁裡顯示圖片</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#header-sidenav-19-10" href="/platform-integration/windows" role="button" aria-expanded="false" aria-controls="header-sidenav-19-10">Windows 作業系統平台
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-19-10">
      <li class="nav-item">
    <a class="nav-link" href="/platform-integration/windows/building">建立 Windows 桌面軟體</a>
  </li>

</ul>
  </li>
</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#header-sidenav-20" role="button" aria-expanded="false" aria-controls="header-sidenav-20">Package 和外掛</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-20">
            <li class="nav-item">
    <a class="nav-link" href="/packages-and-plugins/using-packages">使用 package 和外掛</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/packages-and-plugins/developing-packages">開發 Package 和外掛</a>
  </li>

<div class="dropdown-divider"></div>
<li class="nav-item">
    <a class="nav-link" href="/packages-and-plugins/favorites">Flutter Favorites 專案</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="https://pub.dev/flutter" target="_blank" rel="noopener">Package 倉庫</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#header-sidenav-21" role="button" aria-expanded="false" aria-controls="header-sidenav-21">測試和除錯</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-21">
            <li class="nav-header">測試</li><li class="nav-item">
    <a class="nav-link" href="/testing/overview">概覽</a>
  </li>

<li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#header-sidenav-21-3" href="#header-sidenav-21-3" role="button" aria-expanded="false" aria-controls="header-sidenav-21-3">單元測試
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-21-3">
      <li class="nav-item">
    <a class="nav-link" href="/cookbook/testing/unit/introduction">介紹</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/testing/unit/mocking">模擬依賴</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#header-sidenav-21-4" href="#header-sidenav-21-4" role="button" aria-expanded="false" aria-controls="header-sidenav-21-4">Widget 測試
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-21-4">
      <li class="nav-item">
    <a class="nav-link" href="/cookbook/testing/widget/introduction">介紹</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/testing/widget/finders">尋找 widgets</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/testing/widget/scrolling">模擬捲動</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/testing/widget/tap-drag">模擬使用者操作</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#header-sidenav-21-5" href="#header-sidenav-21-5" role="button" aria-expanded="false" aria-controls="header-sidenav-21-5">整合測試
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-21-5">
      <li class="nav-item">
    <a class="nav-link" href="/cookbook/testing/integration/introduction">介紹</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/testing/integration-tests">編寫並執行整合測試</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/testing/integration/profiling">衡量整合測試的效能指標</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link" href="/testing/testing-plugins">測試外掛</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/testing/plugins-in-tests">在測試中處理外掛程式碼</a>
  </li>

<li class="nav-header">除錯</li><li class="nav-item">
    <a class="nav-link" href="/testing/debugging">除錯工具</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/testing/code-debugging">透過程式碼除錯應用</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/testing/native-debugging">使用原生語言的除錯</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/testing/build-modes">Flutter 的建立模式</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/testing/common-errors">常見的 Flutter 錯誤</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/testing/errors">處理錯誤</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/maintenance/error-reporting">將錯誤上報到收集服務</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#header-sidenav-22" role="button" aria-expanded="false" aria-controls="header-sidenav-22">效能最佳化</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-22">
            <li class="nav-item">
    <a class="nav-link" href="/perf">概覽</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/perf/impeller">使用 Impeller</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/perf/best-practices">效能最佳實踐</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/perf/app-size">應用大小</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/perf/deferred-components">延遲載入元件</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/perf/rendering-performance">渲染效能</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/perf/ui-performance">效能分析</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/perf/web-performance">Web 效能分析</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/perf/shader">著色器編譯時卡頓</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/perf/metrics">效能指標</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/perf/isolates">併發與隔離</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/perf/faq">效能常見問題和回答</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/perf/appendix">附錄</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#header-sidenav-23" role="button" aria-expanded="false" aria-controls="header-sidenav-23">打包部署</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-23">
            <li class="nav-item">
    <a class="nav-link" href="/deployment/obfuscate">混淆 Dart 程式碼</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/deployment/flavors">設定 flavors</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/deployment/android">建立和發布為 Android 應用</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/deployment/ios">建立和發布為 iOS 應用</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/deployment/macos">建立和發布為 macOS 應用</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/deployment/linux">建立和發布為 Linux 應用</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/deployment/windows">建立和發布為 Windows 應用</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/deployment/web">建立和發布為 Web 應用</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/deployment/cd">持續部署</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#header-sidenav-24" role="button" aria-expanded="false" aria-controls="header-sidenav-24">將 Flutter 新增到現有應用</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-24">
            <li class="nav-item">
    <a class="nav-link" href="/add-to-app">介紹</a>
  </li>

<li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#header-sidenav-24-2" href="/add-to-app/android" role="button" aria-expanded="false" aria-controls="header-sidenav-24-2">將 Flutter 新增到現有 Android 應用
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-24-2">
      <li class="nav-item">
    <a class="nav-link" href="/add-to-app/android/project-setup">工程設定</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/add-to-app/android/add-flutter-screen">新增單個 Flutter 頁面</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/add-to-app/android/add-flutter-fragment">新增一個 Flutter Fragment</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/add-to-app/android/add-flutter-view">新增 Flutter 檢視</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/add-to-app/android/plugin-setup">Plugin 初始化</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#header-sidenav-24-3" href="/add-to-app/ios" role="button" aria-expanded="false" aria-controls="header-sidenav-24-3">將 Flutter 新增到現有 iOS 應用
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-24-3">
      <li class="nav-item">
    <a class="nav-link" href="/add-to-app/ios/project-setup">工程設定</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/add-to-app/ios/add-flutter-screen">新增單個 Flutter 頁面</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link" href="/add-to-app/debugging">除錯及熱過載</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/add-to-app/multiple-flutters">多個 Flutter 實例</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/add-to-app/performance">載入順序和效能</a>
  </li>


</ul>
        </li><li aria-hidden="true"><div class="sidebar-primary-divider"></div></li>
    <li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#header-sidenav-26" role="button" aria-expanded="false" aria-controls="header-sidenav-26">工具 &amp; 程式碼編輯器</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-26">
            <li class="nav-item">
    <a class="nav-link" href="/tools/android-studio">Android Studio &amp; IntelliJ</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/vs-code">Visual Studio Code</a>
  </li>

<li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#header-sidenav-26-3" href="/tools/devtools" role="button" aria-expanded="false" aria-controls="header-sidenav-26-3">DevTools
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-26-3">
      <li class="nav-item">
    <a class="nav-link" href="/tools/devtools/overview">概覽</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/android-studio">在 Android Studio &amp; IntelliJ 中安裝 DevTools</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/vscode">在 VS Code 中安裝 DevTools</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/cli">利用終端指令安裝 DevTools</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/inspector">Flutter inspector</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/performance">效能檢視</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/cpu-profiler">CPU 效能檢視</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/memory">記憶體檢視</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/console">除錯控制條檢視</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/network">網路檢視</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/debugger">除錯工具 Debugger</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/logging">日誌檢視</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/app-size">應用體積工具</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/extensions">DevTools 擴充套件工具</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/release-notes">發布日誌</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link" href="/tools/sdk">SDK 概覽</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/pubspec">Flutter pubspec 選項</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/flutter-fix">自動修復</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/formatting">程式碼格式化</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#header-sidenav-27" role="button" aria-expanded="false" aria-controls="header-sidenav-27">Flutter 相關概念</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-27">
            <li class="nav-item">
    <a class="nav-link" href="/resources/architectural-overview">Flutter 架構概覽</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/resources/inside-flutter">Flutter 工作原理</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/layout/constraints">理解佈局約束</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/testing/build-modes">Flutter 建立模式</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/hot-reload">熱過載</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#header-sidenav-28" role="button" aria-expanded="false" aria-controls="header-sidenav-28">開發者資源清單</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="header-sidenav-28">
            <li class="nav-header">學習</li><li class="nav-item">
    <a class="nav-link" href="/resources/faq">常見問題解答</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/resources/books">相關書籍</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/resources/videos">相關影片</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/resources/courses">相關課程</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/resources/bootstrap-into-dart">學習 Dart</a>
  </li>

<li class="nav-header">貢獻</li><li class="nav-item">
    <a class="nav-link" href="/resources/bug-reports">提出 Bug</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="https://github.com/flutter/flutter/blob/master/CONTRIBUTING.md" target="_blank" rel="noopener">為 Flutter 做出貢獻</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="https://github.com/flutter/flutter/issues?q=is%3Aopen+is%3Aissue+label%3A%22design+doc%22" target="_blank" rel="noopener">設計文件</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link  collapsable" data-toggle="collapse" href="#header-sidenav-29" role="button" aria-expanded="true" aria-controls="header-sidenav-29">更多資料</a>
      
          <ul class="nav flex-column flex-nowrap collapse show" id="header-sidenav-29">
            <li class="nav-item">
    <a class="nav-link" href="/dash">瞭解 Dash</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/reference/widgets">Flutter Widget 清單</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="https://api.flutter.dev" target="_blank" rel="noopener">Flutter API 文件</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/reference/flutter-cli">Flutter 指令行文件</a>
  </li>


</ul>
        </li></ul>

          </div>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" id="platform-navbar-dropdown" href="https://flutter.cn/multi-platform" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
               多平臺
            </a>
            <div class="dropdown-menu" aria-labelledby="platform-navbar-dropdown">
              <a class="dropdown-item" href="https://flutter.cn/multi-platform/mobile">行動平台</a>
              <a class="dropdown-item" href="https://flutter.cn/multi-platform/web">Web 平台</a>
              <a class="dropdown-item" href="https://flutter.cn/multi-platform/desktop">桌面平台</a>
              <a class="dropdown-item" href="https://flutter.cn/multi-platform/embedded">嵌入式平台</a>
            </div>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" id="dev-navbar-dropdown" href="https://flutter.cn/" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
               開發
            </a>
            <div class="dropdown-menu" aria-labelledby="dev-navbar-dropdown">
              <a class="dropdown-item" href="https://flutter.cn/learn">學習資源</a>
              <a class="dropdown-item" href="https://pub.dev/flutter/favorites" target="_blank">Flutter Favorites 系列外掛</a>
              <a class="dropdown-item" href="https://pub.dev/" target="_blank">使用 Packages</a>
              <a class="dropdown-item" href="https://flutter.cn/monetization">盈利</a>
              <a class="dropdown-item" href="https://flutter.cn/games">遊戲</a>
              <a class="dropdown-item" href="https://flutter.cn/news">新聞</a>
            </div>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" id="ecosystem-navbar-dropdown" href="https://flutter.cn/ecosystem" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
               生態
            </a>
            <div class="dropdown-menu" aria-labelledby="ecosystem-navbar-dropdown">
              <a class="dropdown-item" href="https://flutter.cn/community">社群</a>
              <!-- <a class="dropdown-item" href="https://flutter.cn/events">Events</a> -->
              <a class="dropdown-item" href="https://flutter.cn/culture">文化</a>
            </div>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="https://flutter.cn/showcase">成功故事</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="https://flutter.cn/about">關於中文文件</a>
          </li>
          <li class="nav-item dropdown docs-item">
            <a class="nav-link dropdown-toggle" id="docs-navbar-dropdown" href="/" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
               文件
            </a>
            <div class="dropdown-menu" aria-labelledby="docs-navbar-dropdown">
              <a class="dropdown-item " href="/posts">最新更新</a>
              <a class="dropdown-item " href="/get-started/editor">IDE 整合</a>
              <a class="dropdown-item " href="/tools/hot-reload">熱過載</a>
              <a class="dropdown-item " href="/perf/ui-performance">效能分析</a>
              <a class="dropdown-item " href="/get-started/install">安裝 Flutter</a>
              <a class="dropdown-item " href="/tools/devtools/overview">開發者工具</a>
              <a class="dropdown-item " href="/cookbook">實用教程</a>
              <a class="dropdown-item " href="/codelabs">Codelabs</a>
              <a class="dropdown-item " href="/community/tutorials">社群教程</a>
            </div>
          </li>
        </ul>
        <form action="/search/" class="site-header__search form-inline">
          <input class="site-header__searchfield form-control" type="search" name="q" id="q" autocomplete="off" placeholder="Search" aria-label="Search">
        </form>
      </div>
    </div>
    <div class="site-header__social navbar-nav flex-row">
      <a class="nav-item nav-link nav-icon" href="https://twitter.com/FlutterDev" aria-label="Open Flutter's Twitter in a new tab" target="_blank" rel="noreferrer">
        <svg><use href="/assets/images/social/twitter.svg#twitter"></use></svg>
      </a>
      <a class="nav-item nav-link nav-icon" href="https://www.youtube.com/flutterdev" aria-label="Open Flutter's YouTube in a new tab" target="_blank" rel="noreferrer">
        <svg><use href="/assets/images/social/youtube.svg#youtube"></use></svg>
      </a>
      <a class="nav-item nav-link nav-icon" href="https://medium.com/flutter" aria-label="Open Flutter's Medium blog in a new tab" target="_blank" rel="noreferrer">
        <svg><use href="/assets/images/social/medium.svg#medium"></use></svg>
      </a>
      <a class="nav-item nav-link nav-icon" href="https://github.com/flutter" aria-label="Open Flutter's GitHub in a new tab" target="_blank" rel="noreferrer">
        <svg><use href="/assets/images/social/github.svg#github"></use></svg>
      </a>
    </div>
    <a class="site-header__cta btn btn-primary" href="/get-started/install/">開始使用
      </a>
    </nav>
</header>


    <div class="site-banner site-banner--default" role="alert">
  Flutter 3.19 已發布！
  <!-- <p>Flutter and Dart」s latest releases are helping to
  define the future of app development.
  <a href="https://medium.com/flutter/starting-2024-strong-with-flutter-and-dart-cae9845264fe">Read the blog</a> to learn more.
  </p>
  <p>Help improve Flutter! Take our <a href="https://google.qualtrics.com/jfe/form/SV_6gplhwAySeRz7Gm?Source=Website">survey</a>.</p> -->
</div>


    <div class="container-fluid position-relative">
  <div class="row flex-xl-nowrap">
    <div class="fixed-col site-sidebar site-sidebar--fixed col-12 col-md-3 col-xl-2 d-none d-md-block" data-fixed-column="">
      
      <ul class="nav flex-column"><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#fixed-sidenav-1" role="button" aria-expanded="false" aria-controls="fixed-sidenav-1">開始使用 Flutter</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-1">
            <li class="nav-item">
    <a class="nav-link" href="/get-started/install">安裝和環境設定</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/get-started/test-drive">開發體驗初探</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/get-started/codelab">編寫第一個 Flutter 應用</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/get-started/learn-more">瞭解更多</a>
  </li>

<div class="dropdown-divider"></div>
<li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#fixed-sidenav-1-6" href="#fixed-sidenav-1-6" role="button" aria-expanded="false" aria-controls="fixed-sidenav-1-6">擁有其他平台開發經驗？
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-1-6">
      <li class="nav-item">
    <a class="nav-link" href="/get-started/flutter-for/android-devs">給 Android 開發者的 Flutter 指南</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/get-started/flutter-for/swiftui-devs">給 iOS SwiftUI 開發者的 Flutter 指南</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/get-started/flutter-for/uikit-devs">給 iOS UIKit 開發者的 Flutter 指南</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/get-started/flutter-for/react-native-devs">給 React Native 開發者的 Flutter 指南</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/get-started/flutter-for/web-devs">給 Web 開發者的 Flutter 指南</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/get-started/flutter-for/xamarin-forms-devs">給 Xamarin.Forms 開發者的 Flutter 指南</a>
  </li>

<div class="dropdown-divider"></div><li class="nav-item">
    <a class="nav-link" href="/get-started/flutter-for/declarative">宣告式 UI 介紹</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/get-started/flutter-for/dart-swift-concurrency">Flutter 對比 Swift 的併發</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link" href="https://dart.tw.gh.miniasp.com/overview" target="_blank" rel="noopener">Dart 語言概覽</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#fixed-sidenav-2" role="button" aria-expanded="false" aria-controls="fixed-sidenav-2">保持版本更新</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-2">
            <li class="nav-item">
    <a class="nav-link" href="/release/upgrade">版本升級</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/release/archive">SDK 版本清單</a>
  </li>

<div class="dropdown-divider"></div>
<li class="nav-item">
    <a class="nav-link" href="/release/whats-new">最近更新</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/release/release-notes">版本發行注記</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/release/breaking-changes">破壞性改動</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/release/compatibility-policy">相容性策略</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#fixed-sidenav-3" role="button" aria-expanded="false" aria-controls="fixed-sidenav-3">教程和範例程式碼</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-3">
            <li class="nav-item">
    <a class="nav-link" href="/codelabs">Codelabs</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook">實用教程 (Cookbook)</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="https://flutter.github.io/samples/" target="_blank" rel="noopener">GitHub 上的範例應用</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#fixed-sidenav-4" role="button" aria-expanded="false" aria-controls="fixed-sidenav-4">應用解決方案</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-4">
            <li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#fixed-sidenav-4-1" href="#fixed-sidenav-4-1" role="button" aria-expanded="false" aria-controls="fixed-sidenav-4-1">遊戲
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-4-1">
      <li class="nav-item">
    <a class="nav-link" href="/resources/games-toolkit">介紹</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/games/achievements-leaderboard">新增成就和排行榜</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/plugins/google-mobile-ads">新增廣告</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/games/firestore-multiplayer">新增多人遊戲支援</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="https://codelabs.developers.google.com/codelabs/flutter-in-app-purchases#0" target="_blank" rel="noopener">新增應用內購買</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="https://firebase.google.cn/codelabs/firebase-auth-in-flutter-apps#0" target="_blank" rel="noopener">新增使用者身份驗證</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="https://firebase.google.cn/docs/crashlytics/get-started?platform=flutter" target="_blank" rel="noopener">使用 Crashlytics 除錯</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#fixed-sidenav-4-2" href="#fixed-sidenav-4-2" role="button" aria-expanded="false" aria-controls="fixed-sidenav-4-2">新聞
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-4-2">
      <li class="nav-item">
    <a class="nav-link" href="/resources/news-toolkit">建立新聞應用程式</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#fixed-sidenav-4-3" href="#fixed-sidenav-4-3" role="button" aria-expanded="false" aria-controls="fixed-sidenav-4-3">盈利
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-4-3">
      <li class="nav-item">
    <a class="nav-link" href="https://flutter.dev/monetization" target="_blank" rel="noopener">介紹</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="https://codelabs.developers.google.com/codelabs/flutter-in-app-purchases#0" target="_blank" rel="noopener">新增應用內購買</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#fixed-sidenav-4-4" href="#fixed-sidenav-4-4" role="button" aria-expanded="false" aria-controls="fixed-sidenav-4-4">地圖
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-4-4">
      <li class="nav-item">
    <a class="nav-link" href="https://developers.google.com/maps/flutter-package" target="_blank" rel="noopener">為應用程式新增地圖</a>
  </li>

</ul>
  </li>
</ul>
        </li><li aria-hidden="true"><div class="sidebar-primary-divider"></div></li>
    <li class="nav-header">使用者介面</li>
    <li class="nav-item">
          <a class=" nav-link" href="/ui">介紹</a>
        </li>
      <li class="nav-item">
          <a class=" nav-link" href="/ui/widgets">Widget 目錄</a>
        </li>
      <li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#fixed-sidenav-9" role="button" aria-expanded="false" aria-controls="fixed-sidenav-9">佈局建立</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-9">
            <li class="nav-item">
    <a class="nav-link" href="/ui/layout">介紹</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/layout/tutorial">佈局建立教程</a>
  </li>

<li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#fixed-sidenav-9-3" href="/ui/layout/lists" role="button" aria-expanded="false" aria-controls="fixed-sidenav-9-3">清單 &amp; 網格
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-9-3">
      <li class="nav-item">
    <a class="nav-link" href="/cookbook/lists/basic-list">建立與使用清單</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/lists/horizontal-list">建立一個橫向清單</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/lists/grid-lists">建立一個網格檢視</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/lists/mixed-list">建立包含不同型別元素的清單</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/lists/spaced-items">建立元素之間包含間隔的清單</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/lists/long-lists">處理長清單</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#fixed-sidenav-9-4" href="/ui/layout/scrolling" role="button" aria-expanded="false" aria-controls="fixed-sidenav-9-4">捲動
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-9-4">
      <li class="nav-item">
    <a class="nav-link" href="/ui/layout/scrolling">概覽</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/layout/scrolling/slivers">使用 Slivers 實現各種捲動需求</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/lists/floating-app-bar">在清單開頭新增一個浮動的頂欄</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/effects/parallax-scrolling">建立一個平行錯位捲動的效果</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#fixed-sidenav-9-5" href="/ui/layout/responsive" role="button" aria-expanded="false" aria-controls="fixed-sidenav-9-5">回應式設計
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-9-5">
      <li class="nav-item">
    <a class="nav-link" href="/ui/layout/responsive/adaptive-responsive">建立回應式和自適應的應用</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/layout/responsive/building-adaptive-apps">建立自適應應用</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/design/orientation">根據旋轉角度更新應用的介面元素</a>
  </li>

</ul>
  </li>
</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#fixed-sidenav-10" role="button" aria-expanded="false" aria-controls="fixed-sidenav-10">設計 &amp; 主題</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-10">
            <li class="nav-item">
    <a class="nav-link" href="/cookbook/design/themes">共享主題樣式</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/design/material">Material 設計</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/release/breaking-changes/material-3-migration">遷移至 Material 3</a>
  </li>

<li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#fixed-sidenav-10-4" href="/ui/design/text" role="button" aria-expanded="false" aria-controls="fixed-sidenav-10-4">文字
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-10-4">
      <li class="nav-item">
    <a class="nav-link" href="/ui/design/text/typography">字型 &amp; 版式</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/design/fonts">使用自定義字型</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/design/package-fonts">將字型從 package 中對外暴露</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="https://pub.dev/packages/google_fonts" target="_blank" rel="noopener">Google 字型 package</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#fixed-sidenav-10-5" href="/ui/design/graphics" role="button" aria-expanded="false" aria-controls="fixed-sidenav-10-5">自定義圖形
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-10-5">
      <li class="nav-item">
    <a class="nav-link" href="/ui/design/graphics/fragment-shaders">使用自定義的著色器</a>
  </li>

</ul>
  </li>
</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#fixed-sidenav-11" role="button" aria-expanded="false" aria-controls="fixed-sidenav-11">互動</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-11">
            <li class="nav-item">
    <a class="nav-link" href="/ui/interactivity">為你的應用新增互動</a>
  </li>

<li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#fixed-sidenav-11-2" href="/ui/interactivity/gestures" role="button" aria-expanded="false" aria-controls="fixed-sidenav-11-2">手勢
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-11-2">
      <li class="nav-item">
    <a class="nav-link" href="/ui/interactivity/gestures">介紹</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/gestures/handling-taps">處理點選</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/interactivity/gestures/drag-outside">跨應用拖放物件</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/effects/drag-a-widget">拖動介面元素</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/gestures/ripples">新增 Material 風格的水波紋</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/gestures/dismissible">實現滑動取消</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#fixed-sidenav-11-3" href="/ui/interactivity/input" role="button" aria-expanded="false" aria-controls="fixed-sidenav-11-3">輸入 &amp; 表單
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-11-3">
      <li class="nav-item">
    <a class="nav-link" href="/cookbook/forms/text-input">建立輸入框並且調整樣式</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/forms/retrieve-input">讀取輸入框的內容</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/forms/text-field-changes">處理輸入框的內容變動</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/forms/focus">管理輸入框之間的焦點</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/forms/validation">建立具有校驗功能的表單</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link" href="/cookbook/design/snackbars">展示 SnackBar</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/interactivity/actions-and-shortcuts">實現快捷方式和捷徑</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/interactivity/focus">管理鍵盤焦點</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#fixed-sidenav-12" role="button" aria-expanded="false" aria-controls="fixed-sidenav-12">資源 &amp; 媒體</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-12">
            <li class="nav-item">
    <a class="nav-link" href="/ui/assets/assets-and-images">新增資源和圖片</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/images/network-image">載入網路圖片</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/images/fading-in-images">從佔位圖轉場到圖片</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/plugins/play-video">播放及暫停影片</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#fixed-sidenav-13" role="button" aria-expanded="false" aria-controls="fixed-sidenav-13">導向 &amp; 路由</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-13">
            <li class="nav-item">
    <a class="nav-link" href="/ui/navigation">概覽</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/design/tabs">新增 Tab 到應用中</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/navigation/navigation-basics">導向至新頁面並回傳</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/navigation/passing-data">傳遞資料到新頁面</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/navigation/returning-data">從新頁面回傳資料</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/design/drawer">在頁面上新增抽屜</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/navigation/deep-linking">設定 Deeplink</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/navigation/set-up-app-links">設定 Android Deeplink</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/navigation/set-up-universal-links">設定 iOS Universal Link</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/navigation/url-strategies">設定 Web 的 URL 策略</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#fixed-sidenav-14" role="button" aria-expanded="false" aria-controls="fixed-sidenav-14">動畫 &amp; 轉場</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-14">
            <li class="nav-item">
    <a class="nav-link" href="/ui/animations">概覽</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/animations/tutorial">教程</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/animations/implicit-animations">隱式動畫</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/animation/animated-container">轉場 Container 的屬性</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/animation/opacity-animation">漸入漸出 widget</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/animations/hero-animations">Hero（跨頁面共享元素）動畫</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/animation/page-route-animation">頁面轉場動畫</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/animation/physics-simulation">模擬物理屬性動畫</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/animations/staggered-animations">交錯動畫</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/effects/staggered-menu-animation">建立選單的交錯動畫</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/animations/overview">API 概覽</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#fixed-sidenav-15" role="button" aria-expanded="false" aria-controls="fixed-sidenav-15">無障礙 &amp; 國際化</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-15">
            <li class="nav-item">
    <a class="nav-link" href="/ui/accessibility-and-internationalization/accessibility">無障礙</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/accessibility-and-internationalization/internationalization">國際化</a>
  </li>


</ul>
        </li><li aria-hidden="true"><div class="sidebar-primary-divider"></div></li>
    <li class="nav-header">介面以外的開發</li>
    <li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#fixed-sidenav-18" role="button" aria-expanded="false" aria-controls="fixed-sidenav-18">資料呼叫和後端</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-18">
            <li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#fixed-sidenav-18-1" href="/data-and-backend/state-mgmt" role="button" aria-expanded="false" aria-controls="fixed-sidenav-18-1">狀態管理
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-18-1">
      <li class="nav-item">
    <a class="nav-link" href="/data-and-backend/state-mgmt/intro">介紹</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/data-and-backend/state-mgmt/declarative">從宣告式的角度思考</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/data-and-backend/state-mgmt/ephemeral-vs-app">短暫狀態 &amp; 持久狀態</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/data-and-backend/state-mgmt/simple">簡單的狀態管理</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/data-and-backend/state-mgmt/options">狀態管理參考</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#fixed-sidenav-18-2" href="/data-and-backend/networking" role="button" aria-expanded="false" aria-controls="fixed-sidenav-18-2">網路 &amp; http
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-18-2">
      <li class="nav-item">
    <a class="nav-link" href="/data-and-backend/networking">概覽</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/networking/fetch-data">從網路上獲取資料</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/networking/authenticated-requests">建立需要認證的請求</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/networking/send-data">傳送資料到伺服器</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/networking/update-data">更新網路上的資料</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/networking/delete-data">刪除網路上的資料</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/networking/web-sockets">WebSocket 通訊</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#fixed-sidenav-18-3" href="/data-and-backend/serialization" role="button" aria-expanded="false" aria-controls="fixed-sidenav-18-3">序列化
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-18-3">
      <li class="nav-item">
    <a class="nav-link" href="/data-and-backend/serialization/json">JSON 序列化</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/networking/background-parsing">在後台處理 JSON 解析</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#fixed-sidenav-18-4" href="/data-and-backend/persistence" role="button" aria-expanded="false" aria-controls="fixed-sidenav-18-4">持久化
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-18-4">
      <li class="nav-item">
    <a class="nav-link" href="/cookbook/persistence/key-value">將 key-value 資料儲存在硬碟上</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/persistence/reading-writing-files">讀寫檔案</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/persistence/sqlite">利用 SQLite 持久化資料</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link" href="/data-and-backend/firebase">Firebase</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/data-and-backend/google-apis">Google APIs</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link active collapsable" data-toggle="collapse" href="#fixed-sidenav-19" role="button" aria-expanded="true" aria-controls="fixed-sidenav-19">平台整合</a>
      
          <ul class="nav flex-column flex-nowrap collapse show" id="fixed-sidenav-19">
            <li class="nav-item">
    <a class="nav-link" href="/reference/supported-platforms">支援的平台</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/desktop">建立桌面端應用</a>
  </li>

<li class="nav-item">
    <a class="nav-link active" href="/platform-integration/platform-channels">撰寫平台程式碼 (外掛編寫實現)</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/platform-adaptations">自動化平台適配</a>
  </li>

<li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#fixed-sidenav-19-5" href="/platform-integration/android" role="button" aria-expanded="false" aria-controls="fixed-sidenav-19-5">Android 平台
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-19-5">
      <li class="nav-item">
    <a class="nav-link" href="/platform-integration/android/splash-screen">新增螢幕閃爍頁</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/android/c-interop">呼叫原生程式碼</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/android/platform-views">託管 Android 原生檢視</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/android/restore-state-android">在 Android 上恢復狀態</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/android/chromeos">建立適合 Chrome OS 的 Android 應用</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#fixed-sidenav-19-6" href="/platform-integration/ios" role="button" aria-expanded="false" aria-controls="fixed-sidenav-19-6">iOS 平台
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-19-6">
      <li class="nav-item">
    <a class="nav-link" href="/platform-integration/ios/apple-frameworks">使用 Apple 的系統函式庫</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/ios/launch-screen">新增啟動頁</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/ios/ios-app-clip">新增 iOS App Clip 支援</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/ios/app-extensions">新增 iOS App 擴充套件</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/ios/c-interop">呼叫原生程式碼</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/ios/platform-views">託管 iOS 原生檢視</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/ios/ios-debugging">iOS 平台除錯</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/ios/restore-state-ios">在 iOS 上恢復狀態</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#fixed-sidenav-19-7" href="/platform-integration/linux" role="button" aria-expanded="false" aria-controls="fixed-sidenav-19-7">Linux 作業系統平台
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-19-7">
      <li class="nav-item">
    <a class="nav-link" href="/platform-integration/linux/building">建立 Linux 桌面軟體</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#fixed-sidenav-19-8" href="/platform-integration/macos" role="button" aria-expanded="false" aria-controls="fixed-sidenav-19-8">macOS 作業系統平台
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-19-8">
      <li class="nav-item">
    <a class="nav-link" href="/platform-integration/macos/building">建立 macOS 應用</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/macos/c-interop">C 語言程式碼整合及呼叫</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#fixed-sidenav-19-9" href="/platform-integration/web" role="button" aria-expanded="false" aria-controls="fixed-sidenav-19-9">Web 平台
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-19-9">
      <li class="nav-item">
    <a class="nav-link" href="/platform-integration/web/building">建立一個 Web 應用</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/web/faq">Web 平台常見問題</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/web/renderers">Web 平台渲染器</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/web/initialization">自定義 Web 應用初始化</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/platform-integration/web/web-images">在網頁裡顯示圖片</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#fixed-sidenav-19-10" href="/platform-integration/windows" role="button" aria-expanded="false" aria-controls="fixed-sidenav-19-10">Windows 作業系統平台
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-19-10">
      <li class="nav-item">
    <a class="nav-link" href="/platform-integration/windows/building">建立 Windows 桌面軟體</a>
  </li>

</ul>
  </li>
</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#fixed-sidenav-20" role="button" aria-expanded="false" aria-controls="fixed-sidenav-20">Package 和外掛</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-20">
            <li class="nav-item">
    <a class="nav-link" href="/packages-and-plugins/using-packages">使用 package 和外掛</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/packages-and-plugins/developing-packages">開發 Package 和外掛</a>
  </li>

<div class="dropdown-divider"></div>
<li class="nav-item">
    <a class="nav-link" href="/packages-and-plugins/favorites">Flutter Favorites 專案</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="https://pub.dev/flutter" target="_blank" rel="noopener">Package 倉庫</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#fixed-sidenav-21" role="button" aria-expanded="false" aria-controls="fixed-sidenav-21">測試和除錯</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-21">
            <li class="nav-header">測試</li><li class="nav-item">
    <a class="nav-link" href="/testing/overview">概覽</a>
  </li>

<li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#fixed-sidenav-21-3" href="#fixed-sidenav-21-3" role="button" aria-expanded="false" aria-controls="fixed-sidenav-21-3">單元測試
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-21-3">
      <li class="nav-item">
    <a class="nav-link" href="/cookbook/testing/unit/introduction">介紹</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/testing/unit/mocking">模擬依賴</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#fixed-sidenav-21-4" href="#fixed-sidenav-21-4" role="button" aria-expanded="false" aria-controls="fixed-sidenav-21-4">Widget 測試
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-21-4">
      <li class="nav-item">
    <a class="nav-link" href="/cookbook/testing/widget/introduction">介紹</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/testing/widget/finders">尋找 widgets</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/testing/widget/scrolling">模擬捲動</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/testing/widget/tap-drag">模擬使用者操作</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#fixed-sidenav-21-5" href="#fixed-sidenav-21-5" role="button" aria-expanded="false" aria-controls="fixed-sidenav-21-5">整合測試
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-21-5">
      <li class="nav-item">
    <a class="nav-link" href="/cookbook/testing/integration/introduction">介紹</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/testing/integration-tests">編寫並執行整合測試</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/testing/integration/profiling">衡量整合測試的效能指標</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link" href="/testing/testing-plugins">測試外掛</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/testing/plugins-in-tests">在測試中處理外掛程式碼</a>
  </li>

<li class="nav-header">除錯</li><li class="nav-item">
    <a class="nav-link" href="/testing/debugging">除錯工具</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/testing/code-debugging">透過程式碼除錯應用</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/testing/native-debugging">使用原生語言的除錯</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/testing/build-modes">Flutter 的建立模式</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/testing/common-errors">常見的 Flutter 錯誤</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/testing/errors">處理錯誤</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/cookbook/maintenance/error-reporting">將錯誤上報到收集服務</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#fixed-sidenav-22" role="button" aria-expanded="false" aria-controls="fixed-sidenav-22">效能最佳化</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-22">
            <li class="nav-item">
    <a class="nav-link" href="/perf">概覽</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/perf/impeller">使用 Impeller</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/perf/best-practices">效能最佳實踐</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/perf/app-size">應用大小</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/perf/deferred-components">延遲載入元件</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/perf/rendering-performance">渲染效能</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/perf/ui-performance">效能分析</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/perf/web-performance">Web 效能分析</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/perf/shader">著色器編譯時卡頓</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/perf/metrics">效能指標</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/perf/isolates">併發與隔離</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/perf/faq">效能常見問題和回答</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/perf/appendix">附錄</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#fixed-sidenav-23" role="button" aria-expanded="false" aria-controls="fixed-sidenav-23">打包部署</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-23">
            <li class="nav-item">
    <a class="nav-link" href="/deployment/obfuscate">混淆 Dart 程式碼</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/deployment/flavors">設定 flavors</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/deployment/android">建立和發布為 Android 應用</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/deployment/ios">建立和發布為 iOS 應用</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/deployment/macos">建立和發布為 macOS 應用</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/deployment/linux">建立和發布為 Linux 應用</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/deployment/windows">建立和發布為 Windows 應用</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/deployment/web">建立和發布為 Web 應用</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/deployment/cd">持續部署</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#fixed-sidenav-24" role="button" aria-expanded="false" aria-controls="fixed-sidenav-24">將 Flutter 新增到現有應用</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-24">
            <li class="nav-item">
    <a class="nav-link" href="/add-to-app">介紹</a>
  </li>

<li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#fixed-sidenav-24-2" href="/add-to-app/android" role="button" aria-expanded="false" aria-controls="fixed-sidenav-24-2">將 Flutter 新增到現有 Android 應用
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-24-2">
      <li class="nav-item">
    <a class="nav-link" href="/add-to-app/android/project-setup">工程設定</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/add-to-app/android/add-flutter-screen">新增單個 Flutter 頁面</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/add-to-app/android/add-flutter-fragment">新增一個 Flutter Fragment</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/add-to-app/android/add-flutter-view">新增 Flutter 檢視</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/add-to-app/android/plugin-setup">Plugin 初始化</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#fixed-sidenav-24-3" href="/add-to-app/ios" role="button" aria-expanded="false" aria-controls="fixed-sidenav-24-3">將 Flutter 新增到現有 iOS 應用
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-24-3">
      <li class="nav-item">
    <a class="nav-link" href="/add-to-app/ios/project-setup">工程設定</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/add-to-app/ios/add-flutter-screen">新增單個 Flutter 頁面</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link" href="/add-to-app/debugging">除錯及熱過載</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/add-to-app/multiple-flutters">多個 Flutter 實例</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/add-to-app/performance">載入順序和效能</a>
  </li>


</ul>
        </li><li aria-hidden="true"><div class="sidebar-primary-divider"></div></li>
    <li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#fixed-sidenav-26" role="button" aria-expanded="false" aria-controls="fixed-sidenav-26">工具 &amp; 程式碼編輯器</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-26">
            <li class="nav-item">
    <a class="nav-link" href="/tools/android-studio">Android Studio &amp; IntelliJ</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/vs-code">Visual Studio Code</a>
  </li>

<li class="nav-item">
    <a class="nav-link collapsable collapsed" data-toggle="collapse" data-target="#fixed-sidenav-26-3" href="/tools/devtools" role="button" aria-expanded="false" aria-controls="fixed-sidenav-26-3">DevTools
    </a>
    <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-26-3">
      <li class="nav-item">
    <a class="nav-link" href="/tools/devtools/overview">概覽</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/android-studio">在 Android Studio &amp; IntelliJ 中安裝 DevTools</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/vscode">在 VS Code 中安裝 DevTools</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/cli">利用終端指令安裝 DevTools</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/inspector">Flutter inspector</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/performance">效能檢視</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/cpu-profiler">CPU 效能檢視</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/memory">記憶體檢視</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/console">除錯控制條檢視</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/network">網路檢視</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/debugger">除錯工具 Debugger</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/logging">日誌檢視</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/app-size">應用體積工具</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/extensions">DevTools 擴充套件工具</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/devtools/release-notes">發布日誌</a>
  </li>

</ul>
  </li><li class="nav-item">
    <a class="nav-link" href="/tools/sdk">SDK 概覽</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/pubspec">Flutter pubspec 選項</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/flutter-fix">自動修復</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/formatting">程式碼格式化</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#fixed-sidenav-27" role="button" aria-expanded="false" aria-controls="fixed-sidenav-27">Flutter 相關概念</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-27">
            <li class="nav-item">
    <a class="nav-link" href="/resources/architectural-overview">Flutter 架構概覽</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/resources/inside-flutter">Flutter 工作原理</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/ui/layout/constraints">理解佈局約束</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/testing/build-modes">Flutter 建立模式</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/tools/hot-reload">熱過載</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link collapsed collapsable" data-toggle="collapse" href="#fixed-sidenav-28" role="button" aria-expanded="false" aria-controls="fixed-sidenav-28">開發者資源清單</a>
      
          <ul class="nav flex-column flex-nowrap collapse " id="fixed-sidenav-28">
            <li class="nav-header">學習</li><li class="nav-item">
    <a class="nav-link" href="/resources/faq">常見問題解答</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/resources/books">相關書籍</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/resources/videos">相關影片</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/resources/courses">相關課程</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/resources/bootstrap-into-dart">學習 Dart</a>
  </li>

<li class="nav-header">貢獻</li><li class="nav-item">
    <a class="nav-link" href="/resources/bug-reports">提出 Bug</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="https://github.com/flutter/flutter/blob/master/CONTRIBUTING.md" target="_blank" rel="noopener">為 Flutter 做出貢獻</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="https://github.com/flutter/flutter/issues?q=is%3Aopen+is%3Aissue+label%3A%22design+doc%22" target="_blank" rel="noopener">設計文件</a>
  </li>


</ul>
        </li><li class="nav-item">
          <a class="nav-link  collapsable" data-toggle="collapse" href="#fixed-sidenav-29" role="button" aria-expanded="true" aria-controls="fixed-sidenav-29">更多資料</a>
      
          <ul class="nav flex-column flex-nowrap collapse show" id="fixed-sidenav-29">
            <li class="nav-item">
    <a class="nav-link" href="/dash">瞭解 Dash</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/reference/widgets">Flutter Widget 清單</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="https://api.flutter.dev" target="_blank" rel="noopener">Flutter API 文件</a>
  </li>

<li class="nav-item">
    <a class="nav-link" href="/reference/flutter-cli">Flutter 指令行文件</a>
  </li>


</ul>
        </li></ul>

    </div>

    
  
  
  
  
  <div id="site-toc--side" class="site-toc site-toc--side fixed-col col-xl-2 order-3 " data-fixed-column="">
    <header class="site-toc__title">
      目錄
      </header>
    <ul class="section-nav nav">
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#architecture"><t>架構概述：平台通道</t></a>
<ul class="nav">
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#codec"><t>平台通道資料型別及編解碼器</t></a></li>
</ul>
</li>
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#example"><t>範例: 透過平台通道呼叫平台的 iOS、Android 和 Windows 程式碼</t></a>
<ul class="nav">
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#example-project"><t>第一步：建立一個新的應用專案</t></a></li>
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#example-client"><t>第二步：建立 Flutter 平台用戶端</t></a></li>
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#step-3-add-an-android-platform-specific-implementation"><t>步驟 3: 新增 Android 平台的實現</t></a></li>
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#step-4-add-an-ios-platform-specific-implementation"><t>步驟 4：新增 iOS 平台的實現</t></a></li>
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#step-5-add-a-windows-platform-specific-implementation"><t>第五步：新增 Windows 平台特定實現</t></a></li>
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#step-6-add-a-macos-platform-specific-implementation">Step 6: Add a macOS platform-specific implementation</a></li>
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#step-7-add-a-linux-platform-specific-implementation">Step 7: Add a Linux platform-specific implementation</a></li>
</ul>
</li>
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#pigeon"><t>透過 Pigeon 獲得型別安全的通道</t></a>
<ul class="nav">
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#pigeon-example"><t>Pigeon 範例</t></a></li>
</ul>
</li>
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#separate"><t>從 UI 程式碼中分離平台相關程式碼</t></a></li>
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#publish"><t>將平台相關程式碼作為 Package 進行送出</t></a></li>
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#custom-channels-and-codecs"><t>自定義通道和編解碼器</t></a></li>
<li class="toc-entry nav-item toc-h2"><a class="nav-link" href="#channels-and-platform-threading"><t>通道和平台執行緒</t></a>
<ul class="nav">
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#using-plugins-and-channels-from-background-isolates">Using plugins and channels from background isolates</a></li>
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#executing-channel-handlers-on-background-threads"><t>在後台執行緒中執行 channel 的 handlers</t></a></li>
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#jumping-to-the-ui-thread-in-android"><t>跳轉到 Android 中的 UI 執行緒</t></a></li>
<li class="toc-entry nav-item toc-h3"><a class="nav-link" href="#jumping-to-the-main-thread-in-ios"><t>跳轉到 iOS 中的主線程</t></a></li>
</ul>
</li>
</ul>
  </div>
<main class="site-content col-12 col-md-9 offset-md-3 col-xl-8 offset-xl-2 col-xxl-8 offset-xxl-2">
      <div class="container">

        

        

        <header class="site-content__title">
          <div id="page-github-links" class="btn-group" aria-label="Page GitHub links" role="group">
  <a href="https://github.com/cfug/flutter.cn/tree/main/src/platform-integration/platform-channels.md" class="btn no-automatic-external" title="檢視文件原始碼" target="_blank" rel="noopener">
    <i class="material-symbols">description</i>
  </a>
  <a href="https://github.com/cfug/flutter.cn/issues/new?template=1_page_issue.yml&amp;title=[頁面問題] '撰寫雙端平台程式碼（外掛編寫實現）'&amp;page-url=https://flutter.tw/platform-integration/platform-channels/&amp;page-source=https://github.com/cfug/flutter.cn/tree/main/src/platform-integration/platform-channels.md" class="btn no-automatic-external" title="為本頁面內容提出建議" target="_blank" rel="noopener">
    <i class="material-symbols">bug_report</i>
  </a>
</div>

          <h1 id="撰寫雙端平台程式碼外掛編寫實現">撰寫雙端平台程式碼（外掛編寫實現）</h1>
          </header>
        
        
  <div id="site-toc--inline" class="site-toc site-toc--inline ">
    <header class="site-toc__title">
      目錄
    </header>
    <ul class="section-nav">
<li class="toc-entry toc-h2"><a href="#architecture"><t>架構概述：平台通道</t></a>
<ul>
<li class="toc-entry toc-h3"><a href="#codec"><t>平台通道資料型別及編解碼器</t></a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#example"><t>範例: 透過平台通道呼叫平台的 iOS、Android 和 Windows 程式碼</t></a>
<ul>
<li class="toc-entry toc-h3"><a href="#example-project"><t>第一步：建立一個新的應用專案</t></a></li>
<li class="toc-entry toc-h3"><a href="#example-client"><t>第二步：建立 Flutter 平台用戶端</t></a></li>
<li class="toc-entry toc-h3"><a href="#step-3-add-an-android-platform-specific-implementation"><t>步驟 3: 新增 Android 平台的實現</t></a></li>
<li class="toc-entry toc-h3"><a href="#step-4-add-an-ios-platform-specific-implementation"><t>步驟 4：新增 iOS 平台的實現</t></a></li>
<li class="toc-entry toc-h3"><a href="#step-5-add-a-windows-platform-specific-implementation"><t>第五步：新增 Windows 平台特定實現</t></a></li>
<li class="toc-entry toc-h3"><a href="#step-6-add-a-macos-platform-specific-implementation">Step 6: Add a macOS platform-specific implementation</a></li>
<li class="toc-entry toc-h3"><a href="#step-7-add-a-linux-platform-specific-implementation">Step 7: Add a Linux platform-specific implementation</a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#pigeon"><t>透過 Pigeon 獲得型別安全的通道</t></a>
<ul>
<li class="toc-entry toc-h3"><a href="#pigeon-example"><t>Pigeon 範例</t></a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#separate"><t>從 UI 程式碼中分離平台相關程式碼</t></a></li>
<li class="toc-entry toc-h2"><a href="#publish"><t>將平台相關程式碼作為 Package 進行送出</t></a></li>
<li class="toc-entry toc-h2"><a href="#custom-channels-and-codecs"><t>自定義通道和編解碼器</t></a></li>
<li class="toc-entry toc-h2"><a href="#channels-and-platform-threading"><t>通道和平台執行緒</t></a>
<ul>
<li class="toc-entry toc-h3"><a href="#using-plugins-and-channels-from-background-isolates">Using plugins and channels from background isolates</a></li>
<li class="toc-entry toc-h3"><a href="#executing-channel-handlers-on-background-threads"><t>在後台執行緒中執行 channel 的 handlers</t></a></li>
<li class="toc-entry toc-h3"><a href="#jumping-to-the-ui-thread-in-android"><t>跳轉到 Android 中的 UI 執行緒</t></a></li>
<li class="toc-entry toc-h3"><a href="#jumping-to-the-main-thread-in-ios"><t>跳轉到 iOS 中的主線程</t></a></li>
</ul>
</li>
</ul>
  </div>

<p>本指南介紹瞭如何編寫自定義的平台相關程式碼，某些平台相關功能可透過已有的軟體套件獲得，具體細節可檢視：
<a href="https://flutter.tw/packages-and-plugins/using-packages">在 Flutter 裡使用 Packages</a>。</p>



<aside class="alert alert-info" role="alert">
  <p><i class="material-symbols" aria-hidden="true">info</i> <strong>提示：</strong></p>

  <p>本頁面的內容適用於大多數平台，但 Web 外掛的實現一般都是透過
  <a href="https://dart.tw.gh.miniasp.com/web/js-interop">JS 互動</a> 或者
  <a href="https://api.dart.tw.gh.miniasp.com/dart-html/dart-html-library.html"><code class="language-plaintext highlighter-rouge">dart:html</code> 函式庫</a> 實現的。</p>

  

</aside>

<p>Flutter 建立了一個靈活的系統，你可以呼叫各種相關平台的 API，具體如下所示：</p>



<ul>
  <li>
    <p>Android 中的 Java 或 Kotlin API</p>

    
  </li>
  <li>
    <p>iOS 中的 Objective-C 或 Swift API</p>

    
  </li>
  <li>
    <p>Windows 作業系統中的 C++ API</p>

    
  </li>
  <li>
    <p>macOS 系統中的 Objective-C</p>

    
  </li>
  <li>
    <p>Linux 作業系統中的 C</p>

    
  </li>
</ul>

<p>Flutter 內建的平台特定 API 支援不依賴於任何生成程式碼，而是靈活的依賴於傳遞訊息格式。或者，你也可以使用 <a href="https://pub-web.flutter-io.cn/packages/pigeon">Pigeon</a> 這個 package，透過生成程式碼來
<a href="#pigeon">傳送結構化型別安全訊息</a>。</p>



<ul>
  <li>
    <p>應用中的 Flutter 部分透過平台通道向其宿主 (非 Dart 部分) 傳送訊息。</p>

    
  </li>
  <li>
    <p><strong>宿主</strong>監聽平台通道並接收訊息。然後，它使用原生程式語言來呼叫任意數量的相關平台
API，並將回應傳送回<strong>用戶端</strong>（即應用程式中的 Flutter 部分）。</p>

    
  </li>
</ul>

<aside class="alert alert-info" role="alert">
  <p><i class="material-symbols" aria-hidden="true">info</i> <strong>提示：</strong></p>

  <p>本篇教程主要介紹如何在非 Dart 語言中，利用平台通道的機制呼叫平台 API。但是當你在 Flutter 應用裡編寫 Dart 程式碼時，你也可以透過判斷 <a href="https://api.flutter.dev/flutter/foundation/defaultTargetPlatform.html"><code class="language-plaintext highlighter-rouge">defaultTargetPlatform</code></a>，在不同的平台上執行對應的程式碼。
  <a href="https://flutter.tw/platform-integration/platform-adaptations">不同平台操作體驗的差異和適配</a> 文件中列舉了部分
  Flutter 框架自動為你處理的平台適配行為。</p>

  

</aside>

<h2 id="architecture">
<a class="anchor" href="#architecture" aria-hidden="true"><span class="octicon octicon-link"></span></a>架構概述：平台通道</h2>



<p>訊息使用平台通道在用戶端（UI）和宿主（平台）之間傳遞，如下圖所示：</p>



<p><img src="https://flutter.tw/assets/images/docs/PlatformChannels.png" alt="Platform channels architecture" width="100%"></p>

<p>訊息和回應以非同步的形式進行傳遞，以確保使用者介面能夠保持回應。</p>



<aside class="alert alert-info" role="alert">
  <p><i class="material-symbols" aria-hidden="true">info</i> <strong>提示：</strong></p>

  <p>Flutter 是透過 Dart 非同步傳送訊息的。即便如此，當你呼叫一個平台方法時，也需要在主線程上做呼叫。在 <a href="#channels-and-platform-threading">這裡</a> 檢視更多。</p>

  

</aside>

<p>用戶端做方法呼叫的時候 <a href="https://api.flutter.dev/flutter/services/MethodChannel-class.html"><code class="language-plaintext highlighter-rouge">MethodChannel</code></a> 會負責回應，從平台一側來講，Android 系統上使用 <a href="https://api.flutter.dev/javadoc/io/flutter/plugin/common/MethodChannel.html"><code class="language-plaintext highlighter-rouge">MethodChannelAndroid</code></a>、
iOS 系統使用 <a href="https://api.flutter.dev/ios-embedder/interface_flutter_method_channel.html"><code class="language-plaintext highlighter-rouge">MethodChanneliOS</code></a> 來接收和回傳來自 <code class="language-plaintext highlighter-rouge">MethodChannel</code> 的方法呼叫。在開發平台外掛的時候，可以減少樣板程式碼。</p>



<aside class="alert alert-info" role="alert">
  <p><i class="material-symbols" aria-hidden="true">info</i> <strong>提示：</strong></p>

  <p>如果需要，方法呼叫也可以反向傳送，由平台充當用戶端來呼叫 Dart 實現的方法。一個具體的例子是 <a href="https://pub-web.flutter-io.cn/packages/quick_actions"><code class="language-plaintext highlighter-rouge">quick_actions</code></a> 外掛。</p>

  

</aside>

<h3 id="codec">
<a class="anchor" href="#codec" aria-hidden="true"><span class="octicon octicon-link"></span></a>平台通道資料型別及編解碼器</h3>



<p>標準平台通道使用標準訊息編解碼器，它支援簡單的類似 JSON
值的高效二進位序列化，例如布林值、數字、字串、位元組緩衝區及這些型別的清單和對映（詳情請參閱 <a href="https://api.flutter.dev/flutter/services/StandardMessageCodec-class.html"><code class="language-plaintext highlighter-rouge">StandardMessageCodec</code></a>）。當你傳送和接收值時，它會自動對這些值進行序列化和反序列化。</p>



<p>下表展示了如何在平台端接收 Dart 值，反之亦然：</p>



<ul class="nav nav-tabs sample-code-tabs" id="type-mappings-language" role="tablist">
<li class="nav-item">
  <a class="nav-link active" id="type-mappings-java" href="#type-mappings-java-tab" role="tab" aria-controls="type-mappings-java" aria-selected="true">Java</a>
</li>

<li class="nav-item">
  <a class="nav-link " id="type-mappings-kotlin" href="#type-mappings-kotlin-tab" role="tab" aria-controls="type-mappings-kotlin" aria-selected="true">Kotlin</a>
</li>

<li class="nav-item">
  <a class="nav-link " id="type-mappings-obj-c" href="#type-mappings-obj-c-tab" role="tab" aria-controls="type-mappings-obj-c" aria-selected="true">Obj-C</a>
</li>

<li class="nav-item">
  <a class="nav-link " id="type-mappings-swift" href="#type-mappings-swift-tab" role="tab" aria-controls="type-mappings-swift" aria-selected="true">Swift</a>
</li>

<li class="nav-item">
  <a class="nav-link " id="type-mappings-c-plus-plus" href="#type-mappings-c-plus-plus-tab" role="tab" aria-controls="type-mappings-c-plus-plus" aria-selected="true">C++</a>
</li>

<li class="nav-item">
  <a class="nav-link " id="type-mappings-c" href="#type-mappings-c-tab" role="tab" aria-controls="type-mappings-c" aria-selected="true">C</a>
</li>
</ul>
<div class="tab-content">

<div class="tab-pane active" id="type-mappings-java-tab" role="tabpanel" aria-labelledby="type-mappings-java-tab">

    <table>
      <thead>
        <tr>
          <th>Dart</th>
          <th>Java</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>null</td>
          <td>null</td>
        </tr>
        <tr>
          <td>bool</td>
          <td>java.lang.Boolean</td>
        </tr>
        <tr>
          <td>int</td>
          <td>java.lang.Integer</td>
        </tr>
        <tr>
          <td>int, if 32 bits not enough</td>
          <td>java.lang.Long</td>
        </tr>
        <tr>
          <td>double</td>
          <td>java.lang.Double</td>
        </tr>
        <tr>
          <td>String</td>
          <td>java.lang.String</td>
        </tr>
        <tr>
          <td>Uint8List</td>
          <td>byte[]</td>
        </tr>
        <tr>
          <td>Int32List</td>
          <td>int[]</td>
        </tr>
        <tr>
          <td>Int64List</td>
          <td>long[]</td>
        </tr>
        <tr>
          <td>Float32List</td>
          <td>float[]</td>
        </tr>
        <tr>
          <td>Float64List</td>
          <td>double[]</td>
        </tr>
        <tr>
          <td>List</td>
          <td>java.util.ArrayList</td>
        </tr>
        <tr>
          <td>Map</td>
          <td>java.util.HashMap</td>
        </tr>
      </tbody>
    </table>

  </div>


<div class="tab-pane " id="type-mappings-kotlin-tab" role="tabpanel" aria-labelledby="type-mappings-kotlin-tab">

    <table>
      <thead>
        <tr>
          <th>Dart</th>
          <th>Kotlin</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>null</td>
          <td>null</td>
        </tr>
        <tr>
          <td>bool</td>
          <td>Boolean</td>
        </tr>
        <tr>
          <td>int</td>
          <td>Int</td>
        </tr>
        <tr>
          <td>int, if 32 bits not enough</td>
          <td>Long</td>
        </tr>
        <tr>
          <td>double</td>
          <td>Double</td>
        </tr>
        <tr>
          <td>String</td>
          <td>String</td>
        </tr>
        <tr>
          <td>Uint8List</td>
          <td>ByteArray</td>
        </tr>
        <tr>
          <td>Int32List</td>
          <td>IntArray</td>
        </tr>
        <tr>
          <td>Int64List</td>
          <td>LongArray</td>
        </tr>
        <tr>
          <td>Float32List</td>
          <td>FloatArray</td>
        </tr>
        <tr>
          <td>Float64List</td>
          <td>DoubleArray</td>
        </tr>
        <tr>
          <td>List</td>
          <td>List</td>
        </tr>
        <tr>
          <td>Map</td>
          <td>HashMap</td>
        </tr>
      </tbody>
    </table>

  </div>


<div class="tab-pane " id="type-mappings-obj-c-tab" role="tabpanel" aria-labelledby="type-mappings-obj-c-tab">

    <table>
      <thead>
        <tr>
          <th>Dart</th>
          <th>Objective-C</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>null</td>
          <td>nil (NSNull when nested)</td>
        </tr>
        <tr>
          <td>bool</td>
          <td>NSNumber numberWithBool:</td>
        </tr>
        <tr>
          <td>int</td>
          <td>NSNumber numberWithInt:</td>
        </tr>
        <tr>
          <td>int, if 32 bits not enough</td>
          <td>NSNumber numberWithLong:</td>
        </tr>
        <tr>
          <td>double</td>
          <td>NSNumber numberWithDouble:</td>
        </tr>
        <tr>
          <td>String</td>
          <td>NSString</td>
        </tr>
        <tr>
          <td>Uint8List</td>
          <td>FlutterStandardTypedData typedDataWithBytes:</td>
        </tr>
        <tr>
          <td>Int32List</td>
          <td>FlutterStandardTypedData typedDataWithInt32:</td>
        </tr>
        <tr>
          <td>Int64List</td>
          <td>FlutterStandardTypedData typedDataWithInt64:</td>
        </tr>
        <tr>
          <td>Float32List</td>
          <td>FlutterStandardTypedData typedDataWithFloat32:</td>
        </tr>
        <tr>
          <td>Float64List</td>
          <td>FlutterStandardTypedData typedDataWithFloat64:</td>
        </tr>
        <tr>
          <td>List</td>
          <td>NSArray</td>
        </tr>
        <tr>
          <td>Map</td>
          <td>NSDictionary</td>
        </tr>
      </tbody>
    </table>

  </div>


<div class="tab-pane " id="type-mappings-swift-tab" role="tabpanel" aria-labelledby="type-mappings-swift-tab">

    <table>
      <thead>
        <tr>
          <th>Dart</th>
          <th>Swift</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>null</td>
          <td>nil</td>
        </tr>
        <tr>
          <td>bool</td>
          <td>NSNumber(value: Bool)</td>
        </tr>
        <tr>
          <td>int</td>
          <td>NSNumber(value: Int32)</td>
        </tr>
        <tr>
          <td>int, if 32 bits not enough</td>
          <td>NSNumber(value: Int)</td>
        </tr>
        <tr>
          <td>double</td>
          <td>NSNumber(value: Double)</td>
        </tr>
        <tr>
          <td>String</td>
          <td>String</td>
        </tr>
        <tr>
          <td>Uint8List</td>
          <td>FlutterStandardTypedData(bytes: Data)</td>
        </tr>
        <tr>
          <td>Int32List</td>
          <td>FlutterStandardTypedData(int32: Data)</td>
        </tr>
        <tr>
          <td>Int64List</td>
          <td>FlutterStandardTypedData(int64: Data)</td>
        </tr>
        <tr>
          <td>Float32List</td>
          <td>FlutterStandardTypedData(float32: Data)</td>
        </tr>
        <tr>
          <td>Float64List</td>
          <td>FlutterStandardTypedData(float64: Data)</td>
        </tr>
        <tr>
          <td>List</td>
          <td>Array</td>
        </tr>
        <tr>
          <td>Map</td>
          <td>Dictionary</td>
        </tr>
      </tbody>
    </table>

  </div>


<div class="tab-pane " id="type-mappings-c-plus-plus-tab" role="tabpanel" aria-labelledby="type-mappings-c-plus-plus-tab">

    <table>
      <thead>
        <tr>
          <th>Dart</th>
          <th>C++</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>null</td>
          <td>EncodableValue()</td>
        </tr>
        <tr>
          <td>bool</td>
          <td>EncodableValue(bool)</td>
        </tr>
        <tr>
          <td>int</td>
          <td>EncodableValue(int32_t)</td>
        </tr>
        <tr>
          <td>int, if 32 bits not enough</td>
          <td>EncodableValue(int64_t)</td>
        </tr>
        <tr>
          <td>double</td>
          <td>EncodableValue(double)</td>
        </tr>
        <tr>
          <td>String</td>
          <td>EncodableValue(std::string)</td>
        </tr>
        <tr>
          <td>Uint8List</td>
          <td>EncodableValue(std::vector<uint8_t>)</uint8_t>
</td>
        </tr>
        <tr>
          <td>Int32List</td>
          <td>EncodableValue(std::vector<int32_t>)</int32_t>
</td>
        </tr>
        <tr>
          <td>Int64List</td>
          <td>EncodableValue(std::vector<int64_t>)</int64_t>
</td>
        </tr>
        <tr>
          <td>Float32List</td>
          <td>EncodableValue(std::vector<float>)</float>
</td>
        </tr>
        <tr>
          <td>Float64List</td>
          <td>EncodableValue(std::vector<double>)</double>
</td>
        </tr>
        <tr>
          <td>List</td>
          <td>EncodableValue(std::vector<encodablevalue>)</encodablevalue>
</td>
        </tr>
        <tr>
          <td>Map</td>
          <td>EncodableValue(std::map&lt;EncodableValue, EncodableValue&gt;)</td>
        </tr>
      </tbody>
    </table>

  </div>


<div class="tab-pane " id="type-mappings-c-tab" role="tabpanel" aria-labelledby="type-mappings-c-tab">

    <table>
      <thead>
        <tr>
          <th>Dart</th>
          <th>C (GObject)</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>null</td>
          <td>FlValue()</td>
        </tr>
        <tr>
          <td>bool</td>
          <td>FlValue(bool)</td>
        </tr>
        <tr>
          <td>int</td>
          <td>FlValue(int64_t)</td>
        </tr>
        <tr>
          <td>double</td>
          <td>FlValue(double)</td>
        </tr>
        <tr>
          <td>String</td>
          <td>FlValue(gchar*)</td>
        </tr>
        <tr>
          <td>Uint8List</td>
          <td>FlValue(uint8_t*)</td>
        </tr>
        <tr>
          <td>Int32List</td>
          <td>FlValue(int32_t*)</td>
        </tr>
        <tr>
          <td>Int64List</td>
          <td>FlValue(int64_t*)</td>
        </tr>
        <tr>
          <td>Float32List</td>
          <td>FlValue(float*)</td>
        </tr>
        <tr>
          <td>Float64List</td>
          <td>FlValue(double*)</td>
        </tr>
        <tr>
          <td>List</td>
          <td>FlValue(FlValue)</td>
        </tr>
        <tr>
          <td>Map</td>
          <td>FlValue(FlValue, FlValue)</td>
        </tr>
      </tbody>
    </table>

  </div>

</div>

<h2 id="example">
<a class="anchor" href="#example" aria-hidden="true"><span class="octicon octicon-link"></span></a>範例: 透過平台通道呼叫平台的 iOS、Android 和 Windows 程式碼</h2>



<p>以下程式碼示範了如何呼叫平台相關 API 來檢索並顯示當前的電池電量。它透過平台訊息 <code class="language-plaintext highlighter-rouge">getBatteryLevel()</code>
來呼叫 Android 的 <code class="language-plaintext highlighter-rouge">BatteryManager</code> API、
iOS 的 <code class="language-plaintext highlighter-rouge">device.batteryLevel</code> API、以及 indows 上的 <code class="language-plaintext highlighter-rouge">GetSystemPowerStatus</code>。</p>



<p>該範例在主應用程式中新增平台相關程式碼。如果想要將該程式碼重用於多個應用程式，那麼專案的建立步驟將略有差異（檢視 <a href="https://flutter.tw/packages-and-plugins/developing-packages#plugin">Flutter Packages 的開發和送出</a>），但平台通道程式碼仍以相同方式編寫。</p>



<aside class="alert alert-info" role="alert">
  <p><i class="material-symbols" aria-hidden="true">info</i> <strong>提示：</strong></p>

  <p>可在 <a href="https://github.com/flutter/flutter/tree/main/examples/platform_channel"><code class="language-plaintext highlighter-rouge">/examples/platform_channel/</code></a> 中獲得使用 Java 實現的
  Android 及使用 Objective-C 實現的 iOS 的該範例完整可執行的程式碼。對於用 Swift 實現的 iOS 程式碼，請參閱 <a href="https://github.com/flutter/flutter/tree/main/examples/platform_channel_swift"><code class="language-plaintext highlighter-rouge">/examples/platform_channel_swift/</code></a>。</p>

  

</aside>

<h3 id="example-project">
<a class="anchor" href="#example-project" aria-hidden="true"><span class="octicon octicon-link"></span></a>第一步：建立一個新的應用專案</h3>



<p>首先建立一個新的應用：</p>



<ul>
  <li>
    <p>在終端中執行：<code class="language-plaintext highlighter-rouge">flutter create batterylevel</code></p>

    
  </li>
</ul>

<p>預設情況下，我們的樣板使用 Kotlin 編寫 Android 或使用 Swift 編寫 iOS 程式碼。要使用
Java 或 Objective-C，請使用 <code class="language-plaintext highlighter-rouge">-i</code> 和/或 <code class="language-plaintext highlighter-rouge">-a</code> 標誌：</p>



<ul>
  <li>
    <p>在終端中執行：<code class="language-plaintext highlighter-rouge">flutter create -i objc -a java batterylevel</code></p>

    
  </li>
</ul>

<h3 id="example-client">
<a class="anchor" href="#example-client" aria-hidden="true"><span class="octicon octicon-link"></span></a>第二步：建立 Flutter 平台用戶端</h3>



<p>應用程式的 <code class="language-plaintext highlighter-rouge">State</code> 類保持當前應用的狀態。擴充套件它以保持當前的電池狀態。</p>



<p>首先，建立通道。在回傳電池電量的單一平台方法中使用 <code class="language-plaintext highlighter-rouge">MethodChannel</code>。</p>



<p>通道的用戶端和宿主端透過傳遞給通道建構式函式的通道名稱進行連線。一個應用中所使用的所有通道名稱必須是唯一的；使用唯一的 <strong>域字首</strong> 為通道名稱新增字首，比如：<code class="language-plaintext highlighter-rouge">samples.flutter.dev/battery</code>。</p>



<div class="code-excerpt">
<div class="code-excerpt__code"><pre><code class="dart prettyprint lang-dart">import 'dart:async';
import 'package:flutter/material.dart';
import 'package:flutter/services.dart';</code></pre></div>
</div>

<div class="code-excerpt">
<div class="code-excerpt__code"><pre><code class="dart prettyprint lang-dart">class _MyHomePageState extends State&lt;MyHomePage&gt; {
  static const platform = MethodChannel('samples.flutter.dev/battery');
  // Get battery level.</code></pre></div>
</div>

<p>接下來，在方法通道上呼叫方法（指定透過 String 識別符號 <code class="language-plaintext highlighter-rouge">getBatteryLevel</code>
呼叫的具體方法）。呼叫可能會失敗—比如，如果平台不支援此平台
API（比如在模擬器中執行），所以將 <code class="language-plaintext highlighter-rouge">invokeMethod</code> 呼叫包裹在 try-catch 語句中。</p>



<p>在 <code class="language-plaintext highlighter-rouge">setState</code> 中使用回傳結果來更新 <code class="language-plaintext highlighter-rouge">_batteryLevel</code> 內的使用者介面狀態。</p>



<div class="code-excerpt">
<div class="code-excerpt__code"><pre><code class="dart prettyprint lang-dart">// Get battery level.
String _batteryLevel = 'Unknown battery level.';

Future&lt;void&gt; _getBatteryLevel() async {
  String batteryLevel;
  try {
    final result = await platform.invokeMethod&lt;int&gt;('getBatteryLevel');
    batteryLevel = 'Battery level at $result % .';
  } on PlatformException catch (e) {
    batteryLevel = "Failed to get battery level: '${e.message}'.";
  }

  setState(() {
    _batteryLevel = batteryLevel;
  });
}</code></pre></div>
</div>

<p>最後，將樣板中的 <code class="language-plaintext highlighter-rouge">build</code> 方法替換為包含以字串形式顯示電池狀態、幷包含一個用於重新整理該值的按鈕的小型使用者介面。</p>



<div class="code-excerpt">
<div class="code-excerpt__code"><pre><code class="dart prettyprint lang-dart">@override
Widget build(BuildContext context) {
  return Material(
    child: Center(
      child: Column(
        mainAxisAlignment: MainAxisAlignment.spaceEvenly,
        children: [
          ElevatedButton(
            onPressed: _getBatteryLevel,
            child: const Text('Get Battery Level'),
          ),
          Text(_batteryLevel),
        ],
      ),
    ),
  );
}</code></pre></div>
</div>

<h3 id="step-3-add-an-android-platform-specific-implementation">
<a class="anchor" href="#step-3-add-an-android-platform-specific-implementation" aria-hidden="true"><span class="octicon octicon-link"></span></a>步驟 3: 新增 Android 平台的實現</h3>



<ul class="nav nav-tabs sample-code-tabs" id="android-channel-language" role="tablist">
<li class="nav-item">
  <a class="nav-link active" id="android-channel-kotlin" href="#android-channel-kotlin-tab" role="tab" aria-controls="android-channel-kotlin" aria-selected="true">Kotlin</a>
</li>

<li class="nav-item">
  <a class="nav-link " id="android-channel-java" href="#android-channel-java-tab" role="tab" aria-controls="android-channel-java" aria-selected="true">Java</a>
</li>
</ul>
<div class="tab-content">

<div class="tab-pane active" id="android-channel-kotlin-tab" role="tabpanel" aria-labelledby="android-channel-kotlin-tab">

    <p>首先在 Android Studio 中開啟 Flutter 應用的 Android 宿主部分：</p>

    

    <ol>
      <li>
        <p>啟動 Android Studio</p>

        
      </li>
      <li>
        <p>選擇選單項 <strong>File &gt; Open…</strong></p>

        
      </li>
      <li>
        <p>導向到包含 Flutter 應用的目錄，然後選擇其中的 <strong>android</strong> 資料夾。點選 <strong>OK</strong>。</p>

        
      </li>
      <li>
        <p>在專案檢視中開啟 <strong>kotlin</strong> 資料夾下的 <code class="language-plaintext highlighter-rouge">MainActivity.kt</code> 檔案。</p>

        
      </li>
    </ol>

    <p>在 <code class="language-plaintext highlighter-rouge">configureFlutterEngine()</code> 方法中建立一個 <code class="language-plaintext highlighter-rouge">MethodChannel</code> 並呼叫
<code class="language-plaintext highlighter-rouge">setMethodCallHandler()</code>。確保使用的通道名稱與 Flutter 用戶端使用的一致。</p>

    

    <div class="code-excerpt">
<div class="code-excerpt__header">MainActivity.kt</div>
<div class="code-excerpt__code"><pre><code class="kotlin prettyprint lang-kotlin">import androidx.annotation.NonNull
import io.flutter.embedding.android.FlutterActivity
import io.flutter.embedding.engine.FlutterEngine
import io.flutter.plugin.common.MethodChannel

class MainActivity: FlutterActivity() {
  private val CHANNEL = "samples.flutter.dev/battery"

  override fun configureFlutterEngine(@NonNull flutterEngine: FlutterEngine) {
    super.configureFlutterEngine(flutterEngine)
    MethodChannel(flutterEngine.dartExecutor.binaryMessenger, CHANNEL).setMethodCallHandler {
      call, result -&gt;
      // This method is invoked on the main thread.
      // TODO
    }
  }
}</code></pre></div>
</div>

    <p>新增使用 Android battery API 來檢索電池電量的 Android Kotlin 程式碼。該程式碼與你在原生
Android 應用中編寫的程式碼完全相同。</p>

    

    <p>首先在檔案頭部新增所需的依賴：</p>

    

    <div class="code-excerpt">
<div class="code-excerpt__header">MainActivity.kt</div>
<div class="code-excerpt__code"><pre><code class="kotlin prettyprint lang-kotlin">import android.content.Context
import android.content.ContextWrapper
import android.content.Intent
import android.content.IntentFilter
import android.os.BatteryManager
import android.os.Build.VERSION
import android.os.Build.VERSION_CODES</code></pre></div>
</div>

    <p>然後在 <code class="language-plaintext highlighter-rouge">MainActivity</code> 類別中的 <code class="language-plaintext highlighter-rouge">configureFlutterEngine()</code> 方法下方新增以下新方法：</p>

    

    <div class="code-excerpt">
<div class="code-excerpt__header">MainActivity.kt</div>
<div class="code-excerpt__code"><pre><code class="kotlin prettyprint lang-kotlin">private fun getBatteryLevel(): Int {
  val batteryLevel: Int
  if (VERSION.SDK_INT &gt;= VERSION_CODES.LOLLIPOP) {
    val batteryManager = getSystemService(Context.BATTERY_SERVICE) as BatteryManager
    batteryLevel = batteryManager.getIntProperty(BatteryManager.BATTERY_PROPERTY_CAPACITY)
  } else {
    val intent = ContextWrapper(applicationContext).registerReceiver(null, IntentFilter(Intent.ACTION_BATTERY_CHANGED))
    batteryLevel = intent!!.getIntExtra(BatteryManager.EXTRA_LEVEL, -1) * 100 / intent.getIntExtra(BatteryManager.EXTRA_SCALE, -1)
  }

  return batteryLevel
}</code></pre></div>
</div>

    <p>最後，完成前面新增的 <code class="language-plaintext highlighter-rouge">onMethodCall()</code> 方法。你需要處理單個平台方法 <code class="language-plaintext highlighter-rouge">getBatteryLevel()</code>，所以在引數 <code class="language-plaintext highlighter-rouge">call</code> 中對其進行驗證。該平台方法的實現是呼叫上一步編寫的 Android 程式碼，並使用 <code class="language-plaintext highlighter-rouge">result</code> 引數來回傳成功和錯誤情況下的回應。如果呼叫了未知方法，則報告該方法。</p>

    

    <p>刪除以下程式碼：</p>

    

    <div class="code-excerpt">
<div class="code-excerpt__header">MainActivity.kt</div>
<div class="code-excerpt__code"><pre><code class="kotlin prettyprint lang-kotlin">MethodChannel(flutterEngine.dartExecutor.binaryMessenger, CHANNEL).setMethodCallHandler {
  call, result -&gt;
  // This method is invoked on the main thread.
  // TODO
}</code></pre></div>
</div>

    <p>並替換成以下內容：</p>

    

    <div class="code-excerpt">
<div class="code-excerpt__header">MainActivity.kt</div>
<div class="code-excerpt__code"><pre><code class="kotlin prettyprint lang-kotlin">MethodChannel(flutterEngine.dartExecutor.binaryMessenger, CHANNEL).setMethodCallHandler {
  // This method is invoked on the main thread.
  call, result -&gt;
  if (call.method == "getBatteryLevel") {
    val batteryLevel = getBatteryLevel()

    if (batteryLevel != -1) {
      result.success(batteryLevel)
    } else {
      result.error("UNAVAILABLE", "Battery level not available.", null)
    }
  } else {
    result.notImplemented()
  }
}</code></pre></div>
</div>

  </div>


<div class="tab-pane " id="android-channel-java-tab" role="tabpanel" aria-labelledby="android-channel-java-tab">

    <p>首先在 Android Studio 中開啟 Flutter 應用的 Android 宿主部分：</p>

    

    <ol>
      <li>
        <p>啟動 Android Studio</p>

        
      </li>
      <li>
        <p>選擇選單項 <strong>File &gt; Open…</strong></p>

        
      </li>
      <li>
        <p>導向到包含 Flutter 應用的目錄，然後選擇其中的 <strong>android</strong> 資料夾。點選 <strong>OK</strong>。</p>

        
      </li>
      <li>
        <p>在專案檢視中開啟 <strong>java</strong> 資料夾下的 <code class="language-plaintext highlighter-rouge">MainActivity.java</code> 檔案。</p>

        
      </li>
    </ol>

    <p>接下來，在 <code class="language-plaintext highlighter-rouge">configureFlutterEngine()</code> 方法中建立一個 <code class="language-plaintext highlighter-rouge">MethodChannel</code> 並設定一個
<code class="language-plaintext highlighter-rouge">MethodCallHandler</code>。確保使用的通道名稱與 Flutter 用戶端使用的一致。</p>

    

    <div class="code-excerpt">
<div class="code-excerpt__header">MainActivity.java</div>
<div class="code-excerpt__code"><pre><code class="java prettyprint lang-java">import androidx.annotation.NonNull;
import io.flutter.embedding.android.FlutterActivity;
import io.flutter.embedding.engine.FlutterEngine;
import io.flutter.plugin.common.MethodChannel;

public class MainActivity extends FlutterActivity {
  private static final String CHANNEL = "samples.flutter.dev/battery";

  @Override
  public void configureFlutterEngine(@NonNull FlutterEngine flutterEngine) {
  super.configureFlutterEngine(flutterEngine);
    new MethodChannel(flutterEngine.getDartExecutor().getBinaryMessenger(), CHANNEL)
        .setMethodCallHandler(
          (call, result) -&gt; {
            // This method is invoked on the main thread.
            // TODO
          }
        );
  }
}</code></pre></div>
</div>

    <p>新增使用 Android battery API 來檢索電池電量的 Android Java 程式碼。該程式碼與你在原生 Android 應用中編寫的程式碼完全相同。</p>

    

    <p>首先在檔案頭部新增所需的依賴：</p>

    

    <div class="code-excerpt">
<div class="code-excerpt__header">MainActivity.java</div>
<div class="code-excerpt__code"><pre><code class="java prettyprint lang-java">import android.content.ContextWrapper;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.BatteryManager;
import android.os.Build.VERSION;
import android.os.Build.VERSION_CODES;
import android.os.Bundle;</code></pre></div>
</div>

    <p>然後在 Activity 類別中的 <code class="language-plaintext highlighter-rouge">onCreate()</code> 方法下方新增以下新方法：</p>

    

    <div class="code-excerpt">
<div class="code-excerpt__header">MainActivity.java</div>
<div class="code-excerpt__code"><pre><code class="java prettyprint lang-java">private int getBatteryLevel() {
  int batteryLevel = -1;
  if (VERSION.SDK_INT &gt;= VERSION_CODES.LOLLIPOP) {
    BatteryManager batteryManager = (BatteryManager) getSystemService(BATTERY_SERVICE);
    batteryLevel = batteryManager.getIntProperty(BatteryManager.BATTERY_PROPERTY_CAPACITY);
  } else {
    Intent intent = new ContextWrapper(getApplicationContext()).
        registerReceiver(null, new IntentFilter(Intent.ACTION_BATTERY_CHANGED));
    batteryLevel = (intent.getIntExtra(BatteryManager.EXTRA_LEVEL, -1) * 100) /
        intent.getIntExtra(BatteryManager.EXTRA_SCALE, -1);
  }

  return batteryLevel;
}</code></pre></div>
</div>

    <p>最後，完成前面新增的 <code class="language-plaintext highlighter-rouge">onMethodCall()</code> 方法，你需要處理單個平台方法 <code class="language-plaintext highlighter-rouge">getBatteryLevel()</code>，所以在引數 <code class="language-plaintext highlighter-rouge">call</code> 中對其進行驗證。該平台方法的實現是呼叫上一步編寫的 Android 程式碼，並使用 <code class="language-plaintext highlighter-rouge">result</code> 引數來回傳成功和錯誤情況下的回應。如果呼叫了未知方法，則報告該方法。</p>

    

    <p>移除以下程式碼：</p>

    

    <div class="code-excerpt">
<div class="code-excerpt__header">MainActivity.java</div>
<div class="code-excerpt__code"><pre><code class="java prettyprint lang-java">(call, result) -&gt; {
  // This method is invoked on the main thread.
  // TODO
}</code></pre></div>
</div>

    <p>並替換成以下內容：</p>

    

    <div class="code-excerpt">
<div class="code-excerpt__header">MainActivity.java</div>
<div class="code-excerpt__code"><pre><code class="java prettyprint lang-java">(call, result) -&gt; {
  // This method is invoked on the main thread.
  if (call.method.equals("getBatteryLevel")) {
    int batteryLevel = getBatteryLevel();

    if (batteryLevel != -1) {
      result.success(batteryLevel);
    } else {
      result.error("UNAVAILABLE", "Battery level not available.", null);
    }
  } else {
    result.notImplemented();
  }
}</code></pre></div>
</div>

  </div>

</div>

<p>現在你應該可以在 Android 中執行該應用。如果使用了 Android
模擬器，請在<strong>擴充套件控制元件</strong>面板中設定電池電量，可從工具欄中的 <strong>…</strong> 按鈕訪問。</p>



<h3 id="step-4-add-an-ios-platform-specific-implementation">
<a class="anchor" href="#step-4-add-an-ios-platform-specific-implementation" aria-hidden="true"><span class="octicon octicon-link"></span></a>步驟 4：新增 iOS 平台的實現</h3>



<ul class="nav nav-tabs sample-code-tabs" id="ios-channel-language" role="tablist">
<li class="nav-item">
  <a class="nav-link active" id="ios-channel-swift" href="#ios-channel-swift-tab" role="tab" aria-controls="ios-channel-swift" aria-selected="true">Swift</a>
</li>

<li class="nav-item">
  <a class="nav-link " id="ios-channel-objective-c" href="#ios-channel-objective-c-tab" role="tab" aria-controls="ios-channel-objective-c" aria-selected="true">Objective-C</a>
</li>
</ul>
<div class="tab-content">

<div class="tab-pane active" id="ios-channel-swift-tab" role="tabpanel" aria-labelledby="ios-channel-swift-tab">

    <p>首先在 Xcode 中開啟 Flutter 應用的 iOS 宿主部分：</p>

    

    <ol>
      <li>
        <p>啟動 Xcode</p>

        
      </li>
      <li>
        <p>選擇選單項 <strong>File &gt; Open…</strong></p>

        
      </li>
      <li>
        <p>導向到包含 Flutter 應用的目錄，然後選擇其中的 <strong>ios</strong> 資料夾。點選 <strong>OK</strong>。</p>

        
      </li>
    </ol>

    <p>在使用 Objective-C 的標準樣板設定中新增對 Swift 的支援：</p>

    

    <ol>
      <li>
        <p>在專案導向中展開 <strong>Expand Runner &gt; Runner</strong>。</p>

        
      </li>
      <li>
        <p>開啟專案導向 <code class="language-plaintext highlighter-rouge">Runner &gt; Runner</code> 下的 <code class="language-plaintext highlighter-rouge">AppDelegate.swift</code> 檔案。</p>

        
      </li>
    </ol>

    <p>重寫 <code class="language-plaintext highlighter-rouge">application:didFinishLaunchingWithOptions:</code> 方法，然後建立一個 <code class="language-plaintext highlighter-rouge">FlutterMethodChannel</code> 繫結到名字為
<code class="language-plaintext highlighter-rouge">samples.flutter.dev/battery</code> 名稱的 channel：</p>

    

    <div class="code-excerpt">
<div class="code-excerpt__header">AppDelegate.swift</div>
<div class="code-excerpt__code"><pre><code class="swift prettyprint lang-swift">@UIApplicationMain
@objc class AppDelegate: FlutterAppDelegate {
  override func application(
    _ application: UIApplication,
    didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -&gt; Bool {

    let controller : FlutterViewController = window?.rootViewController as! FlutterViewController
    let batteryChannel = FlutterMethodChannel(name: "samples.flutter.dev/battery",
                                              binaryMessenger: controller.binaryMessenger)
    batteryChannel.setMethodCallHandler({
      (call: FlutterMethodCall, result: @escaping FlutterResult) -&gt; Void in
      // This method is invoked on the UI thread.
      // Handle battery messages.
    })

    GeneratedPluginRegistrant.register(with: self)
    return super.application(application, didFinishLaunchingWithOptions: launchOptions)
  }
}</code></pre></div>
</div>

    <p>然後，新增 iOS Swift 程式碼，使用電池相關的 API 獲取電量。這裡的程式碼和你寫原生 iOS 程式碼別無二致。</p>

    

    <p>在 <code class="language-plaintext highlighter-rouge">AppDelegate.swift</code> 末尾新增以下新的方法：</p>

    

    <div class="code-excerpt">
<div class="code-excerpt__header">AppDelegate.swift</div>
<div class="code-excerpt__code"><pre><code class="swift prettyprint lang-swift">private func receiveBatteryLevel(result: FlutterResult) {
  let device = UIDevice.current
  device.isBatteryMonitoringEnabled = true
  if device.batteryState == UIDevice.BatteryState.unknown {
    result(FlutterError(code: "UNAVAILABLE",
                        message: "Battery level not available.",
                        details: nil))
  } else {
    result(Int(device.batteryLevel * 100))
  }
}</code></pre></div>
</div>

    <p>最後，完成前面新增的 <code class="language-plaintext highlighter-rouge">setMethodCallHandler()</code> 方法。你需要處理單個平台方法 <code class="language-plaintext highlighter-rouge">getBatteryLevel()</code>，所以在引數 <code class="language-plaintext highlighter-rouge">call</code> 中對其進行驗證。該平台方法的實現是呼叫上一步編寫的 iOS 程式碼。如果呼叫了未知方法，則報告該方法。</p>

    

    <div class="code-excerpt">
<div class="code-excerpt__header">AppDelegate.swift</div>
<div class="code-excerpt__code"><pre><code class="swift prettyprint lang-swift">batteryChannel.setMethodCallHandler({
  [weak self] (call: FlutterMethodCall, result: FlutterResult) -&gt; Void in
  // This method is invoked on the UI thread.
  guard call.method == "getBatteryLevel" else {
    result(FlutterMethodNotImplemented)
    return
  }
  self?.receiveBatteryLevel(result: result)
})</code></pre></div>
</div>

  </div>


<div class="tab-pane " id="ios-channel-objective-c-tab" role="tabpanel" aria-labelledby="ios-channel-objective-c-tab">

    <p>首先在 Xcode 中開啟 Flutter 應用的 iOS 宿主部分：</p>

    

    <ol>
      <li>
        <p>啟動 Xcode</p>

        
      </li>
      <li>
        <p>選擇選單項 <strong>File &gt; Open…</strong></p>

        
      </li>
      <li>
        <p>導向到包含 Flutter 應用的目錄，然後選擇其中的 <strong>ios</strong> 資料夾。點選 <strong>OK</strong>。</p>

        
      </li>
      <li>
        <p>確保 Xcode 專案建立沒有錯誤。</p>

        
      </li>
      <li>
        <p>開啟專案導向 <strong>Runner &gt; Runner</strong> 下的 <code class="language-plaintext highlighter-rouge">AppDelegate.m</code> 檔案。</p>

        
      </li>
    </ol>

    <p>在 <code class="language-plaintext highlighter-rouge">application didFinishLaunchingWithOptions:</code> 方法中建立一個 <code class="language-plaintext highlighter-rouge">FlutterMethodChannel</code> 並新增一個處理程式。確保使用的通道名稱與 Flutter 用戶端使用的一致。</p>

    

    <div class="code-excerpt">
<div class="code-excerpt__header">AppDelegate.m</div>
<div class="code-excerpt__code"><pre><code class="objectivec prettyprint lang-objectivec">#import &lt;Flutter/Flutter.h&gt;
#import "GeneratedPluginRegistrant.h"

@implementation AppDelegate
- (BOOL)application:(UIApplication*)application didFinishLaunchingWithOptions:(NSDictionary*)launchOptions {
  FlutterViewController* controller = (FlutterViewController*)self.window.rootViewController;

  FlutterMethodChannel* batteryChannel = [FlutterMethodChannel
                                          methodChannelWithName:@"samples.flutter.dev/battery"
                                          binaryMessenger:controller.binaryMessenger];

  [batteryChannel setMethodCallHandler:^(FlutterMethodCall* call, FlutterResult result) {
    // This method is invoked on the UI thread.
    // TODO
  }];

  [GeneratedPluginRegistrant registerWithRegistry:self];
  return [super application:application didFinishLaunchingWithOptions:launchOptions];
}</code></pre></div>
</div>

    <p>接下來新增使用 iOS battery API 來檢索電池電量的 iOS Objective-C 程式碼。該程式碼與你在原生 iOS 應用中編寫的程式碼完全相同。</p>

    

    <p>在 <code class="language-plaintext highlighter-rouge">AppDelegate</code> 類別中的 <code class="language-plaintext highlighter-rouge">@end</code> 之前新增以下方法：</p>

    

    <div class="code-excerpt">
<div class="code-excerpt__header">AppDelegate.m</div>
<div class="code-excerpt__code"><pre><code class="objectivec prettyprint lang-objectivec">- (int)getBatteryLevel {
  UIDevice* device = UIDevice.currentDevice;
  device.batteryMonitoringEnabled = YES;
  if (device.batteryState == UIDeviceBatteryStateUnknown) {
    return -1;
  } else {
    return (int)(device.batteryLevel * 100);
  }
}</code></pre></div>
</div>

    <p>最後，完成前面新增的 <code class="language-plaintext highlighter-rouge">setMethodCallHandler()</code> 方法。你需要處理單個平台方法 <code class="language-plaintext highlighter-rouge">getBatteryLevel()</code>，所以在引數<code class="language-plaintext highlighter-rouge">call</code> 中對其進行驗證。該平台方法的實現是呼叫上一步編寫的 iOS 程式碼，並使用 <code class="language-plaintext highlighter-rouge">result</code> 引數來回傳成功和錯誤情況下的回應。如果呼叫了未知方法，則報告該方法。</p>

    

    <div class="code-excerpt">
<div class="code-excerpt__header">AppDelegate.m</div>
<div class="code-excerpt__code"><pre><code class="objectivec prettyprint lang-objectivec">__weak typeof(self) weakSelf = self;
[batteryChannel setMethodCallHandler:^(FlutterMethodCall* call, FlutterResult result) {
  // This method is invoked on the UI thread.
  if ([@"getBatteryLevel" isEqualToString:call.method]) {
    int batteryLevel = [weakSelf getBatteryLevel];

    if (batteryLevel == -1) {
      result([FlutterError errorWithCode:@"UNAVAILABLE"
                                 message:@"Battery level not available."
                                 details:nil]);
    } else {
      result(@(batteryLevel));
    }
  } else {
    result(FlutterMethodNotImplemented);
  }
}];</code></pre></div>
</div>

  </div>

</div>

<p>現在你應該可以在 iOS 中執行該應用。如果使用了 iOS 模擬器（注意它並不支援 battery API），應用則會顯示 ‘battery info unavailable’。</p>



<h3 id="step-5-add-a-windows-platform-specific-implementation">
<a class="anchor" href="#step-5-add-a-windows-platform-specific-implementation" aria-hidden="true"><span class="octicon octicon-link"></span></a>第五步：新增 Windows 平台特定實現</h3>



<p>首先在 Visual Studio 中開啟你 Flutter 應用 Windows 的 host 部分：</p>



<ol>
  <li>
    <p>在你專案的目錄夾下執行一次 <code class="language-plaintext highlighter-rouge">flutter build windows</code> 以生成 Visual Studio solution 檔案。</p>

    
  </li>
  <li>
    <p>啟動 Visual Studio。</p>

    
  </li>
  <li>
    <p>選擇 <strong>Open a project or solution</strong></p>

    
  </li>
  <li>
    <p>導向至含有你 Flutter 應用的目錄下，然後進入 <strong>build</strong> 資料夾，然後是 <strong>windows</strong> 資料夾，然後選擇 <code class="language-plaintext highlighter-rouge">batterylevel.sln</code> 檔案，點選 <strong>Open</strong>。</p>

    
  </li>
</ol>

<p>然後新增 platform channel 方法的 c++ 實現：</p>



<ol>
  <li>
    <p>在 Solution 瀏覽器中展開 <strong>batterylevel &gt; Source Files</strong></p>

    
  </li>
  <li>
    <p>開啟 <code class="language-plaintext highlighter-rouge">flutter_window.cpp</code>。</p>

    
  </li>
</ol>

<p>首先，在檔案的最頂部新增必要的引用，在 <code class="language-plaintext highlighter-rouge">#include "flutter_window.h"</code> 下面寫上就行：</p>



<div class="code-excerpt">
<div class="code-excerpt__header">flutter_window.cpp</div>
<div class="code-excerpt__code"><pre><code class="cpp prettyprint lang-cpp">#include &lt;flutter/event_channel.h&gt;
#include &lt;flutter/event_sink.h&gt;
#include &lt;flutter/event_stream_handler_functions.h&gt;
#include &lt;flutter/method_channel.h&gt;
#include &lt;flutter/standard_method_codec.h&gt;
#include &lt;windows.h&gt;

#include &lt;memory&gt;</code></pre></div>
</div>

<p>編輯 <code class="language-plaintext highlighter-rouge">FlutterWindow::OnCreate</code> 方法，然後建立一個 <code class="language-plaintext highlighter-rouge">flutter::MethodChannel</code>
繫結 <code class="language-plaintext highlighter-rouge">samples.flutter.dev/battery</code> 名字：</p>



<div class="code-excerpt">
<div class="code-excerpt__header">flutter_window.cpp</div>
<div class="code-excerpt__code"><pre><code class="cpp prettyprint lang-cpp">bool FlutterWindow::OnCreate() {
  // ...
  RegisterPlugins(flutter_controller_-&gt;engine());

  flutter::MethodChannel&lt;&gt; channel(
      flutter_controller_-&gt;engine()-&gt;messenger(), "samples.flutter.dev/battery",
      &amp;flutter::StandardMethodCodec::GetInstance());
  channel.SetMethodCallHandler(
      [](const flutter::MethodCall&lt;&gt;&amp; call,
         std::unique_ptr&lt;flutter::MethodResult&lt;&gt;&gt; result) {
        // TODO
      });

  SetChildContent(flutter_controller_-&gt;view()-&gt;GetNativeWindow());
  return true;
}</code></pre></div>
</div>

<p>接下來新增使用 Windows battery API 來檢索電池電量的程式碼。該程式碼與你在原生
Windows 應用中編寫程式碼別無二致。</p>



<p>在 <code class="language-plaintext highlighter-rouge">flutter_window.cpp</code> 頂部新增下面的新方法，在 <code class="language-plaintext highlighter-rouge">#include</code> 下面新增：</p>



<div class="code-excerpt">
<div class="code-excerpt__header">flutter_window.cpp</div>
<div class="code-excerpt__code"><pre><code class="cpp prettyprint lang-cpp">static int GetBatteryLevel() {
  SYSTEM_POWER_STATUS status;
  if (GetSystemPowerStatus(&amp;status) == 0 || status.BatteryLifePercent == 255) {
    return -1;
  }
  return status.BatteryLifePercent;
}</code></pre></div>
</div>

<p>最後，完成 <code class="language-plaintext highlighter-rouge">setMethodCallHandler()</code> 方法。你可以在這裡處理平台方法，<code class="language-plaintext highlighter-rouge">getBatteryLevel()</code>，然後可以在 <code class="language-plaintext highlighter-rouge">call</code> 引數中進行測試。這個平台方法呼叫的實現，在之前的步驟中已經完成了。如果呼叫了一個未知的，請報告它。</p>



<p>移除下面的程式碼：</p>



<div class="code-excerpt">
<div class="code-excerpt__header">flutter_window.cpp</div>
<div class="code-excerpt__code"><pre><code class="cpp prettyprint lang-cpp">channel.SetMethodCallHandler(
    [](const flutter::MethodCall&lt;&gt;&amp; call,
       std::unique_ptr&lt;flutter::MethodResult&lt;&gt;&gt; result) {
      // TODO
    });</code></pre></div>
</div>

<p>然後替換為這個：</p>



<div class="code-excerpt">
<div class="code-excerpt__header">flutter_window.cpp</div>
<div class="code-excerpt__code"><pre><code class="cpp prettyprint lang-cpp">channel.SetMethodCallHandler(
    [](const flutter::MethodCall&lt;&gt;&amp; call,
       std::unique_ptr&lt;flutter::MethodResult&lt;&gt;&gt; result) {
      if (call.method_name() == "getBatteryLevel") {
        int battery_level = GetBatteryLevel();
        if (battery_level != -1) {
          result-&gt;Success(battery_level);
        } else {
          result-&gt;Error("UNAVAILABLE", "Battery level not available.");
        }
      } else {
        result-&gt;NotImplemented();
      }
    });</code></pre></div>
</div>

<p>You should now be able to run the application on Windows.
If your device doesn’t have a battery,
it displays ‘Battery level not available’.</p>

<h3 id="step-6-add-a-macos-platform-specific-implementation">
<a class="anchor" href="#step-6-add-a-macos-platform-specific-implementation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 6: Add a macOS platform-specific implementation</h3>

<p>Start by opening the macOS host portion of your Flutter app in Xcode:</p>

<ol>
  <li>
    <p>Start Xcode.</p>
  </li>
  <li>
    <p>Select the menu item <strong>File &gt; Open…</strong>.</p>
  </li>
  <li>
    <p>Navigate to the directory holding your Flutter app, and select the <strong>macos</strong>
folder inside it. Click <strong>OK</strong>.</p>
  </li>
</ol>

<p>Add the Swift implementation of the platform channel method:</p>

<ol>
  <li>
    <p><strong>Expand Runner &gt; Runner</strong> in the Project navigator.</p>
  </li>
  <li>
    <p>Open the file <code class="language-plaintext highlighter-rouge">MainFlutterWindow.swift</code> located under <strong>Runner &gt; Runner</strong>
in the Project navigator.</p>
  </li>
</ol>

<p>First, add the necessary import to the top of the file, just after
<code class="language-plaintext highlighter-rouge">import FlutterMacOS</code>:</p>

<div class="code-excerpt">
<div class="code-excerpt__header">MainFlutterWindow.swift</div>
<div class="code-excerpt__code"><pre><code class="swift prettyprint lang-swift">import IOKit.ps</code></pre></div>
</div>

<p>Create a <code class="language-plaintext highlighter-rouge">FlutterMethodChannel</code> tied to the channel name
<code class="language-plaintext highlighter-rouge">samples.flutter.dev/battery</code> in the <code class="language-plaintext highlighter-rouge">awakeFromNib</code> method:</p>

<div class="code-excerpt">
<div class="code-excerpt__header">MainFlutterWindow.swift</div>
<div class="code-excerpt__code"><pre><code class="swift prettyprint lang-swift">  override func awakeFromNib() {
    // ...
    self.setFrame(windowFrame, display: true)
  
    let batteryChannel = FlutterMethodChannel(
      name: "samples.flutter.dev/battery",
      binaryMessenger: flutterViewController.engine.binaryMessenger)
    batteryChannel.setMethodCallHandler { (call, result) in
      // This method is invoked on the UI thread.
      // Handle battery messages.
    }

    RegisterGeneratedPlugins(registry: flutterViewController)

    super.awakeFromNib()
  }
}</code></pre></div>
</div>

<p>Next, add the macOS Swift code that uses the IOKit battery APIs to retrieve
the battery level. This code is exactly the same as you
would write in a native macOS app.</p>

<p>Add the following as a new method at the bottom of <code class="language-plaintext highlighter-rouge">MainFlutterWindow.swift</code>:</p>

<div class="code-excerpt">
<div class="code-excerpt__header">MainFlutterWindow.swift</div>
<div class="code-excerpt__code"><pre><code class="swift prettyprint lang-swift">private func getBatteryLevel() -&gt; Int? {
  let info = IOPSCopyPowerSourcesInfo().takeRetainedValue()
  let sources: Array&lt;CFTypeRef&gt; = IOPSCopyPowerSourcesList(info).takeRetainedValue() as Array
  if let source = sources.first {
    let description =
      IOPSGetPowerSourceDescription(info, source).takeUnretainedValue() as! [String: AnyObject]
    if let level = description[kIOPSCurrentCapacityKey] as? Int {
      return level
    }
  }
  return nil
}</code></pre></div>
</div>

<p>Finally, complete the <code class="language-plaintext highlighter-rouge">setMethodCallHandler</code> method added earlier.
You need to handle a single platform method, <code class="language-plaintext highlighter-rouge">getBatteryLevel()</code>,
so test for that in the <code class="language-plaintext highlighter-rouge">call</code> argument.
The implementation of this platform method calls
the macOS code written in the previous step. If an unknown method
is called, report that instead.</p>

<div class="code-excerpt">
<div class="code-excerpt__header">MainFlutterWindow.swift</div>
<div class="code-excerpt__code"><pre><code class="swift prettyprint lang-swift">batteryChannel.setMethodCallHandler { (call, result) in
  switch call.method {
  case "getBatteryLevel":
    guard let level = getBatteryLevel() else {
      result(
        FlutterError(
          code: "UNAVAILABLE",
          message: "Battery level not available",
          details: nil))
     return
    }
    result(level)
  default:
    result(FlutterMethodNotImplemented)
  }
}</code></pre></div>
</div>

<p>You should now be able to run the application on macOS.
If your device doesn’t have a battery,
it displays ‘Battery level not available’.</p>

<h3 id="step-7-add-a-linux-platform-specific-implementation">
<a class="anchor" href="#step-7-add-a-linux-platform-specific-implementation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Step 7: Add a Linux platform-specific implementation</h3>

<p>For this example you need to install the <code class="language-plaintext highlighter-rouge">upower</code> developer headers.
This is likely available from your distribution, for example with:</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>libupower-glib-dev
</code></pre></div></div>

<p>Start by opening the Linux host portion of your Flutter app in the editor
of your choice. The instructions below are for Visual Studio Code with the
“C/C++” and “CMake” extensions installed, but can be adjusted for other IDEs.</p>

<ol>
  <li>
    <p>Launch Visual Studio Code.</p>
  </li>
  <li>
    <p>Open the <strong>linux</strong> directory inside your project.</p>
  </li>
  <li>
    <p>Choose <strong>Yes</strong> in the prompt asking: <code class="language-plaintext highlighter-rouge">Would you like to configure project "linux"?</code>.
This enables C++ autocomplete.</p>
  </li>
  <li>
    <p>Open the file <code class="language-plaintext highlighter-rouge">my_application.cc</code>.</p>
  </li>
</ol>

<p>First, add the necessary includes to the top of the file, just
after <code class="language-plaintext highlighter-rouge">#include &lt;flutter_linux/flutter_linux.h</code>:</p>

<div class="code-excerpt">
<div class="code-excerpt__header">my_application.cc</div>
<div class="code-excerpt__code"><pre><code class="c prettyprint lang-c">#include &lt;math.h&gt;
#include &lt;upower.h&gt;</code></pre></div>
</div>

<p>Add an <code class="language-plaintext highlighter-rouge">FlMethodChannel</code> to the <code class="language-plaintext highlighter-rouge">_MyApplication</code> struct:</p>

<div class="code-excerpt">
<div class="code-excerpt__header">my_application.cc</div>
<div class="code-excerpt__code"><pre><code class="c prettyprint lang-c">struct _MyApplication {
  GtkApplication parent_instance;
  char** dart_entrypoint_arguments;
  FlMethodChannel* battery_channel;
};</code></pre></div>
</div>

<p>Make sure to clean it up in <code class="language-plaintext highlighter-rouge">my_application_dispose</code>:</p>

<div class="code-excerpt">
<div class="code-excerpt__header">my_application.cc</div>
<div class="code-excerpt__code"><pre><code class="c prettyprint lang-c">static void my_application_dispose(GObject* object) {
  MyApplication* self = MY_APPLICATION(object);
  g_clear_pointer(&amp;self-&gt;dart_entrypoint_arguments, g_strfreev);
  g_clear_object(&amp;self-&gt;battery_channel);
  G_OBJECT_CLASS(my_application_parent_class)-&gt;dispose(object);
}</code></pre></div>
</div>

<p>Edit the <code class="language-plaintext highlighter-rouge">my_application_activate</code> method and initialize
<code class="language-plaintext highlighter-rouge">battery_channel</code> using the channel name
<code class="language-plaintext highlighter-rouge">samples.flutter.dev/battery</code>, just after the call to
<code class="language-plaintext highlighter-rouge">fl_register_plugins</code>:</p>

<div class="code-excerpt">
<div class="code-excerpt__header">my_application.cc</div>
<div class="code-excerpt__code"><pre><code class="c prettyprint lang-c">static void my_application_activate(GApplication* application) {
  // ...
  fl_register_plugins(FL_PLUGIN_REGISTRY(self-&gt;view));

  g_autoptr(FlStandardMethodCodec) codec = fl_standard_method_codec_new();
  self-&gt;battery_channel = fl_method_channel_new(
      fl_engine_get_binary_messenger(fl_view_get_engine(view)),
      "samples.flutter.dev/battery", FL_METHOD_CODEC(codec));
  fl_method_channel_set_method_call_handler(
      self-&gt;battery_channel, battery_method_call_handler, self, nullptr);

  gtk_widget_grab_focus(GTK_WIDGET(self-&gt;view));
}</code></pre></div>
</div>

<p>Next, add the C code that uses the Linux battery APIs to
retrieve the battery level. This code is exactly the same as
you would write in a native Linux application.</p>

<p>Add the following as a new function at the top of
<code class="language-plaintext highlighter-rouge">my_application.cc</code> just after the <code class="language-plaintext highlighter-rouge">G_DEFINE_TYPE</code> line:</p>

<div class="code-excerpt">
<div class="code-excerpt__header">my_application.cc</div>
<div class="code-excerpt__code"><pre><code class="c prettyprint lang-c">static FlMethodResponse* get_battery_level() {
  // Find the first available battery and report that.
  g_autoptr(UpClient) up_client = up_client_new();
  g_autoptr(GPtrArray) devices = up_client_get_devices2(up_client);
  if (devices-&gt;len == 0) {
    return FL_METHOD_RESPONSE(fl_method_error_response_new(
        "UNAVAILABLE", "Device does not have a battery.", nullptr));
  }

  UpDevice* device = (UpDevice*)(g_ptr_array_index(devices, 0));
  double percentage = 0;
  g_object_get(device, "percentage", &amp;percentage, nullptr);

  g_autoptr(FlValue) result =
      fl_value_new_int(static_cast&lt;int64_t&gt;(round(percentage)));
  return FL_METHOD_RESPONSE(fl_method_success_response_new(result));
}</code></pre></div>
</div>

<p>Finally, add the <code class="language-plaintext highlighter-rouge">battery_method_call_handler</code> function referenced
in the earlier call to <code class="language-plaintext highlighter-rouge">fl_method_channel_set_method_call_handler</code>.
You need to handle a single platform method, <code class="language-plaintext highlighter-rouge">getBatteryLevel</code>,
so test for that in the <code class="language-plaintext highlighter-rouge">method_call</code> argument.
The implementation of this function calls
the Linux code written in the previous step. If an unknown method
is called, report that instead.</p>

<p>Add the following code after the <code class="language-plaintext highlighter-rouge">get_battery_level</code> function:</p>

<div class="code-excerpt">
<div class="code-excerpt__header">flutter_window.cpp</div>
<div class="code-excerpt__code"><pre><code class="c prettyprint lang-c">static void battery_method_call_handler(FlMethodChannel* channel,
                                        FlMethodCall* method_call,
                                        gpointer user_data) {
  g_autoptr(FlMethodResponse) response = nullptr;
  if (strcmp(fl_method_call_get_name(method_call), "getBatteryLevel") == 0) {
    response = get_battery_level();
  } else {
    response = FL_METHOD_RESPONSE(fl_method_not_implemented_response_new());
  }

  g_autoptr(GError) error = nullptr;
  if (!fl_method_call_respond(method_call, response, &amp;error)) {
    g_warning("Failed to send response: %s", error-&gt;message);
  }
}</code></pre></div>
</div>

<p>你現在應該可以在 Windows 上執行應用了。如果你的裝置沒有電池的話，它會提示 ‘Battery level not available’。</p>



<h2 id="pigeon">
<a class="anchor" href="#pigeon" aria-hidden="true"><span class="octicon octicon-link"></span></a>透過 Pigeon 獲得型別安全的通道</h2>



<p>在之前的範例中，我們使用 <code class="language-plaintext highlighter-rouge">MethodChannel</code> 在 host 和 client 之間進行通訊，然而這並不是型別安全的。為了正確通訊，呼叫/接收訊息取決於 host 和 client 宣告相同的引數和數據型別。
<a href="https://pub-web.flutter-io.cn/packages/pigeon">Pigeon</a> 套件可以用作 <code class="language-plaintext highlighter-rouge">MethodChannel</code> 的替代品，它將生成以結構化型別安全方式傳送訊息的程式碼。</p>



<p>在 <a href="https://pub-web.flutter-io.cn/packages/pigeon">Pigeon</a> 中，訊息介面在 Dart 中進行定義，然後它將生成對應的 Android 以及 iOS 的程式碼。更復雜的例子以及更多訊息盡在 <a href="https://pub-web.flutter-io.cn/packages/pigeon"><code class="language-plaintext highlighter-rouge">pigeon</code></a>。</p>



<p>使用 <a href="https://pub-web.flutter-io.cn/packages/pigeon">Pigeon</a> 消除了在主機和用戶端之間對應字串的需要訊息的名稱和數據型別。它支援：巢狀類，訊息轉換為 API，生成非同步包裝程式碼併發送訊息。生成的程式碼具有相當的可讀性並保證在不同版本的多個用戶端之間沒有衝突。支援 Objective-C，Java，Kotlin 和 Swift（透過 Objective-C 互操作）語言。</p>



<h3 id="pigeon-example">
<a class="anchor" href="#pigeon-example" aria-hidden="true"><span class="octicon octicon-link"></span></a>Pigeon 範例</h3>



<p><strong>Pigeon 檔案:</strong></p>



<div class="code-excerpt">
<div class="code-excerpt__code"><pre><code class="dart prettyprint lang-dart">import 'package:pigeon/pigeon.dart';

class SearchRequest {
  final String query;

  SearchRequest({required this.query});
}

class SearchReply {
  final String result;

  SearchReply({required this.result});
}

@HostApi()
abstract class Api {
  @async
  SearchReply search(SearchRequest request);
}</code></pre></div>
</div>

<p><strong>Dart 用法:</strong></p>



<div class="code-excerpt">
<div class="code-excerpt__code"><pre><code class="dart prettyprint lang-dart">import 'generated_pigeon.dart';

Future&lt;void&gt; onClick() async {
  SearchRequest request = SearchRequest(query: 'test');
  Api api = SomeApi();
  SearchReply reply = await api.search(request);
  print('reply: ${reply.result}');
}</code></pre></div>
</div>

<h2 id="separate">
<a class="anchor" href="#separate" aria-hidden="true"><span class="octicon octicon-link"></span></a>從 UI 程式碼中分離平台相關程式碼</h2>



<p>如果你想要在多個 Flutter 應用中使用你的平台相關程式碼，則將程式碼分離為位於主應用目錄之外的平台外掛會很有用。相關細節檢視
<a href="https://flutter.tw/packages-and-plugins/developing-packages">Flutter Packages 的開發和送出</a>。</p>



<h2 id="publish">
<a class="anchor" href="#publish" aria-hidden="true"><span class="octicon octicon-link"></span></a>將平台相關程式碼作為 Package 進行送出</h2>



<p>與 Flutter 生態中的其他開發者共享你的平台相關程式碼，可檢視 <a href="https://flutter.tw/packages-and-plugins/developing-packages#publish">送出 package</a>。</p>



<h2 id="custom-channels-and-codecs">
<a class="anchor" href="#custom-channels-and-codecs" aria-hidden="true"><span class="octicon octicon-link"></span></a>自定義通道和編解碼器</h2>



<p>除了上面提到的 <code class="language-plaintext highlighter-rouge">MethodChannel</code>，你還可以使用更基礎的
<a href="https://api.flutter.dev/flutter/services/BasicMessageChannel-class.html"><code class="language-plaintext highlighter-rouge">BasicMessageChannel</code></a>，它支援使用自定義的訊息編解碼器進行基本的非同步訊息傳遞。你還可以使用專門的
<a href="https://api.flutter.dev/flutter/services/BinaryCodec-class.html"><code class="language-plaintext highlighter-rouge">BinaryCodec</code></a>、<a href="https://api.flutter.dev/flutter/services/StringCodec-class.html"><code class="language-plaintext highlighter-rouge">StringCodec</code></a> 和
<a href="https://api.flutter.dev/flutter/services/JSONMessageCodec-class.html"><code class="language-plaintext highlighter-rouge">JSONMessageCodec</code></a> 類，或建立自己的編解碼器。</p>



<p>你還可以在 <a href="https://github.com/firebase/flutterfire/blob/master/packages/cloud_firestore/cloud_firestore_platform_interface/lib/src/method_channel/utils/firestore_message_codec.dart"><code class="language-plaintext highlighter-rouge">cloud_firestore</code></a> 外掛中檢視自定義編解碼器的範例，該外掛可以序列化和反序列化比預設類型更多的型別。</p>



<h2 id="channels-and-platform-threading">
<a class="anchor" href="#channels-and-platform-threading" aria-hidden="true"><span class="octicon octicon-link"></span></a>通道和平台執行緒</h2>



<p>目標平台向 Flutter 發起 channel 呼叫的時候，需要在對應平台的主線程執行。同樣的，在 Flutter 向目標平台發起 channel 呼叫的時候，需要在根 <code class="language-plaintext highlighter-rouge">Isolate</code> 中執行。對應平台側的 handler 既可以在平台的主線程執行，也可以透過事件迴圈在後台執行。對應平台側 handler 的回傳值可以在任意執行緒非同步執行。</p>



<aside class="alert alert-info" role="alert">
  <p><i class="material-symbols" aria-hidden="true">info</i> <strong>提示：</strong></p>

  <p>在 Android 平台上時，平台的 main 執行緒有時候被叫做主線程，但是它在技術上被看作 <a href="https://developer.android.google.cn/guide/components/processes-and-threads#Threads">UI 執行緒</a>。被 <code class="language-plaintext highlighter-rouge">@UiThread</code> 註解標記的方法需要在 UI 執行緒上執行。在 iOS 上，這個執行緒被官方標記為<a href="https://developer.apple.com/documentation/uikit?language=objc">主線程</a>。</p>

  

</aside>

<h3 id="using-plugins-and-channels-from-background-isolates">
<a class="anchor" href="#using-plugins-and-channels-from-background-isolates" aria-hidden="true"><span class="octicon octicon-link"></span></a>Using plugins and channels from background isolates</h3>

<p>Plugins and channels can be used by any <code class="language-plaintext highlighter-rouge">Isolate</code>, but that <code class="language-plaintext highlighter-rouge">Isolate</code> has to be
a root <code class="language-plaintext highlighter-rouge">Isolate</code> (the one created by Flutter) or registered as a background
<code class="language-plaintext highlighter-rouge">Isolate</code> for a root <code class="language-plaintext highlighter-rouge">Isolate</code>.</p>

<p>The following example shows how to register a background <code class="language-plaintext highlighter-rouge">Isolate</code> in order to
use a plugin from a background <code class="language-plaintext highlighter-rouge">Isolate</code>.</p>

<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="s">'package:flutter/services.dart'</span><span class="o">;</span>
<span class="kn">import</span> <span class="s">'package:shared_preferences/shared_preferences.dart'</span><span class="o">;</span>

<span class="kt">void</span> <span class="nf">_isolateMain</span><span class="p">(</span><span class="n">RootIsolateToken</span> <span class="n">rootIsolateToken</span><span class="p">)</span> <span class="kd">async</span> <span class="p">{</span>
  <span class="n">BackgroundIsolateBinaryMessenger</span><span class="o">.</span><span class="na">ensureInitialized</span><span class="p">(</span><span class="n">rootIsolateToken</span><span class="p">);</span>
  <span class="n">SharedPreferences</span> <span class="n">sharedPreferences</span> <span class="o">=</span> <span class="k">await</span> <span class="n">SharedPreferences</span><span class="o">.</span><span class="na">getInstance</span><span class="p">();</span>
  <span class="n">print</span><span class="p">(</span><span class="n">sharedPreferences</span><span class="o">.</span><span class="na">getBool</span><span class="p">(</span><span class="s">'isDebug'</span><span class="p">));</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">RootIsolateToken</span> <span class="n">rootIsolateToken</span> <span class="o">=</span> <span class="n">RootIsolateToken</span><span class="o">.</span><span class="na">instance</span><span class="o">!</span><span class="p">;</span>
  <span class="n">Isolate</span><span class="o">.</span><span class="na">spawn</span><span class="p">(</span><span class="n">_isolateMain</span><span class="p">,</span> <span class="n">rootIsolateToken</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="executing-channel-handlers-on-background-threads">
<a class="anchor" href="#executing-channel-handlers-on-background-threads" aria-hidden="true"><span class="octicon octicon-link"></span></a>在後台執行緒中執行 channel 的 handlers</h3>



<p>要在 channel 對應的平台側的後台中執行 handler，需要使用 Task Queue API。當前該功能僅支援在 iOS 和 Android。</p>



<p>對應的 Java 程式碼：</p>



<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Override</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">onAttachedToEngine</span><span class="o">(</span><span class="nd">@NonNull</span> <span class="nc">FlutterPluginBinding</span> <span class="n">binding</span><span class="o">)</span> <span class="o">{</span>
  <span class="nc">BinaryMessenger</span> <span class="n">messenger</span> <span class="o">=</span> <span class="n">binding</span><span class="o">.</span><span class="na">getBinaryMessenger</span><span class="o">();</span>
  <span class="nc">BinaryMessenger</span><span class="o">.</span><span class="na">TaskQueue</span> <span class="n">taskQueue</span> <span class="o">=</span>
      <span class="n">messenger</span><span class="o">.</span><span class="na">makeBackgroundTaskQueue</span><span class="o">();</span>
  <span class="n">channel</span> <span class="o">=</span>
      <span class="k">new</span> <span class="nf">MethodChannel</span><span class="o">(</span>
          <span class="n">messenger</span><span class="o">,</span>
          <span class="s">"com.example.foo"</span><span class="o">,</span>
          <span class="nc">StandardMethodCodec</span><span class="o">.</span><span class="na">INSTANCE</span><span class="o">,</span>
          <span class="n">taskQueue</span><span class="o">);</span>
  <span class="n">channel</span><span class="o">.</span><span class="na">setMethodCallHandler</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Kotlin 版本：</p>



<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">override</span> <span class="k">fun</span> <span class="nf">onAttachedToEngine</span><span class="p">(</span><span class="nd">@NonNull</span> <span class="n">flutterPluginBinding</span><span class="p">:</span> <span class="nc">FlutterPlugin</span><span class="p">.</span><span class="nc">FlutterPluginBinding</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">val</span> <span class="py">taskQueue</span> <span class="p">=</span>
      <span class="n">flutterPluginBinding</span><span class="p">.</span><span class="n">binaryMessenger</span><span class="p">.</span><span class="nf">makeBackgroundTaskQueue</span><span class="p">()</span>
  <span class="n">channel</span> <span class="p">=</span> <span class="nc">MethodChannel</span><span class="p">(</span><span class="n">flutterPluginBinding</span><span class="p">.</span><span class="n">binaryMessenger</span><span class="p">,</span>
                          <span class="s">"com.example.foo"</span><span class="p">,</span>
                          <span class="nc">StandardMethodCodec</span><span class="p">.</span><span class="nc">INSTANCE</span><span class="p">,</span>
                          <span class="n">taskQueue</span><span class="p">)</span>
  <span class="n">channel</span><span class="p">.</span><span class="nf">setMethodCallHandler</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Swift 版本：</p>



<aside class="alert alert-info" role="alert">
  <p><i class="material-symbols" aria-hidden="true">info</i> <strong>提示：</strong></p>

  <p>在 2.10 的發布中，若要在 iOS 上使用 Task Queue API，只能切換到 <code class="language-plaintext highlighter-rouge">master</code> 渠道。</p>

  

</aside>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="kd">func</span> <span class="nf">register</span><span class="p">(</span><span class="n">with</span> <span class="nv">registrar</span><span class="p">:</span> <span class="kt">FlutterPluginRegistrar</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">let</span> <span class="nv">taskQueue</span> <span class="o">=</span> <span class="n">registrar</span><span class="o">.</span><span class="n">messenger</span><span class="o">.</span><span class="nf">makeBackgroundTaskQueue</span><span class="p">()</span>
  <span class="k">let</span> <span class="nv">channel</span> <span class="o">=</span> <span class="kt">FlutterMethodChannel</span><span class="p">(</span><span class="nv">name</span><span class="p">:</span> <span class="s">"com.example.foo"</span><span class="p">,</span>
                                     <span class="nv">binaryMessenger</span><span class="p">:</span> <span class="n">registrar</span><span class="o">.</span><span class="nf">messenger</span><span class="p">(),</span>
                                     <span class="nv">codec</span><span class="p">:</span> <span class="kt">FlutterStandardMethodCodec</span><span class="o">.</span><span class="n">sharedInstance</span><span class="p">,</span>
                                     <span class="nv">taskQueue</span><span class="p">:</span> <span class="n">taskQueue</span><span class="p">)</span>
  <span class="k">let</span> <span class="nv">instance</span> <span class="o">=</span> <span class="kt">MyPlugin</span><span class="p">()</span>
  <span class="n">registrar</span><span class="o">.</span><span class="nf">addMethodCallDelegate</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="nv">channel</span><span class="p">:</span> <span class="n">channel</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Objective-C 版本：</p>



<aside class="alert alert-info" role="alert">
  <p><i class="material-symbols" aria-hidden="true">info</i> <strong>提示：</strong></p>

  <p>在 2.10 的發布中，若要在 iOS 上使用 Task Queue API，只能切換到 <code class="language-plaintext highlighter-rouge">master</code> 渠道。</p>

  

</aside>

<div class="language-objc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">registerWithRegistrar</span><span class="p">:(</span><span class="n">NSObject</span><span class="o">&lt;</span><span class="n">FlutterPluginRegistrar</span><span class="o">&gt;*</span><span class="p">)</span><span class="nv">registrar</span> <span class="p">{</span>
  <span class="n">NSObject</span><span class="o">&lt;</span><span class="n">FlutterTaskQueue</span><span class="o">&gt;*</span> <span class="n">taskQueue</span> <span class="o">=</span>
      <span class="p">[[</span><span class="n">registrar</span> <span class="nf">messenger</span><span class="p">]</span> <span class="nf">makeBackgroundTaskQueue</span><span class="p">];</span>
  <span class="n">FlutterMethodChannel</span><span class="o">*</span> <span class="n">channel</span> <span class="o">=</span>
      <span class="p">[</span><span class="n">FlutterMethodChannel</span> <span class="nf">methodChannelWithName</span><span class="p">:</span><span class="s">@"com.example.foo"</span>
                                  <span class="nl">binaryMessenger:</span><span class="p">[</span><span class="n">registrar</span> <span class="nf">messenger</span><span class="p">]</span>
                                            <span class="nl">codec:</span><span class="p">[</span><span class="n">FlutterStandardMethodCodec</span> <span class="nf">sharedInstance</span><span class="p">]</span>
                                        <span class="nl">taskQueue:</span><span class="n">taskQueue</span><span class="p">];</span>
  <span class="n">MyPlugin</span><span class="o">*</span> <span class="n">instance</span> <span class="o">=</span> <span class="p">[[</span><span class="n">MyPlugin</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">init</span><span class="p">];</span>
  <span class="p">[</span><span class="n">registrar</span> <span class="nf">addMethodCallDelegate</span><span class="p">:</span><span class="n">instance</span> <span class="nf">channel</span><span class="p">:</span><span class="n">channel</span><span class="p">];</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="jumping-to-the-ui-thread-in-android">
<a class="anchor" href="#jumping-to-the-ui-thread-in-android" aria-hidden="true"><span class="octicon octicon-link"></span></a>跳轉到 Android 中的 UI 執行緒</h3>



<p>為了符合通道跳轉到 Android UI 執行緒的要求，你可能需要從後台執行緒跳轉到 Android 的 UI 執行緒以執行通道的方法。在 Android 中的實現方式是：在一個叫 <code class="language-plaintext highlighter-rouge">Looper</code> 的 Android UI 執行緒裡 <code class="language-plaintext highlighter-rouge">post()</code> 一個 <code class="language-plaintext highlighter-rouge">Runnable</code>。這能使得 <code class="language-plaintext highlighter-rouge">Runnable</code> 在下一次機會時在主線程上執行。</p>



<p>Java 程式碼：</p>



<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">new</span> <span class="nc">Handler</span><span class="o">(</span><span class="nc">Looper</span><span class="o">.</span><span class="na">getMainLooper</span><span class="o">()).</span><span class="na">post</span><span class="o">(</span><span class="k">new</span> <span class="nc">Runnable</span><span class="o">()</span> <span class="o">{</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
    <span class="c1">// Call the desired channel message here.</span>
  <span class="o">}</span>
<span class="o">});</span>
</code></pre></div></div>

<p>Kotlin 程式碼：</p>



<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Handler</span><span class="p">(</span><span class="nc">Looper</span><span class="p">.</span><span class="nf">getMainLooper</span><span class="p">()).</span><span class="nf">post</span> <span class="p">{</span>
  <span class="c1">// Call the desired channel message here.</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="jumping-to-the-main-thread-in-ios">
<a class="anchor" href="#jumping-to-the-main-thread-in-ios" aria-hidden="true"><span class="octicon octicon-link"></span></a>跳轉到 iOS 中的主線程</h3>



<p>為了符合通道跳轉到 iOS 主線程的要求，你可能需要從後台執行緒跳轉到 iOS 的主線程來執行通道方法。在iOS中，這是透過在主 <a href="https://developer.apple.com/documentation/dispatch/dispatchqueue">dispatch queue</a>上執行 <a href="https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/WorkingwithBlocks/WorkingwithBlocks.html">block</a>來實現的：</p>



<p>Objective-C 程式碼：</p>



<div class="language-objectivec highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">dispatch_async</span><span class="p">(</span><span class="n">dispatch_get_main_queue</span><span class="p">(),</span> <span class="o">^</span><span class="p">{</span>
  <span class="c1">// Call the desired channel message here.</span>
<span class="p">});</span>
</code></pre></div></div>

<p>Swift 程式碼：</p>



<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">DispatchQueue</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="k">async</span> <span class="p">{</span>
  <span class="c1">// Call the desired channel message here.</span>
<span class="p">}</span>
</code></pre></div></div>



        
      </div>
    </main>
  </div>
</div>


    
      <footer class="site-footer">
    <div class="container-fluid">
      <div class="row">
        <div class="col-md-12 site-footer__wrapper">
          <div class="site-footer__logo">
            <img src="/assets/images/shared/brand/flutter/logo/flutter-mono-81x100.png" alt="Flutter Logo" width="81" height="100">
          </div>
          <div class="site-footer__content">
            <ul class="site-footer__link-list">
                <li><a href="https://groups.google.com/forum/#!forum/flutter-dev">cfug-dev@</a></li>
                <li><a href="/tos" class="text-nowrap">使用條款</a></li>
                <li><a href="/brand" class="text-nowrap">品牌指南</a></li>
                <li><a href="/security" class="text-nowrap">安全性</a></li>
                <li><a href="https://policies.google.com/privacy?hl=zh-TW" class="text-nowrap">隱私權說明</a></li>
                <li><a href="https://flutter.dev/" class="text-nowrap">官方網站</a></li>
                <li><a href="/disclaimer" class="text-nowrap">免責宣告</a></li>
                <li><a href="https://flutter.tw" class="text-nowrap">Flutter 簡體中文文檔</a></li>
            </ul>
            <p class="licenses">
              參考中文內容需註明本站及連結作為出處，英文內容和範例程式碼均遵從源站授權協議。
            </p>
          </div>
        </div>
      </div>
    </div>
  </footer>
    

    <script src="https://cdn.staticfile.net/jquery/3.7.0/jquery.min.js" integrity="sha512-3gJwYpMe3QewGELv8k/BX9vcqhryRdzRMxVfq6ngyWXwo03GFEzjsUm8Q7RZcHPHksttq7/GFoxjCVUjkjvPdw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdn.staticfile.net/popper.js/1.16.1/umd/popper.min.js" integrity="sha512-ubuT8Z88WxezgSqf3RLuNi5lmjstiJcyezx34yIU2gAHonIi27Na7atqzUZCOoY4CExaoFumzOsFQ2Ch+I/HCw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdn.staticfile.net/bootstrap/4.6.2/js/bootstrap.min.js" integrity="sha512-7rusk8kGPFynZWu26OKbTeI+QPoYchtxsmPeBqkHIEXJxeun4yJ4ISYe7C6sz9wdxeE1Gk3VxsIWgCZTc+vX3g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdn.staticfile.net/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<!-- <script src="https://cdn.staticfile.net/js-cookie/3.0.5/js.cookie.min.js" integrity="sha512-nlp9/l96/EpjYBx7EP7pGASVXNe80hGhYAUrjeXnu/fyF5Py0/RXav4BBNs7n5Hx1WFhOEOWSAVjGeC3oKxDVQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>-->

    <script src="/assets/js/vendor/code-prettify/prettify.js?v=1714594673"></script>
    <script src="/assets/js/vendor/code-prettify/lang-css.js?v=1714594673"></script>
    <script src="/assets/js/vendor/code-prettify/lang-dart.js?v=1714594673"></script>
    <script src="/assets/js/vendor/code-prettify/lang-yaml.js?v=1714594673"></script>
    <script src="/assets/js/tabs.js?v=1714594673"></script>
    <script src="/assets/js/archive.js?v=1714594673"></script>
    <script src="/assets/js/main.js?v=1714594673"></script>

    

  

<script src="/assets/translator/js/translator.js"></script></body></html>